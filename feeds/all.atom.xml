<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Guillaume Martin</title><link href="https://guillaume-martin.github.io/" rel="alternate"></link><link href="https://guillaume-martin.github.io/feeds/all.atom.xml" rel="self"></link><id>https://guillaume-martin.github.io/</id><updated>2021-03-25T12:42:00+08:00</updated><entry><title>Calculate a running total in SQL</title><link href="https://guillaume-martin.github.io/sql-running-total.html" rel="alternate"></link><published>2021-03-25T00:00:00+08:00</published><updated>2021-03-25T12:42:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2021-03-25:/sql-running-total.html</id><summary type="html">&lt;p&gt;How to use SQL window functions to calculate a running total&lt;/p&gt;</summary><content type="html">&lt;p&gt;This post is an illustrating example for the article on &lt;a href="https://guillaume-martin.github.io/sql-window-functions.html"&gt;SQL window functions&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A running total is the sum of a sequence of numbers that is updated every time a new number is added to the sequence.&lt;/p&gt;
&lt;p&gt;It looks like this:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="right"&gt;Amount&lt;/th&gt;
&lt;th align="right"&gt;Running Total&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="right"&gt;2&lt;/td&gt;
&lt;td align="right"&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;7&lt;/td&gt;
&lt;td align="right"&gt;9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;19&lt;/td&gt;
&lt;td align="right"&gt;28&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;13&lt;/td&gt;
&lt;td align="right"&gt;41&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;4&lt;/td&gt;
&lt;td align="right"&gt;45&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;9&lt;/td&gt;
&lt;td align="right"&gt;54&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;To illustrate how to calculate a running total using SQL, I will use the DVDrental database that can be downloaded &lt;a href="https://www.postgresqltutorial.com/postgresql-sample-database/"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Lets say, that I want to get the running total of the daily payments.&lt;/p&gt;
&lt;p&gt;First, I create a CTE that sums up the daily payment amounts:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;WITH&lt;/span&gt; &lt;span class="n"&gt;daily_amount&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="k"&gt;SELECT&lt;/span&gt; 
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="k"&gt;FROM&lt;/span&gt; 
        &lt;span class="n"&gt;payment&lt;/span&gt;
    &lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt;
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then, I use a window function on the amount column:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt; &lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="n"&gt;UNBOUNDED&lt;/span&gt; &lt;span class="n"&gt;PRECEDING&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;running_total&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I use the ORDER BY statement to make sure that the sequence of payment amounts is in chronological order.
Then I use the &lt;code&gt;ROWS UNBOUNDED PRECEDING&lt;/code&gt; statement to include all the rows that are previous to the current row when I calculate the sum.&lt;/p&gt;
&lt;p&gt;The final query looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;WITH&lt;/span&gt; &lt;span class="n"&gt;daily_amount&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="k"&gt;SELECT&lt;/span&gt; 
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="k"&gt;FROM&lt;/span&gt; 
        &lt;span class="n"&gt;payment&lt;/span&gt;
    &lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt;
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt; &lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="n"&gt;UNBOUNDED&lt;/span&gt; &lt;span class="n"&gt;PRECEDING&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;running_total&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;daily_amount&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It returns the following result set:  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;text
 payment_date | amount  | running_total 
--------------+---------+---------------
 2007-02-14   |  116.73 |        116.73
 2007-02-15   | 1188.92 |       1305.65
 2007-02-16   | 1154.18 |       2459.83
 2007-02-17   | 1188.17 |       3648.00
 2007-02-18   | 1275.98 |       4923.98
 2007-02-19   | 1290.90 |       6214.88
 2007-02-20   | 1219.09 |       7433.97
 [...]&lt;/code&gt;&lt;/p&gt;</content><category term="Database"></category><category term="database"></category><category term="sql"></category><category term="analytics"></category></entry><entry><title>Calculate a running total percent in SQL</title><link href="https://guillaume-martin.github.io/sql-running-total-percent.html" rel="alternate"></link><published>2021-03-25T00:00:00+08:00</published><updated>2021-03-25T00:00:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2021-03-25:/sql-running-total-percent.html</id><summary type="html">&lt;p&gt;How to use SQL window functions to calculate a running total percentage&lt;/p&gt;</summary><content type="html">&lt;p&gt;In this previous &lt;a href="https://guillaume-martin.github.io/running-total-with-sql"&gt;post&lt;/a&gt;, I show how to calculate a running total in SQL using window functions. In the example, I calculated the running total of the daily amount of payments.&lt;/p&gt;
&lt;p&gt;In this post, I want to get the daily running total over the month as well as the percentage of this running total over the month total.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="right"&gt;Month&lt;/th&gt;
&lt;th align="right"&gt;Amount&lt;/th&gt;
&lt;th align="right"&gt;Running Total&lt;/th&gt;
&lt;th align="right"&gt;Running Total Percent&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="right"&gt;1&lt;/td&gt;
&lt;td align="right"&gt;1&lt;/td&gt;
&lt;td align="right"&gt;1&lt;/td&gt;
&lt;td align="right"&gt;5.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;1&lt;/td&gt;
&lt;td align="right"&gt;13&lt;/td&gt;
&lt;td align="right"&gt;14&lt;/td&gt;
&lt;td align="right"&gt;82.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;1&lt;/td&gt;
&lt;td align="right"&gt;1&lt;/td&gt;
&lt;td align="right"&gt;15&lt;/td&gt;
&lt;td align="right"&gt;88.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;1&lt;/td&gt;
&lt;td align="right"&gt;2&lt;/td&gt;
&lt;td align="right"&gt;17&lt;/td&gt;
&lt;td align="right"&gt;100.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;2&lt;/td&gt;
&lt;td align="right"&gt;4&lt;/td&gt;
&lt;td align="right"&gt;4&lt;/td&gt;
&lt;td align="right"&gt;26.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;2&lt;/td&gt;
&lt;td align="right"&gt;19&lt;/td&gt;
&lt;td align="right"&gt;23&lt;/td&gt;
&lt;td align="right"&gt;60.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;2&lt;/td&gt;
&lt;td align="right"&gt;15&lt;/td&gt;
&lt;td align="right"&gt;38&lt;/td&gt;
&lt;td align="right"&gt;100.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;3&lt;/td&gt;
&lt;td align="right"&gt;4&lt;/td&gt;
&lt;td align="right"&gt;4&lt;/td&gt;
&lt;td align="right"&gt;18.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;3&lt;/td&gt;
&lt;td align="right"&gt;18&lt;/td&gt;
&lt;td align="right"&gt;22&lt;/td&gt;
&lt;td align="right"&gt;100.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;I create a CTE where I calculate the payments amount per day. I also add a column with the month using the &lt;code&gt;data_part()&lt;/code&gt; function on the payment date.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;WITH&lt;/span&gt; &lt;span class="n"&gt;daily_amount&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="k"&gt;SELECT&lt;/span&gt; 
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;date_part&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;month&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="k"&gt;FROM&lt;/span&gt; 
        &lt;span class="n"&gt;payment&lt;/span&gt;
    &lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; 
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;date_part&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;month&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then, from this CTE, I create another one that returns the monthly total and the running total over each month.
To do so, I use a window function with a &lt;code&gt;PARTITION BY month&lt;/code&gt; statement that partitions my data on the month. Because I partitioned my data, when I use the &lt;code&gt;ROWS UNBOUNDED PRECEDING&lt;/code&gt; statement, only all the amounts from the beginning of the current month are added. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;monthly_running_total&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;payment_date&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;monthly_total&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt; &lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt; &lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="n"&gt;UNBOUNDED&lt;/span&gt; &lt;span class="n"&gt;PRECEDING&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;running_total&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt;
    &lt;span class="n"&gt;daily_amount&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finally, I execute a &lt;code&gt;SELECT&lt;/code&gt; statement on this CTE where I calculate the percentage of the running total over the month's total: &lt;/p&gt;
&lt;p&gt;&lt;span class="math"&gt;\(running\ total\ percent = \frac{running\ total}{month\ total}\times100\)&lt;/span&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;ROUND&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;running_total&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;monthly_total&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;%&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;running_percent&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here's the final query:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;WITH&lt;/span&gt; &lt;span class="n"&gt;daily_amount&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="k"&gt;SELECT&lt;/span&gt; 
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;date_part&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;month&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="k"&gt;FROM&lt;/span&gt; 
        &lt;span class="n"&gt;payment&lt;/span&gt;
    &lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; 
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;date_part&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;month&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;monthly_running_total&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;payment_date&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;monthly_total&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt; &lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt; &lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="n"&gt;UNBOUNDED&lt;/span&gt; &lt;span class="n"&gt;PRECEDING&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;running_total&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt;
    &lt;span class="n"&gt;daily_amount&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;SELECT&lt;/span&gt;
    &lt;span class="n"&gt;payment_date&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;monthly_total&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;running_total&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ROUND&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;running_total&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;monthly_total&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;%&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;running_percent&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt;
    &lt;span class="n"&gt;monthly_running_total&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The returned results set looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;monthly_total&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;running_total&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;running_percent&lt;/span&gt; 
&lt;span class="c1"&gt;--------------+-------+---------+---------------+---------------+-----------------&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;73&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;8351&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;73&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1188&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;92&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;8351&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;1305&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;65&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1154&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;8351&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;2459&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;83&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;29&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1188&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;8351&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;3648&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;43&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1275&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;98&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;8351&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;4923&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;98&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;59&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1290&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;90&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;8351&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;6214&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;88&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;74&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1219&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;09&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;8351&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;7433&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;97&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;89&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;917&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;87&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;8351&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;8351&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;01&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2808&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;23886&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;2808&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2550&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;23886&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;5358&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;29&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;299&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;23886&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;5657&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;57&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2442&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;23886&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;8099&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;73&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;33&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2701&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;76&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;23886&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;10801&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;49&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;45&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2617&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;69&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;23886&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;13419&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;56&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2669&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;89&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;23886&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;16089&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;07&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;67&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2868&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;27&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;23886&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;18957&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;34&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;79&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;22&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2586&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;79&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;23886&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;21544&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2342&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;43&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;23886&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;23886&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;56&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;273&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;36&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;273&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;36&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2077&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;2350&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;07&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1984&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;4334&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;78&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2227&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;6562&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;62&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;09&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2067&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;86&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;8630&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;48&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1973&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;10603&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;66&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;37&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1940&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;12543&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;98&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;43&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1930&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;48&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;14474&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;347&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;14821&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;67&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;51&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;27&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2673&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;57&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;17495&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;61&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2622&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;73&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;20117&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;97&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;29&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2717&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;60&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;22835&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;57&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;5723&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;89&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;28559&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;514&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;514&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;514&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt; &lt;span class="k"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="Database"></category><category term="database"></category><category term="sql"></category><category term="analytics"></category></entry><entry><title>Calculate a moving average in SQL</title><link href="https://guillaume-martin.github.io/sql-moving-average.html" rel="alternate"></link><published>2020-12-02T12:40:00+08:00</published><updated>2020-12-02T12:40:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2020-12-02:/sql-moving-average.html</id><summary type="html">&lt;p&gt;How to use SQL window functions to calculate a moving average&lt;/p&gt;</summary><content type="html">&lt;p&gt;In this post, I am going to demonstrate how to calculate a moving average in SQL.&lt;/p&gt;
&lt;p&gt;You also need to know a bout SQL Window Functions. If you don't, you should read my article &lt;a href="https://guillaume-martin.github.io/sql-window-functions"&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;To illustrate how to calculate a moving average, I'll use the DVDrental database that can be downloaded &lt;a href="https://www.postgresqltutorial.com/postgresql-sample-database/"&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;We have a payment table storing all the payments made by our customers.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;# \d+ payment
          Table &amp;quot;public.payment&amp;quot;
    Column    |            Type             |
--------------+-----------------------------+
 payment_id   | integer                     |
 customer_id  | smallint                    |
 staff_id     | smallint                    |
 rental_id    | integer                     |
 amount       | numeric(5,2)                |
 payment_date | timestamp without time zone |
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I want to calculate the moving average of the amount over a 5 days period.&lt;/p&gt;
&lt;p&gt;First, I calculate the total amount per day in a Common Table Expression (CTE) using a &lt;code&gt;WITH&lt;/code&gt; statement.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;WITH&lt;/span&gt; &lt;span class="n"&gt;daily_amount&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="k"&gt;SELECT&lt;/span&gt; 
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="k"&gt;FROM&lt;/span&gt; 
        &lt;span class="n"&gt;payment&lt;/span&gt;
    &lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt;
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Next, I calculate the moving average on the amount using a window function:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;payment_date&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;AVG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="n"&gt;PRECEDING&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;MA5&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;daily_amount&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;payment_date&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="n"&gt;ma5&lt;/span&gt;          
&lt;span class="c1"&gt;--------------+---------+-----------------------&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;73&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7300000000000000&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1290&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;90&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;703&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8150000000000000&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1219&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;09&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;875&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5733333333333333&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2617&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;69&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1311&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1025000000000000&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;347&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1118&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3240000000000000&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2227&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1303&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2433333333333333&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1188&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;92&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1481&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9416666666666667&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2622&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;73&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1703&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9133333333333333&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;SQL returns an average for the first four rows. When we calculate a moving average, the first rows should be empty because we don't have enough values to calculate the average.
In my example, I need to return Null for the first four rows. To do so, I'll use a &lt;code&gt;CASE WHEN ELSE&lt;/code&gt; statement. This statement is the SQL equivalent of &lt;code&gt;if then else&lt;/code&gt;.
I also use the &lt;code&gt;ROW_NUMBER()&lt;/code&gt; window function to get the number of each row of the result set. Then if &lt;code&gt;ROW_NUMBER()&lt;/code&gt; is more than 4 then the query should return the average  of the amount of the last 5 rows. If the &lt;code&gt;ROW_NUMBER()&lt;/code&gt; is less than 4, the query should return &lt;code&gt;Null&lt;/code&gt;.
Finaly, I round the average to two decimals using the &lt;a href="https://www.postgresql.org/docs/13/functions-math.html"&gt;&lt;code&gt;ROUND()&lt;/code&gt;&lt;/a&gt; function.
This is how I write the &lt;code&gt;CASE&lt;/code&gt; statement:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;CASE&lt;/span&gt; 
    &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="n"&gt;ROW_NUMBER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="n"&gt;ROUND&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;AVG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="n"&gt;PRECEDING&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;ELSE&lt;/span&gt; &lt;span class="k"&gt;Null&lt;/span&gt;
&lt;span class="k"&gt;END&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;MA5&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The Final query looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;  &lt;span class="k"&gt;WITH&lt;/span&gt; &lt;span class="n"&gt;cte_daily_amount&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="k"&gt;SELECT&lt;/span&gt; 
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="k"&gt;FROM&lt;/span&gt; 
        &lt;span class="n"&gt;payment&lt;/span&gt;
    &lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt;
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
 &lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;payment_date&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;CASE&lt;/span&gt; 
        &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="n"&gt;ROW_NUMBER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="k"&gt;THEN&lt;/span&gt; &lt;span class="n"&gt;ROUND&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;AVG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="n"&gt;PRECEDING&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;ELSE&lt;/span&gt; &lt;span class="k"&gt;Null&lt;/span&gt;
      &lt;span class="k"&gt;END&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;MA5&lt;/span&gt; 
 &lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;cte_daily_amount&lt;/span&gt;
 &lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;payment_date&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt;   &lt;span class="n"&gt;ma5&lt;/span&gt;   
&lt;span class="c1"&gt;---------------+---------+---------&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;73&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1290&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;90&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1219&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;09&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2617&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;69&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;347&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1118&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2227&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1303&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1188&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;92&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1481&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;94&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2622&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;73&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1703&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;91&lt;/span&gt;
&lt;span class="p"&gt;[...]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Database"></category><category term="database"></category><category term="sql"></category><category term="analytics"></category></entry><entry><title>SQL window functions</title><link href="https://guillaume-martin.github.io/sql-window-functions.html" rel="alternate"></link><published>2020-12-02T12:20:00+08:00</published><updated>2020-12-02T12:20:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2020-12-02:/sql-window-functions.html</id><summary type="html">&lt;p&gt;An introduction to window functions in SQL.&lt;/p&gt;</summary><content type="html">&lt;p&gt;This article is an introduction to the basics of window functions in SQL.
First, in the introduction, I will explain what is a window function and what it does. Then, I will show you how to write window functions. Finally, I will go through the different types of window functions we can use.
At the end of the article, I will link to some practical examples of how we can use those functions. More examples will be added later as I write more articles on the topic.&lt;/p&gt;
&lt;h1&gt;Introduction&lt;/h1&gt;
&lt;p&gt;A window function performs calculations against a partition of the data.
The two main characteristics of window functions are:
- They don't collapse rows of a group
- They can run calculations on a set of rows related to the current row.&lt;/p&gt;
&lt;p&gt;Let's see what it means.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Window functions don't collapse rows of a group.
The difference with aggregation functions using the &lt;code&gt;GROUP BY&lt;/code&gt; clause is that the result is not grouped into single rows. Instead, the resultset contains every row of each group.
To illustrate, we'll write queries that sum the salaries of each department of a company.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Aggregation functions return a single result per group, hiding the rows of each group.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt; department_name  |   sum    
------------------+----------
 Accounting       | 20300.00
 Administration   |  4400.00
 Executive        | 58000.00
 Finance          | 51600.00
 Human Resources  |  6500.00
 IT               | 28800.00
 Marketing        | 19000.00
 Public Relations | 10000.00
 Purchasing       | 24900.00
 Sales            | 57700.00
 Shipping         | 41200.00
(11 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;When using a window function, all the rows of each group are returned.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt; department_name  |   sum    
------------------+----------
 Accounting       | 20300.00
 Accounting       | 20300.00
 Administration   |  4400.00
 Executive        | 58000.00
[...]
 Shipping         | 41200.00
 Shipping         | 41200.00
 Shipping         | 41200.00
(40 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;ol&gt;
&lt;li&gt;Window functions can run calculations on a set of rows related to the current row.
Window functions can run their calculation on a window that 'slides' along the dataset. It can include a number of rows before and/or after the current row.
A common example of such operation is how we calculate a moving average. For example, a 5 periods moving average will only include the last five rows:
In the example below, &lt;span class="math"&gt;\(60 = \frac{85+97+39+49+30}{5}\)&lt;/span&gt;.
&lt;img alt="5be3beb5e83742d386080ddbb7bb4125.png" src="images/5be3beb5e83742d386080ddbb7bb4125.png"&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h1&gt;Syntax&lt;/h1&gt;
&lt;p&gt;A window function call always contains an &lt;code&gt;OVER&lt;/code&gt; clause. The &lt;code&gt;OVER&lt;/code&gt; clause is what defines the window partitions.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;expression&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;expression_list&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
                          &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;order_list&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
                          &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="n"&gt;frame_clause&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;The OVER() clause&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;OVER()&lt;/code&gt; clause is where the partitionning of the window function is set. It contains three clauses:
- &lt;code&gt;PARTITION BY&lt;/code&gt;
- &lt;code&gt;ORDER BY&lt;/code&gt;
- &lt;code&gt;ROWS&lt;/code&gt; or &lt;code&gt;RANGE&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;&lt;code&gt;PARTITION BY&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;Splits the table into partitions based on a column's unique values.&lt;/p&gt;
&lt;p&gt;Let's have a look at salaries:&lt;/p&gt;
&lt;p&gt;If I write the following query,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="k"&gt;MAX&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;salaries&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I get a unique row with the highest of all salaries:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;   max    
----------
 24000.00
(1 row)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If I want to get the maximum salary for each department, I can use the &lt;code&gt;PARTITION BY department&lt;/code&gt; clause:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;employee&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;MAX&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;department_max&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;salaries&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
     &lt;span class="n"&gt;employee&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt;    &lt;span class="n"&gt;department&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;salary&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;department_max&lt;/span&gt; 
&lt;span class="c1"&gt;-------------------+------------------+----------+----------------&lt;/span&gt;
 &lt;span class="n"&gt;William&lt;/span&gt; &lt;span class="n"&gt;Gietz&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8300&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Shelley&lt;/span&gt; &lt;span class="n"&gt;Higgins&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Jennifer&lt;/span&gt; &lt;span class="n"&gt;Whalen&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Administration&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Lex&lt;/span&gt; &lt;span class="n"&gt;De&lt;/span&gt; &lt;span class="n"&gt;Haan&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Steven&lt;/span&gt; &lt;span class="n"&gt;King&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Neena&lt;/span&gt; &lt;span class="n"&gt;Kochhar&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
&lt;span class="p"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;For each row, I get the maximum salary for that department. For example, we can see that Shelley Higgins has the highest salary in the Accounting department.&lt;/p&gt;
&lt;h3&gt;&lt;code&gt;ORDER BY&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;Specifies the order of rows in a partition.
From the previous example, we can order the rows by employee:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;employee&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;MAX&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt; &lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;employee&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;department_max&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt;
    &lt;span class="n"&gt;salaries&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
     &lt;span class="n"&gt;employee&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt;    &lt;span class="n"&gt;department&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;salary&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;department_max&lt;/span&gt; 
&lt;span class="c1"&gt;-------------------+------------------+----------+----------------&lt;/span&gt;
 &lt;span class="n"&gt;Shelley&lt;/span&gt; &lt;span class="n"&gt;Higgins&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;William&lt;/span&gt; &lt;span class="n"&gt;Gietz&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8300&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Jennifer&lt;/span&gt; &lt;span class="n"&gt;Whalen&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Administration&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Lex&lt;/span&gt; &lt;span class="n"&gt;De&lt;/span&gt; &lt;span class="n"&gt;Haan&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Neena&lt;/span&gt; &lt;span class="n"&gt;Kochhar&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Steven&lt;/span&gt; &lt;span class="n"&gt;King&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Daniel&lt;/span&gt; &lt;span class="n"&gt;Faviet&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;9000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;9000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Ismael&lt;/span&gt; &lt;span class="n"&gt;Sciarra&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;7700&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;9000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;John&lt;/span&gt; &lt;span class="n"&gt;Chen&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8200&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;9000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Jose&lt;/span&gt; &lt;span class="n"&gt;Manuel&lt;/span&gt; &lt;span class="n"&gt;Urman&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;7800&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;9000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We now have the departments that are grouped together and all employees of a department are sorted alphabetically.&lt;/p&gt;
&lt;h3&gt;&lt;code&gt;ROWS&lt;/code&gt; or &lt;code&gt;RANGE&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;The last clause defines the frame. This is a subset of rows against which the function is run.&lt;/p&gt;
&lt;p&gt;It can either specify where the frame starts only:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="n"&gt;RANGE&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="k"&gt;ROWS&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt; &lt;span class="n"&gt;frame_start&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Or it can specify where the frame starts and where it ends:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="n"&gt;RANGE&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="k"&gt;ROWS&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt; &lt;span class="k"&gt;BETWEEN&lt;/span&gt; &lt;span class="n"&gt;frame_start&lt;/span&gt; &lt;span class="k"&gt;AND&lt;/span&gt; &lt;span class="n"&gt;frame_end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;frame_start&lt;/code&gt; is one of the following options:
- N PRECEDING: N rows before the current row.
- UNBOUNDED PRECEDING: all the rows preceding the current row.
- CURRENT ROW&lt;/p&gt;
&lt;p&gt;&lt;code&gt;frame_end&lt;/code&gt; is one of the following options:
- CURRENT ROW
- N FOLLOWING: N rows after the current row.
- UNBOUNDED FOLLOWING: all the rows following the current row.&lt;/p&gt;
&lt;p&gt;Setting up the frame start only:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;payment_date&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="n"&gt;UNBOUNDED&lt;/span&gt; &lt;span class="n"&gt;PRECEDING&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;unbounded&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="n"&gt;PRECEDING&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;nrows&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="k"&gt;CURRENT&lt;/span&gt; &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;current_row&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;daily_sales&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="74b0172cbc574c4d96e82b4a597cc6e7.png" src="images/74b0172cbc574c4d96e82b4a597cc6e7.png"&gt;&lt;/p&gt;
&lt;p&gt;Let's look at some example using &lt;code&gt;BETWEEN ... AND ...&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;payment_date&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="k"&gt;BETWEEN&lt;/span&gt; &lt;span class="n"&gt;UNBOUNDED&lt;/span&gt; &lt;span class="n"&gt;PRECEDING&lt;/span&gt; &lt;span class="k"&gt;AND&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="n"&gt;FOLLOWING&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;all_til_next_two&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="k"&gt;BETWEEN&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="n"&gt;PRECEDING&lt;/span&gt; &lt;span class="k"&gt;AND&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="n"&gt;FOLLOWING&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;six_rows&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="k"&gt;BETWEEN&lt;/span&gt; &lt;span class="k"&gt;CURRENT&lt;/span&gt; &lt;span class="k"&gt;ROW&lt;/span&gt; &lt;span class="k"&gt;AND&lt;/span&gt; &lt;span class="n"&gt;UNBOUNDED&lt;/span&gt; &lt;span class="n"&gt;FOLLOWING&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;all_following&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;daily_sales&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="df5de973fc864cc88b447eac83fa73a9.png" src="images/df5de973fc864cc88b447eac83fa73a9.png"&gt;&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;BETWEEN UNBOUNDED PRECEDING AND 2 FOLLOWING&lt;/code&gt; clause will sum all the amounts from the beginning (UNBOUNDED PRECEDING) until two rows after the current row (2 FOLLOWING) as shown by the red frame.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;BETWEEN 3 PRECEDING AND 2 FOLLOWING&lt;/code&gt; clause  will sum all the amounts from three rows before the current row (3 PRECEDING) until two rows after the current row (2 FOLLOWING) as shown by the green frame.&lt;/p&gt;
&lt;p&gt;Finally, the &lt;code&gt;BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING&lt;/code&gt; clause will sum all the amounts from the current row to the last row (UNBOUNDED FOLLOWING) as shown by the blue frame.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;What is the difference between ROWS and RANGE&lt;/strong&gt;
To check the difference between ROWS and RANGE, I am going to write a query that sums the salaries using each of the frames keywords:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt; &lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="k"&gt;CURRENT&lt;/span&gt; &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="k"&gt;rows&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt; &lt;span class="n"&gt;RANGE&lt;/span&gt; &lt;span class="k"&gt;CURRENT&lt;/span&gt; &lt;span class="k"&gt;ROW&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;range&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;salaries&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="5977e81bf968489e857403669d2cf016.png" src="images/5977e81bf968489e857403669d2cf016.png"&gt;&lt;/p&gt;
&lt;p&gt;We can see there's a difference when there are duplicate values. RANGE returns all rows with the same value as a unique current row. In our example, there are two employees with a salary of 4800. When using ROWS, the sum returns 4800 for each of the rows. When using RANGE, the sum returns 9600 (4800 + 4800) on both rows.&lt;/p&gt;
&lt;h1&gt;Window functions types&lt;/h1&gt;
&lt;h2&gt;Value window functions&lt;/h2&gt;
&lt;p&gt;The value window functions return the value of a column or expression at a specified row of a resultset.&lt;/p&gt;
&lt;h3&gt;FIRST_VALUE()&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;FIRST_VALUE()&lt;/code&gt; function returns the first value in a sorted partition.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;FIRST_VALUE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;expression&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;
Let's write a query that gives us the name of the employee who has the lowest salary of each department. We'll build the window function as follow:
- partition the data by department: &lt;code&gt;PARTITION BY department&lt;/code&gt;.
- order the salaries to get the lowest one in the first row of the partition: &lt;code&gt;ORDER BY salary&lt;/code&gt;.
- get the name of the employee in the first row of the partition: &lt;code&gt;FIRST_VALUE(employee)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The final query will look like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="k"&gt;SELECT&lt;/span&gt;
        &lt;span class="n"&gt;employee_id&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;employee&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;FIRST_VALUE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;employee&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt; &lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;FROM&lt;/span&gt; 
        &lt;span class="n"&gt;salaries&lt;/span&gt;
    &lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;employee_id&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="n"&gt;employee&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt;    &lt;span class="n"&gt;department&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;salary&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt;    &lt;span class="n"&gt;first_value&lt;/span&gt;    
&lt;span class="c1"&gt;-------------+-------------------+------------------+----------+-------------------&lt;/span&gt;
         &lt;span class="mi"&gt;206&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;William&lt;/span&gt; &lt;span class="n"&gt;Gietz&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8300&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;William&lt;/span&gt; &lt;span class="n"&gt;Gietz&lt;/span&gt;
         &lt;span class="mi"&gt;205&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shelley&lt;/span&gt; &lt;span class="n"&gt;Higgins&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;William&lt;/span&gt; &lt;span class="n"&gt;Gietz&lt;/span&gt;
         &lt;span class="mi"&gt;200&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Jennifer&lt;/span&gt; &lt;span class="n"&gt;Whalen&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Administration&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Jennifer&lt;/span&gt; &lt;span class="n"&gt;Whalen&lt;/span&gt;
         &lt;span class="mi"&gt;102&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Lex&lt;/span&gt; &lt;span class="n"&gt;De&lt;/span&gt; &lt;span class="n"&gt;Haan&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Lex&lt;/span&gt; &lt;span class="n"&gt;De&lt;/span&gt; &lt;span class="n"&gt;Haan&lt;/span&gt;
         &lt;span class="mi"&gt;101&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Neena&lt;/span&gt; &lt;span class="n"&gt;Kochhar&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Lex&lt;/span&gt; &lt;span class="n"&gt;De&lt;/span&gt; &lt;span class="n"&gt;Haan&lt;/span&gt;
         &lt;span class="mi"&gt;100&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Steven&lt;/span&gt; &lt;span class="n"&gt;King&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Lex&lt;/span&gt; &lt;span class="n"&gt;De&lt;/span&gt; &lt;span class="n"&gt;Haan&lt;/span&gt;
         &lt;span class="mi"&gt;113&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Luis&lt;/span&gt; &lt;span class="n"&gt;Popp&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;6900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Luis&lt;/span&gt; &lt;span class="n"&gt;Popp&lt;/span&gt;
         &lt;span class="mi"&gt;111&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Ismael&lt;/span&gt; &lt;span class="n"&gt;Sciarra&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;7700&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Luis&lt;/span&gt; &lt;span class="n"&gt;Popp&lt;/span&gt;
         &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Jose&lt;/span&gt; &lt;span class="n"&gt;Manuel&lt;/span&gt; &lt;span class="n"&gt;Urman&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;7800&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Luis&lt;/span&gt; &lt;span class="n"&gt;Popp&lt;/span&gt;
&lt;span class="p"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;LAST_VALUE()&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;LAST_VALUE()&lt;/code&gt; function returns the value of the last row of the partition.
Unlike the &lt;code&gt;FIRST_VALUE()&lt;/code&gt; function, it requires that the frame is specified in the OVER() clause.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Syntax:&lt;/strong&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;LAST_VALUE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;expression&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;&lt;br&gt;
We can use the same example we used for the &lt;em&gt;first_value()&lt;/em&gt; function. This time, we want to see who has the highest salary in each department:
- partition the data by department: &lt;code&gt;PARTITION BY department&lt;/code&gt;.
- order the salaries to get the highest one in the last row of the partition: &lt;code&gt;ORDER BY salary&lt;/code&gt;.
- get the name of the employee in the last row of the partition: &lt;code&gt;LAST_VALUE(employee)&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
    &lt;span class="n"&gt;employee_id&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;employee&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LAST_VALUE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;employee&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt; &lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt; &lt;span class="k"&gt;ROWS&lt;/span&gt; &lt;span class="k"&gt;BETWEEN&lt;/span&gt; &lt;span class="n"&gt;UNBOUNDED&lt;/span&gt; &lt;span class="n"&gt;PRECEDING&lt;/span&gt; &lt;span class="k"&gt;AND&lt;/span&gt; &lt;span class="n"&gt;UNBOUNDED&lt;/span&gt; &lt;span class="n"&gt;FOLLOWING&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;salaries&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;employee_id&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="n"&gt;employee&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt;    &lt;span class="n"&gt;department&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;salary&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt;    &lt;span class="n"&gt;last_value&lt;/span&gt;     
&lt;span class="c1"&gt;-------------+-------------------+------------------+----------+-------------------&lt;/span&gt;
         &lt;span class="mi"&gt;206&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;William&lt;/span&gt; &lt;span class="n"&gt;Gietz&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8300&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shelley&lt;/span&gt; &lt;span class="n"&gt;Higgins&lt;/span&gt;
         &lt;span class="mi"&gt;205&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shelley&lt;/span&gt; &lt;span class="n"&gt;Higgins&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shelley&lt;/span&gt; &lt;span class="n"&gt;Higgins&lt;/span&gt;
         &lt;span class="mi"&gt;200&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Jennifer&lt;/span&gt; &lt;span class="n"&gt;Whalen&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Administration&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Jennifer&lt;/span&gt; &lt;span class="n"&gt;Whalen&lt;/span&gt;
         &lt;span class="mi"&gt;102&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Lex&lt;/span&gt; &lt;span class="n"&gt;De&lt;/span&gt; &lt;span class="n"&gt;Haan&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Steven&lt;/span&gt; &lt;span class="n"&gt;King&lt;/span&gt;
         &lt;span class="mi"&gt;101&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Neena&lt;/span&gt; &lt;span class="n"&gt;Kochhar&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Steven&lt;/span&gt; &lt;span class="n"&gt;King&lt;/span&gt;
         &lt;span class="mi"&gt;100&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Steven&lt;/span&gt; &lt;span class="n"&gt;King&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Steven&lt;/span&gt; &lt;span class="n"&gt;King&lt;/span&gt;
         &lt;span class="mi"&gt;113&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Luis&lt;/span&gt; &lt;span class="n"&gt;Popp&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;6900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Nancy&lt;/span&gt; &lt;span class="n"&gt;Greenberg&lt;/span&gt;
         &lt;span class="mi"&gt;111&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Ismael&lt;/span&gt; &lt;span class="n"&gt;Sciarra&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;7700&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Nancy&lt;/span&gt; &lt;span class="n"&gt;Greenberg&lt;/span&gt;
         &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Jose&lt;/span&gt; &lt;span class="n"&gt;Manuel&lt;/span&gt; &lt;span class="n"&gt;Urman&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;7800&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Nancy&lt;/span&gt; &lt;span class="n"&gt;Greenberg&lt;/span&gt;
         &lt;span class="mi"&gt;110&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;John&lt;/span&gt; &lt;span class="n"&gt;Chen&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8200&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Nancy&lt;/span&gt; &lt;span class="n"&gt;Greenberg&lt;/span&gt;
         &lt;span class="mi"&gt;109&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Daniel&lt;/span&gt; &lt;span class="n"&gt;Faviet&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;9000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Nancy&lt;/span&gt; &lt;span class="n"&gt;Greenberg&lt;/span&gt;
         &lt;span class="mi"&gt;108&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Nancy&lt;/span&gt; &lt;span class="n"&gt;Greenberg&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Nancy&lt;/span&gt; &lt;span class="n"&gt;Greenberg&lt;/span&gt;
&lt;span class="p"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;LAG()&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;LAG()&lt;/code&gt; funciton accesses the row that is n rows before the current row. We can also set a default value that will be returned when the row does not exist.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Syntax:&lt;/strong&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;LAG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;expression&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;offset&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;where &lt;strong&gt;offset&lt;/strong&gt; is the number of rows before the current row from which we want the data.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;&lt;br&gt;
We can use the LAG() function to compare daily sales with the previous week sales. To do so, we:
- order the sales by date: &lt;code&gt;ORDER BY payment_date&lt;/code&gt;.
- get the amount from 7 days before: &lt;code&gt;LAG(amount, 7)&lt;/code&gt;.
- we can add a default value for the first 7 rows: &lt;code&gt;LAG(amount, 7, 0::numeric&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;The final query looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;WITH&lt;/span&gt; &lt;span class="n"&gt;daily_sales&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="k"&gt;SELECT&lt;/span&gt; 
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="k"&gt;FROM&lt;/span&gt; 
        &lt;span class="n"&gt;payment&lt;/span&gt;
    &lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; 
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;payment_date&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LAG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;numeric&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;previous_week_amount&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;daily_sales&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;payment_date&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;previous_week_amount&lt;/span&gt; 
&lt;span class="c1"&gt;--------------+---------+----------------------&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;73&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                    &lt;span class="mi"&gt;0&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1188&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;92&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                    &lt;span class="mi"&gt;0&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1154&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                    &lt;span class="mi"&gt;0&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1188&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                    &lt;span class="mi"&gt;0&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1275&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;98&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                    &lt;span class="mi"&gt;0&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1290&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;90&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                    &lt;span class="mi"&gt;0&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1219&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;09&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                    &lt;span class="mi"&gt;0&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;917&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;87&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;               &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;73&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;01&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2808&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;              &lt;span class="mi"&gt;1188&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;92&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2550&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;              &lt;span class="mi"&gt;1154&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;299&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;              &lt;span class="mi"&gt;1188&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2442&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;              &lt;span class="mi"&gt;1275&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;98&lt;/span&gt;
 &lt;span class="p"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;LEAD()&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;LEAD()&lt;/code&gt; function is similar to the &lt;code&gt;LAG()&lt;/code&gt; but it returns the value of the nth row following the current row.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Syntax:&lt;/strong&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;LEAD&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;expression&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;offset&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;&lt;br&gt;
We can write a query that gives us the sales of the next week:
- order the sales by date: &lt;code&gt;ORDER BY payment_date&lt;/code&gt;.
- get the amount 7 days after the date of the current row: &lt;code&gt;LEAD(amount, 7)&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;WITH&lt;/span&gt; &lt;span class="n"&gt;daily_sales&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="k"&gt;SELECT&lt;/span&gt; 
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="k"&gt;FROM&lt;/span&gt; 
        &lt;span class="n"&gt;payment&lt;/span&gt;
    &lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; 
        &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;payment_date&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LEAD&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;next_week_amount&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;daily_sales&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="n"&gt;payment_date&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;next_week_amount&lt;/span&gt; 
&lt;span class="c1"&gt;--------------+---------+------------------&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;73&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;917&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;87&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1188&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;92&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;2808&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1154&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;2550&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1188&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;299&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1275&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;98&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;2442&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1290&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;90&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;2701&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;76&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1219&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;09&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;2617&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;69&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;917&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;87&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;2669&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;89&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;01&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2808&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;2868&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;27&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2550&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;2586&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;79&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;299&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;2342&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;43&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2442&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;273&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;36&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2701&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;76&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;2077&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2617&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;69&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;1984&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt;
 &lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;2669&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;89&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;2227&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt;
 &lt;span class="p"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;NTH_VALUE()&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;NTH_VALUE()&lt;/code&gt; returns the value from the Nth row of a partition.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Syntax:&lt;/strong&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;NTH_VALUE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;expression&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;offset&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;expression: the target column or an expression.&lt;/li&gt;
&lt;li&gt;offset: integer that determines the row number relative to the first row of the partition.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;&lt;br&gt;
For this example, I'll simply write a query that gives the third salary from the lowest one for each department:
- Group the salaries per department: &lt;code&gt;PARTITION BY department&lt;/code&gt;.
- Order the salaries: &lt;code&gt;ORDER BY salary&lt;/code&gt;.
- Get the third salary: &lt;code&gt;NTH_VALUE(salary, 3)&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
    &lt;span class="n"&gt;employee&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NTH_VALUE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt; &lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;third_salary&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;salaries&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
     &lt;span class="n"&gt;employee&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt;    &lt;span class="n"&gt;department&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;salary&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;third_salary&lt;/span&gt; 
&lt;span class="c1"&gt;-------------------+------------------+----------+--------------&lt;/span&gt;
 &lt;span class="n"&gt;William&lt;/span&gt; &lt;span class="n"&gt;Gietz&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8300&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;             
 &lt;span class="n"&gt;Shelley&lt;/span&gt; &lt;span class="n"&gt;Higgins&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;             
 &lt;span class="n"&gt;Jennifer&lt;/span&gt; &lt;span class="n"&gt;Whalen&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Administration&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;             
 &lt;span class="n"&gt;Lex&lt;/span&gt; &lt;span class="n"&gt;De&lt;/span&gt; &lt;span class="n"&gt;Haan&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;             
 &lt;span class="n"&gt;Neena&lt;/span&gt; &lt;span class="n"&gt;Kochhar&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;             
 &lt;span class="n"&gt;Steven&lt;/span&gt; &lt;span class="n"&gt;King&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
&lt;span class="p"&gt;[...]&lt;/span&gt;
 &lt;span class="n"&gt;Irene&lt;/span&gt; &lt;span class="n"&gt;Mikkilineni&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;2700&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;             
 &lt;span class="n"&gt;Britney&lt;/span&gt; &lt;span class="n"&gt;Everett&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;3900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;             
 &lt;span class="n"&gt;Sarah&lt;/span&gt; &lt;span class="n"&gt;Bell&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Shanta&lt;/span&gt; &lt;span class="n"&gt;Vollman&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;6500&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Payam&lt;/span&gt; &lt;span class="n"&gt;Kaufling&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;7900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Matthew&lt;/span&gt; &lt;span class="n"&gt;Weiss&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
 &lt;span class="n"&gt;Adam&lt;/span&gt; &lt;span class="n"&gt;Fripp&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8200&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt; &lt;span class="k"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;When the total number of rows of a partition is less than the offset, the NTH_VALUE() function returns a Null value.&lt;/p&gt;
&lt;h2&gt;Ranking window functions&lt;/h2&gt;
&lt;h3&gt;ROW_NUMBER()&lt;/h3&gt;
&lt;p&gt;the &lt;code&gt;ROW_NUMBER()&lt;/code&gt; function returns the number of the current row within its partition.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Syntax:&lt;/strong&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;ROW_NUMBER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
        &lt;span class="n"&gt;employee&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ROW_NUMBER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;row_number&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ROW_NUMBER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt; &lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;row_number_per_department&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
        &lt;span class="n"&gt;salaries&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
     &lt;span class="n"&gt;employee&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt;    &lt;span class="n"&gt;department&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;salary&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;row_number&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;row_number_per_department&lt;/span&gt; 
&lt;span class="c1"&gt;-------------------+------------------+----------+------------+---------------------------&lt;/span&gt;
 &lt;span class="n"&gt;William&lt;/span&gt; &lt;span class="n"&gt;Gietz&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8300&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                         &lt;span class="mi"&gt;1&lt;/span&gt;
 &lt;span class="n"&gt;Shelley&lt;/span&gt; &lt;span class="n"&gt;Higgins&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                         &lt;span class="mi"&gt;2&lt;/span&gt;
 &lt;span class="n"&gt;Jennifer&lt;/span&gt; &lt;span class="n"&gt;Whalen&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Administration&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                         &lt;span class="mi"&gt;1&lt;/span&gt;
 &lt;span class="n"&gt;Lex&lt;/span&gt; &lt;span class="n"&gt;De&lt;/span&gt; &lt;span class="n"&gt;Haan&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                         &lt;span class="mi"&gt;1&lt;/span&gt;
 &lt;span class="n"&gt;Neena&lt;/span&gt; &lt;span class="n"&gt;Kochhar&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                         &lt;span class="mi"&gt;2&lt;/span&gt;
 &lt;span class="n"&gt;Steven&lt;/span&gt; &lt;span class="n"&gt;King&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                         &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="p"&gt;[...]&lt;/span&gt;
 &lt;span class="n"&gt;Shanta&lt;/span&gt; &lt;span class="n"&gt;Vollman&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;6500&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;37&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                         &lt;span class="mi"&gt;4&lt;/span&gt;
 &lt;span class="n"&gt;Payam&lt;/span&gt; &lt;span class="n"&gt;Kaufling&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;7900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;38&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                         &lt;span class="mi"&gt;5&lt;/span&gt;
 &lt;span class="n"&gt;Mattlhew&lt;/span&gt; &lt;span class="n"&gt;Weiss&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;39&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                         &lt;span class="mi"&gt;6&lt;/span&gt;
 &lt;span class="n"&gt;Adam&lt;/span&gt; &lt;span class="n"&gt;Fripp&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8200&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;40&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                         &lt;span class="mi"&gt;7&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt; &lt;span class="k"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;CUME_DIST()&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;CUME_DIST()&lt;/code&gt; function calculate the cumulative distribution of a value. This is the number of rows with values less or equal to the value of the current row divided by the total number of rows.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Syntax:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;CUME_DIST&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
    &lt;span class="n"&gt;employee&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;CUME_DIST&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;salaries&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
     &lt;span class="n"&gt;employee&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt;    &lt;span class="n"&gt;department&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;salary&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;cume_dist&lt;/span&gt; 
&lt;span class="c1"&gt;-------------------+------------------+----------+-----------&lt;/span&gt;
 &lt;span class="n"&gt;Karen&lt;/span&gt; &lt;span class="n"&gt;Colmenares&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Purchasing&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;2500&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;025&lt;/span&gt;
 &lt;span class="n"&gt;Guy&lt;/span&gt; &lt;span class="n"&gt;Himuro&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Purchasing&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;2600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;05&lt;/span&gt;
 &lt;span class="n"&gt;Irene&lt;/span&gt; &lt;span class="n"&gt;Mikkilineni&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;2700&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;075&lt;/span&gt;
 &lt;span class="n"&gt;Sigal&lt;/span&gt; &lt;span class="n"&gt;Tobias&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Purchasing&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;2800&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
 &lt;span class="n"&gt;Shelli&lt;/span&gt; &lt;span class="n"&gt;Baida&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Purchasing&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;2900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;125&lt;/span&gt;
 &lt;span class="n"&gt;Alexander&lt;/span&gt; &lt;span class="n"&gt;Khoo&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Purchasing&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;3100&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;
 &lt;span class="n"&gt;Britney&lt;/span&gt; &lt;span class="n"&gt;Everett&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;3900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;175&lt;/span&gt;
 &lt;span class="n"&gt;Sarah&lt;/span&gt; &lt;span class="n"&gt;Bell&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;
 &lt;span class="n"&gt;Diana&lt;/span&gt; &lt;span class="n"&gt;Lorentz&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;IT&lt;/span&gt;               &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4200&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;225&lt;/span&gt;
 &lt;span class="p"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In the example above, we can see that 20% of employees have a salary that is less or equal to 4000.&lt;/p&gt;
&lt;h3&gt;RANK and DENSE_RANK()&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;RANK()&lt;/code&gt; and the &lt;code&gt;DENSE_RANK()&lt;/code&gt; functions return the rank of the current row. The difference is that the &lt;code&gt;DENSE_RANK()&lt;/code&gt; function result has no gap while the &lt;code&gt;RANK()&lt;/code&gt; function will skip ranks when rows have the same values.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Syntax:&lt;/strong&gt;&lt;br&gt;
- DENSE_RANK()&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;DENSE_RANK&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;RANK()&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;RANK&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
    &lt;span class="n"&gt;employee&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;RANK&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;DENSE_RANK&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;salaries&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="d904290142f04415a22cae467840494b.png" src="images/d904290142f04415a22cae467840494b.png"&gt;&lt;/p&gt;
&lt;p&gt;In the example above, we can see that there are two employees with a salary of 4,800. Both of them get the rank 11 in the rank and the dense_rank columns. 
However, the following employee's rank is 13 in the rank column and 12 in the dense_rank columns.
The &lt;code&gt;DENSE_RANK()&lt;/code&gt; function didn't skip any value. The &lt;code&gt;RANK()&lt;/code&gt; returns the actual row number of the first row with a given value. &lt;/p&gt;
&lt;h3&gt;PERCENT_RANK()&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;PERCENT_RANK()&lt;/code&gt; function returns the relative rank of the current row:
&lt;/p&gt;
&lt;div class="math"&gt;$$\frac{rank - 1}{total\ partition\ rows -1}$$&lt;/div&gt;
&lt;p&gt;
The values range from 0 to 1.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Syntax:&lt;/strong&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;PERCENT_RANK&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
    &lt;span class="n"&gt;employee&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PERCENT_RANK&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;pct_rank&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PERCENT_RANK&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt; &lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;department_pct_rank&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;salaries&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
     &lt;span class="n"&gt;employee&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt;    &lt;span class="n"&gt;department&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;salary&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="n"&gt;pct_rank&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;department_pct_rank&lt;/span&gt; 
&lt;span class="c1"&gt;-------------------+------------------+----------+---------------------+---------------------&lt;/span&gt;
 &lt;span class="n"&gt;William&lt;/span&gt; &lt;span class="n"&gt;Gietz&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8300&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                   &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                   &lt;span class="mi"&gt;0&lt;/span&gt;
 &lt;span class="n"&gt;Shelley&lt;/span&gt; &lt;span class="n"&gt;Higgins&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;02564102564102564&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                   &lt;span class="mi"&gt;1&lt;/span&gt;
 &lt;span class="n"&gt;Jennifer&lt;/span&gt; &lt;span class="n"&gt;Whalen&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Administration&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;05128205128205128&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                   &lt;span class="mi"&gt;0&lt;/span&gt;
 &lt;span class="n"&gt;Lex&lt;/span&gt; &lt;span class="n"&gt;De&lt;/span&gt; &lt;span class="n"&gt;Haan&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;07692307692307693&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                   &lt;span class="mi"&gt;0&lt;/span&gt;
 &lt;span class="n"&gt;Neena&lt;/span&gt; &lt;span class="n"&gt;Kochhar&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;07692307692307693&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                   &lt;span class="mi"&gt;0&lt;/span&gt;
 &lt;span class="n"&gt;Steven&lt;/span&gt; &lt;span class="n"&gt;King&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1282051282051282&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                   &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="p"&gt;[...]&lt;/span&gt;
 &lt;span class="n"&gt;Irene&lt;/span&gt; &lt;span class="n"&gt;Mikkilineni&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;2700&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8461538461538461&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                   &lt;span class="mi"&gt;0&lt;/span&gt;
 &lt;span class="n"&gt;Britney&lt;/span&gt; &lt;span class="n"&gt;Everett&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;3900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8717948717948718&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;16666666666666666&lt;/span&gt;
 &lt;span class="n"&gt;Sarah&lt;/span&gt; &lt;span class="n"&gt;Bell&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8974358974358975&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3333333333333333&lt;/span&gt;
 &lt;span class="n"&gt;Shanta&lt;/span&gt; &lt;span class="n"&gt;Vollman&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;6500&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9230769230769231&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                 &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;
 &lt;span class="n"&gt;Payam&lt;/span&gt; &lt;span class="n"&gt;Kaufling&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;7900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9487179487179487&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;6666666666666666&lt;/span&gt;
 &lt;span class="n"&gt;Matthew&lt;/span&gt; &lt;span class="n"&gt;Weiss&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9743589743589743&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8333333333333334&lt;/span&gt;
 &lt;span class="n"&gt;Adam&lt;/span&gt; &lt;span class="n"&gt;Fripp&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8200&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                   &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;                   &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt; &lt;span class="k"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;NTILE()&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;NTILE()&lt;/code&gt; function breaks a resultset into a specified number of buckets. All the buckets have about the same number of rows.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Syntax:&lt;/strong&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;NTILE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;number_buckets&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
        &lt;span class="n"&gt;employee&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NTILE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;four_buckets&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NTILE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;ten_buckets&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
        &lt;span class="n"&gt;salaries&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
     &lt;span class="n"&gt;employee&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt;    &lt;span class="n"&gt;department&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;salary&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;four_buckets&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;ten_buckets&lt;/span&gt; 
&lt;span class="c1"&gt;-------------------+------------------+----------+--------------+-------------&lt;/span&gt;
 &lt;span class="n"&gt;Karen&lt;/span&gt; &lt;span class="n"&gt;Colmenares&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Purchasing&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;2500&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;1&lt;/span&gt;
 &lt;span class="n"&gt;Guy&lt;/span&gt; &lt;span class="n"&gt;Himuro&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Purchasing&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;2600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;1&lt;/span&gt;
 &lt;span class="n"&gt;Irene&lt;/span&gt; &lt;span class="n"&gt;Mikkilineni&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;2700&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;1&lt;/span&gt;
 &lt;span class="n"&gt;Sigal&lt;/span&gt; &lt;span class="n"&gt;Tobias&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Purchasing&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;2800&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;1&lt;/span&gt;
 &lt;span class="n"&gt;Shelli&lt;/span&gt; &lt;span class="n"&gt;Baida&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Purchasing&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;2900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;2&lt;/span&gt;
 &lt;span class="n"&gt;Alexander&lt;/span&gt; &lt;span class="n"&gt;Khoo&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Purchasing&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;3100&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;2&lt;/span&gt;
 &lt;span class="n"&gt;Britney&lt;/span&gt; &lt;span class="n"&gt;Everett&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;3900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;2&lt;/span&gt;
 &lt;span class="n"&gt;Sarah&lt;/span&gt; &lt;span class="n"&gt;Bell&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Shipping&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;2&lt;/span&gt;
 &lt;span class="n"&gt;Diana&lt;/span&gt; &lt;span class="n"&gt;Lorentz&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;IT&lt;/span&gt;               &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4200&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;3&lt;/span&gt;
 &lt;span class="n"&gt;Jennifer&lt;/span&gt; &lt;span class="n"&gt;Whalen&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Administration&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;3&lt;/span&gt;
 &lt;span class="n"&gt;David&lt;/span&gt; &lt;span class="n"&gt;Austin&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;IT&lt;/span&gt;               &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4800&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;3&lt;/span&gt;
 &lt;span class="n"&gt;Valli&lt;/span&gt; &lt;span class="n"&gt;Pataballa&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;IT&lt;/span&gt;               &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4800&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="p"&gt;[...]&lt;/span&gt;
 &lt;span class="n"&gt;Karen&lt;/span&gt; &lt;span class="n"&gt;Partners&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Sales&lt;/span&gt;            &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;13500&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;           &lt;span class="mi"&gt;9&lt;/span&gt;
 &lt;span class="n"&gt;John&lt;/span&gt; &lt;span class="n"&gt;Russell&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Sales&lt;/span&gt;            &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;14000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;10&lt;/span&gt;
 &lt;span class="n"&gt;Neena&lt;/span&gt; &lt;span class="n"&gt;Kochhar&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;10&lt;/span&gt;
 &lt;span class="n"&gt;Lex&lt;/span&gt; &lt;span class="n"&gt;De&lt;/span&gt; &lt;span class="n"&gt;Haan&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;10&lt;/span&gt;
 &lt;span class="n"&gt;Steven&lt;/span&gt; &lt;span class="n"&gt;King&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;            &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt; &lt;span class="k"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We have 40 employees. The &lt;code&gt;NTILE(4)&lt;/code&gt; columns returns four buckets numbered 1 to 4 and containing ten employees each. The &lt;code&gt;NTILE(10)&lt;/code&gt; column returns 10 buckets numbered 1 to 10 and containing four employees each.&lt;/p&gt;
&lt;h2&gt;Aggregate window functions&lt;/h2&gt;
&lt;p&gt;Those are the usual aggregate functions we would use with a &lt;code&gt;GROUP BY&lt;/code&gt; clause:
- AVG(): average.
- SUM(): sum.
- MIN(): minimum value. 
- MAX(): maximum value.
- COUNT(): rows count.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
    &lt;span class="n"&gt;employee&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;AVG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;dpt_avg_salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;dpt_total_salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;MIN&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;dpt_min_salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;MAX&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;dpt_max_salary&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;COUNT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;OVER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="n"&gt;department&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;dpt_count&lt;/span&gt;    
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;salaries&lt;/span&gt;
&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; 
    &lt;span class="n"&gt;department&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
     &lt;span class="n"&gt;employee&lt;/span&gt;      &lt;span class="o"&gt;|&lt;/span&gt;    &lt;span class="n"&gt;department&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;salary&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="n"&gt;dpt_avg_salary&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;dpt_total_salary&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;dpt_min_salary&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;dpt_max_salary&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;dpt_count&lt;/span&gt; 
&lt;span class="c1"&gt;-------------------+------------------+----------+------------------------+------------------+----------------+----------------+-----------&lt;/span&gt;
 &lt;span class="n"&gt;William&lt;/span&gt; &lt;span class="n"&gt;Gietz&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8300&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;10150&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0000000000000000&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;20300&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;8300&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;2&lt;/span&gt;
 &lt;span class="n"&gt;Shelley&lt;/span&gt; &lt;span class="n"&gt;Higgins&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Accounting&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;10150&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0000000000000000&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;20300&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;8300&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;2&lt;/span&gt;
 &lt;span class="n"&gt;Jennifer&lt;/span&gt; &lt;span class="n"&gt;Whalen&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Administration&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0000000000000000&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;          &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;4400&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;1&lt;/span&gt;
 &lt;span class="n"&gt;Lex&lt;/span&gt; &lt;span class="n"&gt;De&lt;/span&gt; &lt;span class="n"&gt;Haan&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;19333&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;333333333333&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;58000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;3&lt;/span&gt;
 &lt;span class="n"&gt;Neena&lt;/span&gt; &lt;span class="n"&gt;Kochhar&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;19333&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;333333333333&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;58000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;3&lt;/span&gt;
 &lt;span class="n"&gt;Steven&lt;/span&gt; &lt;span class="n"&gt;King&lt;/span&gt;       &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Executive&lt;/span&gt;        &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;     &lt;span class="mi"&gt;19333&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;333333333333&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;58000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;17000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;24000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;3&lt;/span&gt;
 &lt;span class="n"&gt;Luis&lt;/span&gt; &lt;span class="n"&gt;Popp&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;6900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0000000000000000&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;51600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;6900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;6&lt;/span&gt;
 &lt;span class="n"&gt;Ismael&lt;/span&gt; &lt;span class="n"&gt;Sciarra&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;7700&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0000000000000000&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;51600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;6900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;6&lt;/span&gt;
 &lt;span class="n"&gt;Jose&lt;/span&gt; &lt;span class="n"&gt;Manuel&lt;/span&gt; &lt;span class="n"&gt;Urman&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;7800&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0000000000000000&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;51600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;6900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;6&lt;/span&gt;
 &lt;span class="n"&gt;John&lt;/span&gt; &lt;span class="n"&gt;Chen&lt;/span&gt;         &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8200&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0000000000000000&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;51600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;6900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;6&lt;/span&gt;
 &lt;span class="n"&gt;Daniel&lt;/span&gt; &lt;span class="n"&gt;Faviet&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;9000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0000000000000000&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;51600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;6900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;6&lt;/span&gt;
 &lt;span class="n"&gt;Nancy&lt;/span&gt; &lt;span class="n"&gt;Greenberg&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;Finance&lt;/span&gt;          &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="mi"&gt;8600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0000000000000000&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;51600&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;        &lt;span class="mi"&gt;6900&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;       &lt;span class="mi"&gt;12000&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;         &lt;span class="mi"&gt;6&lt;/span&gt;
       &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;Examples&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://guillaume-martin.github.io/sql-moving-average"&gt;How to calculate a moving average in SQL&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://guillaume-martin.github.io/sql-running-total"&gt;How to calculate a running total in SQL&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://guillaume-martin.github.io/sql-running-total-percent"&gt;How to calculate a running total percentage in SQL&lt;/a&gt;&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="Database"></category><category term="database"></category><category term="sql"></category></entry><entry><title>Creating Pivot Tables in PostgreSQL</title><link href="https://guillaume-martin.github.io/postgresql-pivot-tables.html" rel="alternate"></link><published>2020-11-02T12:20:00+08:00</published><updated>2020-11-02T12:30:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2020-11-02:/postgresql-pivot-tables.html</id><summary type="html">&lt;p&gt;Easily create pivot tables in PostgreSQL using \crosstabview.&lt;/p&gt;</summary><content type="html">&lt;h1&gt;Introduction&lt;/h1&gt;
&lt;p&gt;In this article, I will explain how to create pivot tables in PostgreSQL using the &lt;code&gt;\crosstabview&lt;/code&gt; meta-command introduced in version 9.6.  &lt;/p&gt;
&lt;h1&gt;Setup&lt;/h1&gt;
&lt;p&gt;I will be using the dvdrentals sample database. In this part, I'll show how to setup the database. If you already have it setup or do not wish to install it, you can skip this part.&lt;/p&gt;
&lt;p&gt;First, I create the database:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ su - postgres
$ psql
psql (11.7 (Debian 11.7-0+deb10u1))
Type &amp;quot;help&amp;quot; for help.

postgres=# CREATE DATABASE dvdrental;
CREATE DATABASE
postgres=# \q
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then I download the dump file from postgresqltutorial.com and I restore the database using the &lt;code&gt;pg_restore&lt;/code&gt; command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ wget https://sp.postgresqltutorial.com/wp-content/uploads/2019/05/dvdrental.zip
$ unzip dvdrental.zip
$ pg_restore -U postgres -d dvdrental dvdrental.tar
$ psql -U postgres -d dvdrental
psql (11.7 (Debian 11.7-0+deb10u1))
Type &amp;quot;help&amp;quot; for help.

dvdrental=# \dt
             List of relations
 Schema |     Name      | Type  |  Owner
--------+---------------+-------+----------
 public | actor         | table | postgres
 public | address       | table | postgres
 public | category      | table | postgres
 public | city          | table | postgres
 public | country       | table | postgres
 public | customer      | table | postgres
 public | film          | table | postgres
 public | film_actor    | table | postgres
 public | film_category | table | postgres
 public | inventory     | table | postgres
 public | language      | table | postgres
 public | payment       | table | postgres
 public | rental        | table | postgres
 public | staff         | table | postgres
 public | store         | table | postgres
(15 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;Pivot tables&lt;/h1&gt;
&lt;p&gt;In this example, I want to get the total amount of sales per month for each
employee.  &lt;/p&gt;
&lt;p&gt;I want the result to look like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;|          | Employee 1 | ... | Employee n |
|----------|------------|-----|------------|
| January  |            |     |            | 
| February |            |     |            | 
| ...      |            |     |            |
| December |            |     |            |
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Each cell of the table will contain the total amount of sales for the employee on that mounth.&lt;/p&gt;
&lt;h2&gt;Explore the database&lt;/h2&gt;
&lt;p&gt;Here is an extract of the database ERD that shows the two tables we are interested in:&lt;br&gt;
&lt;img alt="ERD samples" src="/images/dvdrental-erd-sample.png"&gt;&lt;/p&gt;
&lt;p&gt;The sales are recorded in the payment table.&lt;/p&gt;
&lt;p&gt;For each payment, we have a &lt;code&gt;staff_id&lt;/code&gt; and  a &lt;code&gt;payment_date&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I can join the two tables on the &lt;code&gt;staff_id&lt;/code&gt; column.&lt;/p&gt;
&lt;h2&gt;Extract sales per staff&lt;/h2&gt;
&lt;p&gt;First, we need to create a query that will extract the three attributes I want in my table: the month, the employee's name and the total amount.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Month:&lt;/strong&gt;&lt;br&gt;
We have a datetime value stored in &lt;em&gt;payment.payment_date&lt;/em&gt;.
I'd like to have a month in letters to make it easier to read.
I'll use the &lt;code&gt;to_char()&lt;/code&gt; to convert the timestamp into a string. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;to_char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;payment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Month&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Employee:&lt;/strong&gt;&lt;br&gt;
I will concatenate the first and last names to get a full name. This will be our columns headers.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;staff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;first_name&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;staff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;last_name&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;staff_name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Total amount:&lt;/strong&gt;&lt;br&gt;
The total amount is simply the sum of all the amounts from the payment table grouped by staff and month.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;payment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;My query is as follow:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;to_char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;payment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Month&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;staff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;first_name&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;staff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;last_name&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;staff_name&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;payment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;payment&lt;/span&gt;
        &lt;span class="k"&gt;LEFT&lt;/span&gt; &lt;span class="k"&gt;JOIN&lt;/span&gt; &lt;span class="n"&gt;staff&lt;/span&gt;
            &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="n"&gt;payment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;staff_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;staff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;staff_id&lt;/span&gt;
&lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt;
    &lt;span class="n"&gt;staff_name&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt; 
    &lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="n"&gt;date_part&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;month&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;payment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; 
    &lt;span class="n"&gt;staff_name&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;date_part&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;month&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;payment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And the output looks like this&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;   month   |  staff_name  |  total
-----------+--------------+----------
 February  | Jon Stephens |  4191.00
 March     | Jon Stephens | 12109.73
 April     | Jon Stephens | 14479.10
 May       | Jon Stephens |   280.09
 February  | Mike Hillyer |  4160.84
 March     | Mike Hillyer | 11776.83
 April     | Mike Hillyer | 14080.36
 May       | Mike Hillyer |   234.09
(8 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Generate the pivot table&lt;/h2&gt;
&lt;p&gt;Now, to generate the pivot table, I just have to append the &lt;code&gt;crosstabview&lt;/code&gt; command to my query.&lt;br&gt;
The order of the selected columns in the query is important as it will determine which is used for rows, columns or values (cells).&lt;br&gt;
The order should be as follow:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
    &lt;span class="k"&gt;rows&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;columns&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;values&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So the final query is like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;to_char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;payment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Month&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;staff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;first_name&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;staff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;last_name&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;staff_name&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;payment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;payment&lt;/span&gt;
        &lt;span class="k"&gt;LEFT&lt;/span&gt; &lt;span class="k"&gt;JOIN&lt;/span&gt; &lt;span class="n"&gt;staff&lt;/span&gt;
            &lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="n"&gt;payment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;staff_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;staff&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;staff_id&lt;/span&gt;
&lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt;
    &lt;span class="n"&gt;staff_name&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;month&lt;/span&gt; 
    &lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="n"&gt;date_part&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;month&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;payment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;ORDER&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; 
    &lt;span class="n"&gt;staff_name&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;date_part&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;month&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;payment&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;payment_date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;crosstabview&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It outputs the pivot table I wanted:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;   month   | Jon Stephens | Mike Hillyer
-----------+--------------+--------------
 February  |      4191.00 |      4160.84
 March     |     12109.73 |     11776.83
 April     |     14479.10 |     14080.36
 May       |       280.09 |       234.09
(4 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Database"></category><category term="sql"></category><category term="postgresql"></category><category term="database"></category></entry><entry><title>PostgreSQL database backup in Linux</title><link href="https://guillaume-martin.github.io/postgresql-backup.html" rel="alternate"></link><published>2019-12-03T00:00:00+08:00</published><updated>2020-02-11T02:46:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2019-12-03:/postgresql-backup.html</id><summary type="html">&lt;p&gt;How to backup a PostgreSQL database and automate the process.&lt;/p&gt;</summary><content type="html">&lt;p&gt;In this article, we'll see how to setup an automatic backup of a PostgreSQL database from a linux machine.  &lt;/p&gt;
&lt;p&gt;First, we'll do some setup. We are going to install the required tools and create a demo database we can use to practice.&lt;br&gt;
Next, we will have a look at the &lt;code&gt;pg_dump&lt;/code&gt;, &lt;code&gt;pg_dumpall&lt;/code&gt; and &lt;code&gt;pg_restore&lt;/code&gt; commands that let us backup and restore our PostgreSQL database.&lt;br&gt;
Then, we will learn how to automate the backup process with a bash script and a cron job.&lt;br&gt;
Finally, We will setup an email notification to monitor whether the backup is done correctly and be alerted if there has been any problem during the process.  &lt;/p&gt;
&lt;h1&gt;Setup&lt;/h1&gt;
&lt;p&gt;Before starting, we need to install the tools we are going to use to backup and restore our database. We are also going to create a small demo database we will use in this demo.&lt;/p&gt;
&lt;h2&gt;Postgresql client&lt;/h2&gt;
&lt;p&gt;The postgresql client provides the commands we need to backup and restore databases.
To test whether the client is installed on your system, use the &lt;code&gt;psql --version&lt;/code&gt; command. You should get this output:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ psql --version
psql &lt;span class="o"&gt;(&lt;/span&gt;PostgreSQL&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;.10 &lt;span class="o"&gt;(&lt;/span&gt;Ubuntu &lt;span class="m"&gt;10&lt;/span&gt;.10-0ubuntu0.18.04.1&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If the postgresql client is not installed, you should get an output that looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ psql --version
bash: /usr/bin/psql: No such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To install in Debian based systems:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ sudo apt install postgresql-client
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The command should install the &lt;code&gt;postgresql-client-common&lt;/code&gt; and &lt;code&gt;postgresql-client-&amp;lt;version&amp;gt;&lt;/code&gt;. At the time of writing, version is 10.&lt;br&gt;
Once the client is installed, you can start using the &lt;code&gt;psql&lt;/code&gt; command.&lt;/p&gt;
&lt;p&gt;For other systems, see this &lt;a href="https://www.compose.com/articles/postgresql-tips-installing-the-postgresql-client/"&gt;article&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Create a demo database&lt;/h2&gt;
&lt;p&gt;We are now going to create a database that we'll use in the following example.&lt;/p&gt;
&lt;p&gt;We have three ways to interact with our PostgreSQL server:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Enter the server's command line where we can directly type SQL instructions.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ psql -h &amp;lt;host_ip&amp;gt; -p &amp;lt;port&amp;gt; -U &amp;lt;username&amp;gt; -d &amp;lt;database_name&amp;gt;
&lt;span class="nv"&gt;username&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;ol&gt;
&lt;li&gt;Send an SQL command using the &lt;code&gt;-c&lt;/code&gt; option&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ psql -h &amp;lt;host_ip&amp;gt; -p &amp;lt;port&amp;gt; -U &amp;lt;username&amp;gt; -d &amp;lt;database&amp;gt; -c &lt;span class="s1"&gt;&amp;#39;SELECT * FROM table&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;ol&gt;
&lt;li&gt;Run an SQL script from a file using the &lt;code&gt;-f&lt;/code&gt; command&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ psql -h &amp;lt;host_ip&amp;gt; -p &amp;lt;port&amp;gt; -U &amp;lt;username&amp;gt; -d &amp;lt;database&amp;gt; -f myscript.sql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I will be working on a local PostgreSQL server, that's why I skip the &lt;code&gt;-h&lt;/code&gt; option. By default, the client connects to &lt;code&gt;localhost&lt;/code&gt;. If your PostgreSQL server is on a remote machine, you need to add the &lt;code&gt;-h &amp;lt;host_ip&amp;gt;&lt;/code&gt; option to the commands that follows. The &lt;code&gt;-p&lt;/code&gt; command that sets the port can be skipped if the PostgreSQL server is set to listen on the default port (5432).&lt;/p&gt;
&lt;p&gt;First, create the demo database:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ psql -U postgres -c &lt;span class="s1"&gt;&amp;#39;CREATE DATABASE my_database;&amp;#39;&lt;/span&gt;
CREATE DATABASE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then, we are going to write a script that will create a table in the &lt;code&gt;my_database&lt;/code&gt; database and fill it with some data. We will execute the script using the &lt;code&gt;psql&lt;/code&gt; command.&lt;/p&gt;
&lt;p&gt;First, create the script.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ vim create_database.sql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- Create a users table&lt;/span&gt;
&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;users&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="nb"&gt;serial&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;username&lt;/span&gt; &lt;span class="nb"&gt;varchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;UNIQUE&lt;/span&gt; &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;email&lt;/span&gt; &lt;span class="nb"&gt;varchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;UNIQUE&lt;/span&gt; &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="c1"&gt;-- Insert some data in the table&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; 
    &lt;span class="n"&gt;users&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;email&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;VALUES&lt;/span&gt;
    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Alice&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;alice@example.com&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Bob&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;bob@acme.com&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Charlie&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;charlie@some_domain.com&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then, we execute the script:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ psql -U postgres -f create_database.sql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can control that all is set:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ psql -U postgres -d my_database -c &lt;span class="s1"&gt;&amp;#39;SELECT * FROM users;&amp;#39;&lt;/span&gt;
 id &lt;span class="p"&gt;|&lt;/span&gt; username &lt;span class="p"&gt;|&lt;/span&gt;          email
----+----------+-------------------------
  &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; Alice    &lt;span class="p"&gt;|&lt;/span&gt; alice@example.com
  &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; Bob      &lt;span class="p"&gt;|&lt;/span&gt; bob@acme.com
  &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; Charlie  &lt;span class="p"&gt;|&lt;/span&gt; charlie@some_domain.com
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We're all set! We can now learn how to backup our database.&lt;/p&gt;
&lt;h1&gt;pg_dump, pg_dumpall and pg_restore&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;pg_dump&lt;/code&gt; command lets us extract a database into a backup file. The &lt;code&gt;pg_dumpall&lt;/code&gt; extracts an entire cluster.&lt;br&gt;
The &lt;code&gt;pg_restore&lt;/code&gt; reloads an archive file into a database.&lt;/p&gt;
&lt;p&gt;For example, if I want to backup the &lt;em&gt;my_database&lt;/em&gt; database, I would run the following commmand:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ pg_dump my_database &amp;gt; backup.sql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I will then have a local &lt;code&gt;backup.sql&lt;/code&gt; file that contains all the SQL instructions needed to create my database objects and fill it with the backed up data.&lt;/p&gt;
&lt;h2&gt;pg_dump options&lt;/h2&gt;
&lt;p&gt;Here are some basic options we can use with the &lt;code&gt;pg_dump&lt;/code&gt; command.  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-U&lt;/code&gt;: specify which user will connect to the PostgreSQL server.  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;-w&lt;/code&gt; or &lt;code&gt;--password&lt;/code&gt;: will force pg_dump to prompt for a password  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;-F&lt;/code&gt;: specify the format of the output file  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;p&lt;/code&gt;: plain-text SQL (default)  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;c&lt;/code&gt;: custom-format archive  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;d&lt;/code&gt;: directory-format archive. Will create a directory with one file per table.  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;t&lt;/code&gt;: tar-format archive.    &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;custom&lt;/strong&gt;, &lt;strong&gt;directory&lt;/strong&gt; and &lt;strong&gt;tar&lt;/strong&gt; formats are suitable for input into &lt;code&gt;pg_restore&lt;/code&gt; while the plain-text SQL file has to be executed with the &lt;em&gt;pslq&lt;/em&gt; command as we will see in the next part on restoring databases.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-a&lt;/code&gt;: dumps only the data, not the schema.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-s&lt;/code&gt;: dumps only the schema, not the data.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-n &amp;lt;schema&amp;gt;&lt;/code&gt;: will dump only the specified schema. To dump multiple schema, type &lt;code&gt;-n schema_1 -n schema_2&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Dumping a remote database&lt;/h2&gt;
&lt;p&gt;If the database is stored on a remote server, we can specify the host and the user as options.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ pg_dump -h &amp;lt;host_ip&amp;gt; -U &amp;lt;username&amp;gt; my_database &amp;gt; my_database_backup.sql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We will be prompted to enter the password after hitting enter.&lt;/p&gt;
&lt;h2&gt;Restoring a database from a backup file&lt;/h2&gt;
&lt;h3&gt;Restoring from plaintext backup.&lt;/h3&gt;
&lt;p&gt;If you used the default settings to backup your database, you now have a plain-text &lt;code&gt;.sql&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;We are now going to restore &lt;code&gt;my_database&lt;/code&gt; in a new database called &lt;code&gt;new_db&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ psql -U postgres -c &lt;span class="s1"&gt;&amp;#39;CREATE DATABASE new_db&amp;#39;&lt;/span&gt;
CREATE DATABASE
psql -U postgres -d new_db &amp;lt; my_database_backup.sql
SET
SET
SET
SET
SET
 set_config 
------------

&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; row&lt;span class="o"&gt;)&lt;/span&gt;

SET
SET
SET
SET
CREATE EXTENSION
COMMENT
SET
SET
CREATE TABLE
ALTER TABLE
CREATE SEQUENCE
ALTER TABLE
ALTER SEQUENCE
ALTER TABLE
COPY &lt;span class="m"&gt;3&lt;/span&gt;
 setval 
--------
      &lt;span class="m"&gt;3&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; row&lt;span class="o"&gt;)&lt;/span&gt;

ALTER TABLE
ALTER TABLE
ALTER TABLE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We control that the data is there:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ psql -U postgres -d new_db -c &lt;span class="s1"&gt;&amp;#39;SELECT * FROM users;&amp;#39;&lt;/span&gt;
 id &lt;span class="p"&gt;|&lt;/span&gt; username &lt;span class="p"&gt;|&lt;/span&gt;          email          
----+----------+-------------------------
  &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; Alice    &lt;span class="p"&gt;|&lt;/span&gt; alice@example.com
  &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; Bob      &lt;span class="p"&gt;|&lt;/span&gt; bob@acme.com
  &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; Charlie  &lt;span class="p"&gt;|&lt;/span&gt; charlie@some_domain.com
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here, we used the &lt;code&gt;psql&lt;/code&gt; command to restore the database instead of the &lt;code&gt;pg_restore&lt;/code&gt; one. When creating a backup without specifying the backup format, the format option defaults to plain-text SQL (&lt;code&gt;-F p&lt;/code&gt;). This will generate a plain-text file with SQL commands. &lt;code&gt;pg_restore&lt;/code&gt; cannot process those files.&lt;br&gt;
To get a file that can be processed by &lt;code&gt;pg_restore&lt;/code&gt;, we have to save our backup using the &lt;code&gt;-F&lt;/code&gt; option with the &lt;code&gt;c&lt;/code&gt;, &lt;code&gt;d&lt;/code&gt;, or &lt;code&gt;t&lt;/code&gt; values.&lt;/p&gt;
&lt;h3&gt;Restoring with &lt;code&gt;pg_restore&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;When the backup was done with the &lt;em&gt;custom&lt;/em&gt;, &lt;em&gt;directory&lt;/em&gt; or &lt;em&gt;archive&lt;/em&gt; formats, you will have to use the &lt;code&gt;pg_restore&lt;/code&gt; command to restore your database.&lt;/p&gt;
&lt;h4&gt;pg_restore options&lt;/h4&gt;
&lt;p&gt;Here are some basic options that can be used with &lt;code&gt;pg_restore&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-a&lt;/code&gt;: restore only the data.  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;-c&lt;/code&gt;: drop the database objects before recreating them.  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;-C&lt;/code&gt;: creates the database before restoring into it.  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;-d dbname&lt;/code&gt;: connects to the database dbname and restore into it.  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;-t table&lt;/code&gt;: restore only the named table.  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Backup the databases&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ pg_dump -U postgres -F t my_database &amp;gt; my_database_backup.tar
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To demonstrate the command, we are going to delete a record from the users table, restore from the backup file and control that the record is back.&lt;/p&gt;
&lt;p&gt;Delete the record:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ psql -U postgres -d my_database -c &lt;span class="s1"&gt;&amp;#39;DELETE FROM users WHERE id = 2;&amp;#39;&lt;/span&gt;
DELETE &lt;span class="m"&gt;1&lt;/span&gt;
$ psql -U postgres -d my_database -c &lt;span class="s1"&gt;&amp;#39;SELECT * FROM users;&amp;#39;&lt;/span&gt;
 id &lt;span class="p"&gt;|&lt;/span&gt; username &lt;span class="p"&gt;|&lt;/span&gt;          email
----+----------+-------------------------
  &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; Alice    &lt;span class="p"&gt;|&lt;/span&gt; alice@example.com
  &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; Charlie  &lt;span class="p"&gt;|&lt;/span&gt; charlie@some_domain.com
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Restore the data from the backup file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ pg_restore -U postgres -d my_database -c my_database_backup.tar
$ psql -U postgres -d my_database -c &lt;span class="s1"&gt;&amp;#39;SELECT * FROM users;&amp;#39;&lt;/span&gt;
 id &lt;span class="p"&gt;|&lt;/span&gt; username &lt;span class="p"&gt;|&lt;/span&gt;          email
----+----------+-------------------------
  &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; Alice    &lt;span class="p"&gt;|&lt;/span&gt; alice@example.com
  &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; Bob      &lt;span class="p"&gt;|&lt;/span&gt; bob@acme.com
  &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; Charlie  &lt;span class="p"&gt;|&lt;/span&gt; charlie@some_domain.com
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; rows&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;Automate this!&lt;/h1&gt;
&lt;p&gt;So far, we have seen how to backup our database manually. But a useful backup should be done on a regular basis and we don't want to have to do it manually.
In the last part of this post, I am going to explain how to automate the process. First, we are going to write a script that will backup the database. Then, we will create a &lt;code&gt;.pgpass&lt;/code&gt; file that will allow connections to the database without having to type the password. Finaly, we will create a cron job that will run our backup script at a specific time.&lt;/p&gt;
&lt;h2&gt;Writing a bash script&lt;/h2&gt;
&lt;p&gt;Some scripts for automated backup on linux have been made available &lt;a href="https://wiki.postgresql.org/wiki/Automated_Backup_on_Linux"&gt;here&lt;/a&gt; by the PostgreSQL community.&lt;br&gt;
We are however going to write a simpler script following their example. The script will backup one database defined in the configuration file. We want to have a rotated backup that will run daily but will only keep the last n days of backups.&lt;/p&gt;
&lt;h3&gt;Configuration file&lt;/h3&gt;
&lt;p&gt;First we create a &lt;code&gt;pg_backup.config&lt;/code&gt; file where we can set up what and how we want to backup.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;############################&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;POSTGRESQL&lt;/span&gt; &lt;span class="n"&gt;BACKUP&lt;/span&gt; &lt;span class="n"&gt;CONFIG&lt;/span&gt; &lt;span class="o"&gt;#&lt;/span&gt;
&lt;span class="o"&gt;############################&lt;/span&gt;

&lt;span class="o"&gt;###&lt;/span&gt; &lt;span class="k"&gt;CONNECTION&lt;/span&gt; &lt;span class="n"&gt;SETTINGS&lt;/span&gt; &lt;span class="o"&gt;####&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;The&lt;/span&gt; &lt;span class="n"&gt;hostname&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="k"&gt;database&lt;/span&gt; &lt;span class="k"&gt;host&lt;/span&gt;
&lt;span class="n"&gt;HOSTNAME&lt;/span&gt;&lt;span class="o"&gt;=&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;host_ip&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;The&lt;/span&gt; &lt;span class="k"&gt;user&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="n"&gt;used&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="k"&gt;connect&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="k"&gt;database&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="n"&gt;Will&lt;/span&gt; &lt;span class="k"&gt;default&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;postgres&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;USERNAME&lt;/span&gt;&lt;span class="o"&gt;=&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;user_name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;


&lt;span class="o"&gt;###&lt;/span&gt; &lt;span class="n"&gt;BACKUP&lt;/span&gt; &lt;span class="n"&gt;SETTINGS&lt;/span&gt; &lt;span class="o"&gt;###&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;Name&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="k"&gt;database&lt;/span&gt; &lt;span class="n"&gt;we&lt;/span&gt; &lt;span class="n"&gt;want&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;backup&lt;/span&gt;
&lt;span class="k"&gt;DATABASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;my_database&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;The&lt;/span&gt; &lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;backup&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="n"&gt;will&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;saved&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="n"&gt;Will&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;created&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="n"&gt;doesn&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;exist&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;Must&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;writable&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="k"&gt;user&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;script&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;running&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt;
&lt;span class="n"&gt;BACKUP_DIR&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;backups&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="k"&gt;Set&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;yes&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;produce&lt;/span&gt; &lt;span class="n"&gt;custom&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt; &lt;span class="n"&gt;backup&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt;
&lt;span class="n"&gt;ENABLE_TAR_BACKUPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;yes&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="k"&gt;Set&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;yes&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;produce&lt;/span&gt; &lt;span class="n"&gt;gziped&lt;/span&gt; &lt;span class="n"&gt;plain&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nb"&gt;text&lt;/span&gt; &lt;span class="n"&gt;format&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt;
&lt;span class="n"&gt;ENABLE_PLAIN_BACKUPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;yes&lt;/span&gt;


&lt;span class="o"&gt;###&lt;/span&gt; &lt;span class="n"&gt;SETTINGS&lt;/span&gt; &lt;span class="k"&gt;FOR&lt;/span&gt; &lt;span class="n"&gt;ROTATED&lt;/span&gt; &lt;span class="n"&gt;BACKUPS&lt;/span&gt; &lt;span class="o"&gt;###&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;Which&lt;/span&gt; &lt;span class="k"&gt;day&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;take&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;weekly&lt;/span&gt; &lt;span class="n"&gt;backup&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Monday&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Sunday&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;DAY_OF_WEEK_TO_KEEP&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="nb"&gt;Number&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="n"&gt;days&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;keep&lt;/span&gt; &lt;span class="n"&gt;daily&lt;/span&gt; &lt;span class="n"&gt;backups&lt;/span&gt;
&lt;span class="n"&gt;DAYS_TO_KEEP&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;How&lt;/span&gt; &lt;span class="n"&gt;many&lt;/span&gt; &lt;span class="n"&gt;week&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;keep&lt;/span&gt; &lt;span class="n"&gt;weekly&lt;/span&gt; &lt;span class="n"&gt;backups&lt;/span&gt;
&lt;span class="n"&gt;WEEKS_TO_KEEP&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Backup script&lt;/h3&gt;
&lt;p&gt;First, we need to get the path to the configuration file that will be passed with the &lt;code&gt;-c&lt;/code&gt; option when calling our script.&lt;/p&gt;
&lt;h4&gt;Load the configuration file&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Get the path to the configuration file from the option passed&lt;/span&gt;
&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$#&lt;/span&gt; -gt &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
        &lt;span class="c1"&gt;# Look at the value of the first argument. It should be the option &amp;quot;-c&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nv"&gt;$1&lt;/span&gt; in 
                -c&lt;span class="o"&gt;)&lt;/span&gt;
                        &lt;span class="c1"&gt;# If the option passed is -c, then we set the value that follows&lt;/span&gt;
                        &lt;span class="c1"&gt;# as the variable that stores the path to the configuration file.&lt;/span&gt;
                        &lt;span class="nv"&gt;CONFIG_FILE_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;
                        &lt;span class="nb"&gt;shift&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;
                        &lt;span class="p"&gt;;;&lt;/span&gt;
                *&lt;span class="o"&gt;)&lt;/span&gt;
                        &lt;span class="c1"&gt;# Any other option will raise an error and stop the script&lt;/span&gt;
                        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Unknown option &lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;
                        &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;
                        &lt;span class="p"&gt;;;&lt;/span&gt;
        &lt;span class="k"&gt;esac&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;

&lt;span class="c1"&gt;# Load the configuration&lt;/span&gt;
&lt;span class="nb"&gt;source&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;CONFIG_FILE_PATH&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then we create a function called &lt;code&gt;backup_database()&lt;/code&gt; that will actually do the backup.
It will first create a directory where the backup files will be stores:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# The SUFFIX is set with the value of the first parameter passed to the function&lt;/span&gt;
&lt;span class="c1"&gt;# it can be &amp;quot;-daily&amp;quot;, &amp;quot;-weekly&amp;quot; or &amp;quot;-monthly&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SUFFIX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;

&lt;span class="c1"&gt;# Build the name of the directory from the base name set in the configuration file&lt;/span&gt;
&lt;span class="c1"&gt;# with the current date and the suffix&lt;/span&gt;
&lt;span class="nv"&gt;FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`date +\%Y-\%m-\%d`&lt;/span&gt;&lt;span class="nv"&gt;$SUFFIX&lt;/span&gt;&lt;span class="s2"&gt;/&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# Try to create the directory. If it fails, show an error message and stop the script.&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; ! mkdir -p &lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Cannot create backup directory in &lt;/span&gt;&lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then we check the values of the different backup types and run the &lt;code&gt;pg_dump&lt;/code&gt; for each one set to yes. We'll look at the backup in tar format.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Control whether the option is set to &amp;quot;yes&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$ENABLE_TAR_BACKUPS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;yes&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; 
&lt;span class="k"&gt;then&lt;/span&gt; 
        &lt;span class="c1"&gt;# Try to run the pg_dump command with the -Ft option&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; ! pg_dump -h &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$HOSTNAME&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -U &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$USERNAME&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -Ft &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -f &lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;.tar.in_progress&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
                &lt;span class="c1"&gt;# If the attempt failed, show an error message and continue&lt;/span&gt;
                &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Failed to produce custom backup of the &lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt; database&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;
                &lt;span class="c1"&gt;# If the backup succeed, remove the &amp;quot;.in_progress&amp;quot; extension from the file name.&lt;/span&gt;
                mv &lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;.tar.in_progress &lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;.tar
        &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;backup_database()&lt;/code&gt; function will be called for daily, weekly and monthly backups. The Monthly backups are made on the first day of the month.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Get what day of the month is the current day.&lt;/span&gt;
DAY_OF &lt;span class="nv"&gt;MONTH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;date +%d&lt;span class="sb"&gt;`&lt;/span&gt;

&lt;span class="c1"&gt;# Control if today is the first day of the month.&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DAY_OF_MONTH&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -eq &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="c1"&gt;# Delete expired monthly backups&lt;/span&gt;
        find &lt;span class="nv"&gt;$BACKUP_DIR&lt;/span&gt; -maxdepth &lt;span class="m"&gt;1&lt;/span&gt; -name &lt;span class="s2"&gt;&amp;quot;*-monthly&amp;quot;&lt;/span&gt; -exec rm -rf &lt;span class="s1"&gt;&amp;#39;{}&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;;&amp;#39;&lt;/span&gt;

        &lt;span class="c1"&gt;# Create a new monthly backup&lt;/span&gt;
        backup_database &lt;span class="s2"&gt;&amp;quot;-monthly&amp;quot;&lt;/span&gt;

        &lt;span class="c1"&gt;# Stop the script&lt;/span&gt;
        &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Let's put all of this together to get our backup script. We can add some &lt;code&gt;echo&lt;/code&gt; statements to log what the script is doing.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="c1"&gt;## LOAD CONFIGURATION ##&lt;/span&gt;

&lt;span class="c1"&gt;# get the path to the configuration file from the option passed&lt;/span&gt;
&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$#&lt;/span&gt; -gt &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
        &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nv"&gt;$1&lt;/span&gt; in 
                -c&lt;span class="o"&gt;)&lt;/span&gt;
                        &lt;span class="nv"&gt;CONFIG_FILE_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;
                        &lt;span class="nb"&gt;shift&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;
                        &lt;span class="p"&gt;;;&lt;/span&gt;
                *&lt;span class="o"&gt;)&lt;/span&gt;
                        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Unknown option &lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;
                        &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;
                        &lt;span class="p"&gt;;;&lt;/span&gt;
        &lt;span class="k"&gt;esac&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;

&lt;span class="c1"&gt;# load configurations&lt;/span&gt;
&lt;span class="nb"&gt;source&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;CONFIG_FILE_PATH&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;## DATABASE BACKUP ##&lt;/span&gt;

&lt;span class="k"&gt;function&lt;/span&gt; backup_database&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;# Create the directory where the backup file will be saved&lt;/span&gt;
        &lt;span class="nv"&gt;SUFFIX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;
        &lt;span class="nv"&gt;FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`date +\%Y-\%m-\%d`&lt;/span&gt;&lt;span class="nv"&gt;$SUFFIX&lt;/span&gt;&lt;span class="s2"&gt;/&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;Creating the backup directory in &lt;/span&gt;&lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; ! mkdir -p &lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
                &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Cannot create backup directory in &lt;/span&gt;&lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
                &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;fi&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$ENABLE_TAR_BACKUPS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;yes&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; 
        &lt;span class="k"&gt;then&lt;/span&gt;
                &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Starting tar format backup of the &lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt; database&amp;quot;&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; ! pg_dump -h &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$HOSTNAME&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -U &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$USERNAME&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -Ft &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -f &lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;.tar.in_progress&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
                        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Failed to produce custom backup of the &lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt; database&amp;quot;&lt;/span&gt;
                &lt;span class="k"&gt;else&lt;/span&gt;
                        mv &lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;.tar.in_progress &lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;.tar
                &lt;span class="k"&gt;fi&lt;/span&gt;
        &lt;span class="k"&gt;fi&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$ENABLE_PLAIN_BACKUPS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;yes&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
        &lt;span class="k"&gt;then&lt;/span&gt;
                &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Starting plain format backup of the &lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt; database&amp;quot;&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; ! pg_dump -h &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$HOSTNAME&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -U &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$USERNAME&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -Fc &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gzip &amp;gt; &lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;.sql.gz.in_progress&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
                        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Failed to produce plain backup of the &lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt; database&amp;quot;&lt;/span&gt;
                &lt;span class="k"&gt;else&lt;/span&gt;
                        mv &lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;.sql.gz.in_progress &lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;.sql.gz
                &lt;span class="k"&gt;fi&lt;/span&gt;
        &lt;span class="k"&gt;fi&lt;/span&gt;

        &lt;span class="c1"&gt;# Display the files saved in the backup directory&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\n--------------------------------------------------&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;Showing files in &lt;/span&gt;&lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;\n&amp;quot;&lt;/span&gt;
        ls -lh &lt;span class="nv"&gt;$FINAL_BACKUP_DIR&lt;/span&gt;

&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="nv"&gt;START_TIME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$SECONDS&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;##################################################&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;##          BACKUP LOG FOR `date +\%Y-\%m-\%d`           ##&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;##################################################\n&amp;quot;&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;Start time: `date +\%H:\%M`\n&amp;quot;&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Database: &lt;/span&gt;&lt;span class="nv"&gt;$DATABASE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Backup Directory: &lt;/span&gt;&lt;span class="nv"&gt;$BACKUP_DIR&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;## MONTHLY BACKUPS&lt;/span&gt;

&lt;span class="nv"&gt;DAY_OF_MONTH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;date +%d&lt;span class="sb"&gt;`&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DAY_OF_MONTH&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -eq &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\n--------------------------------------------------&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;Creating monthly backup\n&amp;quot;&lt;/span&gt;

        &lt;span class="c1"&gt;# Delete expired monthly directories&lt;/span&gt;
        find &lt;span class="nv"&gt;$BACKUP_DIR&lt;/span&gt; -maxdepth &lt;span class="m"&gt;1&lt;/span&gt; -name &lt;span class="s2"&gt;&amp;quot;*-monthly&amp;quot;&lt;/span&gt; -exec rm -rf &lt;span class="s1"&gt;&amp;#39;{}&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;;&amp;#39;&lt;/span&gt;

        &lt;span class="c1"&gt;# Create a new monthly backup&lt;/span&gt;
        backup_database &lt;span class="s2"&gt;&amp;quot;-monthly&amp;quot;&lt;/span&gt;

        &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="c1"&gt;## WEEKLY BACKUPS&lt;/span&gt;

&lt;span class="nv"&gt;DAY_OF_WEEK&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;date +%u&lt;span class="sb"&gt;`&lt;/span&gt; &lt;span class="c1"&gt;# 1-7 (Monday-Sunday)&lt;/span&gt;
&lt;span class="nv"&gt;EXPIRED_DAYS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;expr &lt;span class="k"&gt;$((&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$WEEKS_TO_KEEP&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="k"&gt;))&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DAYS_OF_WEEK&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$DAY_OF_WEEK_TO_KEEP&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;then&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\n--------------------------------------------------&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;Creating weekly backup\n&amp;quot;&lt;/span&gt;

        &lt;span class="c1"&gt;# Delete expired weekly directories&lt;/span&gt;
        find &lt;span class="nv"&gt;$BACKUP_DIR&lt;/span&gt; -maxdepth &lt;span class="m"&gt;1&lt;/span&gt; -mtime +&lt;span class="nv"&gt;$EXPIRED_DAYS&lt;/span&gt; -name &lt;span class="s2"&gt;&amp;quot;*-weekly&amp;quot;&lt;/span&gt; -exec rm -rf &lt;span class="s1"&gt;&amp;#39;{}&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;;&amp;#39;&lt;/span&gt;

        &lt;span class="c1"&gt;# Create a new weekly backup&lt;/span&gt;
        backup_database &lt;span class="s2"&gt;&amp;quot;-weekly&amp;quot;&lt;/span&gt;

        &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="c1"&gt;## DAILY BACKUPS&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\n--------------------------------------------------&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;Creating daily backups\n&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# Delete expired daily backups &lt;/span&gt;
find &lt;span class="nv"&gt;$BACKUP_DIR&lt;/span&gt; -maxdepth &lt;span class="m"&gt;1&lt;/span&gt; -mtime +&lt;span class="nv"&gt;$DAYS_TO_KEEP&lt;/span&gt; -name &lt;span class="s2"&gt;&amp;quot;*-daily&amp;quot;&lt;/span&gt; -exec rm -rf &lt;span class="s1"&gt;&amp;#39;{}&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;;&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# Create a new daily backup&lt;/span&gt;
backup_database &lt;span class="s2"&gt;&amp;quot;-daily&amp;quot;&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\n--------------------------------------------------&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;ELAPSED_TIME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$((&lt;/span&gt;&lt;span class="nv"&gt;$SECONDS&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nv"&gt;$START_TIME&lt;/span&gt;&lt;span class="k"&gt;))&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;The backup took &lt;/span&gt;&lt;span class="k"&gt;$((&lt;/span&gt;&lt;span class="nv"&gt;$ELAPSED_TIME&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="m"&gt;60&lt;/span&gt;&lt;span class="k"&gt;))&lt;/span&gt;&lt;span class="s2"&gt; min &lt;/span&gt;&lt;span class="k"&gt;$((&lt;/span&gt;&lt;span class="nv"&gt;$ELAPSED_TIME&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="m"&gt;60&lt;/span&gt;&lt;span class="k"&gt;))&lt;/span&gt;&lt;span class="s2"&gt; sec&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can now test the script by running it manually.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ scripts/pg_backup.sh -c scripts/pg_backup.config
Configuration file: scripts/pg_backup.config

--------------------------
Creating daily backups

Making backup directory in /tmp/2019-10-24-daily/
Starting tar format backup of the my_database database
Starting plain format backup of the my_database database
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;.pgpass&lt;/h2&gt;
&lt;p&gt;When the connection to the database requires a password, we can create a &lt;code&gt;.pgpass&lt;/code&gt; file in our home directory to store the credentials. The file will contain one line per connection.
Each line must have the following format:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;hostname&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;For security reasons, we must disallow access to the file to world or group.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ chmod &lt;span class="m"&gt;0600&lt;/span&gt; ~/.pgpass
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The permissions should look like this&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ ls -al
...
-rw------- &lt;span class="m"&gt;1&lt;/span&gt; user user   &lt;span class="m"&gt;45&lt;/span&gt; Oct &lt;span class="m"&gt;24&lt;/span&gt; &lt;span class="m"&gt;02&lt;/span&gt;:39 .pgpass
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Create a cron job&lt;/h2&gt;
&lt;p&gt;At this point, we should be able to backup our database by just running the &lt;code&gt;pg_backup.sh&lt;/code&gt; script. This is already less work than typing the backup commands manually.
The next step is to create a cron job to have the script executed by our system automatically at a given time.&lt;/p&gt;
&lt;p&gt;First, we have to make our script executable:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ chmod +x /path/to/pg_backup.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then, to create a cron job, run the &lt;code&gt;crontab -e&lt;/code&gt; command. This will open the user crontab file in your favorite editor. All we have to do is add a line that define the job we want done.
The line needs to follow this format:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;minutes hours day_of_month month day_of_week  command
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can use the following operators:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;The asterisk (*)&lt;/strong&gt;: all possible values for the field.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;The comma (,)&lt;/strong&gt;: specifies a list of values (e.g. "1,5,10,15,20,25").&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;The dash (-)&lt;/strong&gt;: specifies a range of values. (e.g. "5-15" == "5,6,7,...,13,14,15").&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;The separator (/)&lt;/strong&gt;: specifies a step value. "0-23/" can be used in hours field to run the command every other hour. Steps are also permitted after an asterisk: "*/2" == every two hours.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Let say that we want our database to be backed up every day at 11pm. We would add the following line:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;00 23 * * * /path/to/pg_backup.sh -c /path/to/pg_backup.config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If the hour of the backup is not important, we can use the &lt;code&gt;@daily&lt;/code&gt; special string. This will execute our script every day at midnight.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;@daily /path/to/pg_backup.sh -c /path/to/pg_backup.config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Or, as another example, if nobody is working on weekends and no changes are made to the database during those days, we may want to backup our database only on weekdays. In this case, we would add this line&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;00 23 * * 1-5 /path/to/pg_backup.sh -c /path/to/pg_backup.config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;where &lt;code&gt;1-5&lt;/code&gt; tells the system to run the job only from Monday (1) to Friday (5).&lt;/p&gt;
&lt;h2&gt;Get a notification email&lt;/h2&gt;
&lt;p&gt;We're all set! The database should be backed up every day. But we still need to monitor the process to be sure that the backup is done. Don't wait the day you need your backup file to find out that the backup didn't run correctly and that you don't have any usable backup file.
In this last step, we are going to send an email with the output from the backup script.&lt;/p&gt;
&lt;p&gt;First, we need to install mailutils&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ sudo apt install mailutils
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can now easily send emails from the command line using the &lt;code&gt;mailx&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ mailx -s &lt;span class="s2"&gt;&amp;quot;my subject&amp;quot;&lt;/span&gt; recipient@example.com &lt;span class="o"&gt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Some text goes there&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If we want to send the content of a file, we can use the &lt;code&gt;cat&lt;/code&gt; command with a pipe &lt;code&gt;|&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ cat filename.txt &lt;span class="p"&gt;|&lt;/span&gt; mailx -s &lt;span class="s2"&gt;&amp;quot;content of filename.txt&amp;quot;&lt;/span&gt; recipient@example.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Knowing this, we can modify our cron job command to have the output sent by email.
Return in the crontab with &lt;code&gt;crontab -e&lt;/code&gt; and modify the job as follow.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;00 23 * * * /path/to/pg_backup.sh -c /path/to/pg_backup.config 2&amp;gt;&amp;amp;1 | tee /path/to/pg_backup.log | mailx -s &amp;quot;database backup for `date +\%Y-\%m-\%d&amp;quot; recipient@example.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In this cron job, the &lt;code&gt;2&amp;gt;&amp;amp;1&lt;/code&gt; redirects errors (2 is the file descriptor for &lt;code&gt;stderr&lt;/code&gt;) to the standard output (1 is the file descriptor for &lt;code&gt;stdout&lt;/code&gt;). The output is then passed to the &lt;code&gt;tee&lt;/code&gt; command that reads from a standard input and write to our pg_backup.log file. The file is finally passed to the &lt;code&gt;mailx&lt;/code&gt; command that will send an email with our job's log as the body.&lt;/p&gt;
&lt;h1&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;Et voila! Our database is now backed up every day automatically. All we have to do is check our email to see if everything went smoothly.&lt;br&gt;
The script we wrote in this article will only backup one database at a time. We can create a new script and a new cron job for each database we want to backup. This may not be the most efficient way in some settings. Writing our own script is a good way to learn how it works, but I recommend using the scripts made available on the &lt;a href="https://wiki.postgresql.org/wiki/Automated_Backup_on_Linux"&gt;PostgreSQL wiki&lt;/a&gt;.&lt;/p&gt;</content><category term="Database"></category><category term="postgresql"></category><category term="sysadmin"></category><category term="linux"></category><category term="bash"></category><category term="cron"></category><category term="database"></category></entry><entry><title>Interactives data visualizations with Dash</title><link href="https://guillaume-martin.github.io/interactive-data-visualization-with-dash.html" rel="alternate"></link><published>2019-09-16T13:10:00+08:00</published><updated>2019-09-19T12:30:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2019-09-16:/interactive-data-visualization-with-dash.html</id><summary type="html">&lt;p&gt;A quick introduction to interactive visualizations using Dash.&lt;/p&gt;</summary><content type="html">&lt;h1&gt;Introduction&lt;/h1&gt;
&lt;p&gt;Dash is a data visualization framework built from Flask and React. It is a powerful tool for building interactive dashboards that allow inputs from the user and can handle data streaming.
Because it is built from Flask, it is also easy to embed analytics applications into other web applications developped with the Flask framework.&lt;/p&gt;
&lt;p&gt;In this article, I will explore the basic functionalities of Dash that one should know to start making interactive analytic applications.&lt;/p&gt;
&lt;h1&gt;Initializing the application&lt;/h1&gt;
&lt;p&gt;The application is initialized in about the same way as a Flask application:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;dash&lt;/span&gt;

&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dash&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dash&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run_server&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Set &lt;code&gt;debug&lt;/code&gt; to true when developping so you don't have to restart the server to see the changes you made.&lt;/p&gt;
&lt;p&gt;The Dash application can be split in two parts: &lt;strong&gt;layout&lt;/strong&gt; and &lt;strong&gt;interactivity&lt;/strong&gt;.
The layout part is where we set the organization of the page.
The interactivity part consists of:
    - user interactions.
    - auto refresh (live data).&lt;/p&gt;
&lt;h1&gt;Layout&lt;/h1&gt;
&lt;p&gt;We need two libraries to setup the layout:
- &lt;strong&gt;dash_html_components&lt;/strong&gt;: Instead of writing HTML code to set the page layout, the dash_html_components library provides. 
- &lt;strong&gt;dash_core_components&lt;/strong&gt;: describe higher level interactive components that require HTML, CSS and Javascript (eg. dropdowns, options, etc...).&lt;/p&gt;
&lt;p&gt;Each component is described using keywords attributes. &lt;/p&gt;
&lt;h2&gt;HTML components&lt;/h2&gt;
&lt;p&gt;We create the page layout by nesting the html components the same way we would nest tags (&lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt;) when writing HTML code.
The main attributes are:
- &lt;strong&gt;className&lt;/strong&gt;: set the class(es) of the component.
- &lt;strong&gt;id&lt;/strong&gt;: set the id of the component.
- &lt;strong&gt;style&lt;/strong&gt;: inline styling of the component.&lt;/p&gt;
&lt;p&gt;Example:
In this example, we are going to create a simple page. There is a main division that contains a headline and another division. The second division contains a praragraph. So, to build this page in HTML, we would use the &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;h1&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt; tags. In Dash, we just have to use the &lt;code&gt;Div()&lt;/code&gt;, &lt;code&gt;H1()&lt;/code&gt; and &lt;code&gt;P()&lt;/code&gt; components from the &lt;code&gt;dash_html_components&lt;/code&gt; library.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;dash_html_components&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;html&lt;/span&gt;

&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
                &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;H1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;This is my title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
                    &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;P&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;lorem ipsum&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                           &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;my-paragraph&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                           &lt;span class="n"&gt;className&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;my-class&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                           &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;color&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;red&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;fontSize&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
                &lt;span class="p"&gt;],&lt;/span&gt;      
                &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;another-div&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;      
            &lt;span class="n"&gt;className&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;container&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;        
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The above script will render the following HTML code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;container&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;This is my title&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;another-div&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;my-paragraph&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;my-class&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;color: red; font-size: 14px;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
            lorem ipsum
        &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="bacae28d19656e48a5c454f912a580f9.png" src="/images/c3803539002342ebba29724ca1e49ba1.png"&gt;&lt;/p&gt;
&lt;h2&gt;Styling&lt;/h2&gt;
&lt;h3&gt;Adding style in html component&lt;/h3&gt;
&lt;p&gt;We can add styling by passing a dictionary as the &lt;code&gt;style&lt;/code&gt; argument to the html component:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
                &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;a div&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;color&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;red&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;fontSize&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
            &lt;span class="p"&gt;])&lt;/span&gt;      
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Output:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;color: red; font-size: 14px;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    a div
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Adding style from a local &lt;code&gt;.css&lt;/code&gt; file&lt;/h3&gt;
&lt;p&gt;We can save our &lt;code&gt;.css&lt;/code&gt; files in an &lt;code&gt;assets/&lt;/code&gt; directory that we create in our project.
The css files in assets/ will be automatically included when we run our application. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;project/
    |_ app.py
    |_assets/
        |_ styles.css 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Any &lt;code&gt;.js&lt;/code&gt; file and one &lt;code&gt;favicon.ico&lt;/code&gt; file saved in the assets/ directory will also be included.
The files are included in alphanumerical order. It is recommended to prefix the files names with numbers to ensure their orders (e.g. 10_first_file.css, 20_second_file.css, ...).&lt;/p&gt;
&lt;h3&gt;Adding style from a remote &lt;code&gt;.css&lt;/code&gt; file&lt;/h3&gt;
&lt;p&gt;If the assets are on internet, then we pass the &lt;code&gt;assets_url_path&lt;/code&gt; argument to our dash application:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dash&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;assets_url_path&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;http://your-external-assets-folder-url/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Adding external css&lt;/h3&gt;
&lt;p&gt;We can also include resources that are not hosted with our Dash application. To do so, we create a list of stylesheets. Each stylesheet is saved as a dictionary which keys are the attributes we would add to a &lt;code&gt;&amp;lt;link&amp;gt;&lt;/code&gt; tag in HTML.&lt;/p&gt;
&lt;p&gt;For example, to use Bootsrap from BootstrapCDN, we would add the following tag in HTML:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;link&lt;/span&gt; &lt;span class="na"&gt;rel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;stylesheet&amp;quot;&lt;/span&gt;
      &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css&amp;quot;&lt;/span&gt;
      &lt;span class="na"&gt;integrity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T&amp;quot;&lt;/span&gt; 
      &lt;span class="na"&gt;crossorigin&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;anonymous&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can see that the &lt;code&gt;rel&lt;/code&gt;, &lt;code&gt;href&lt;/code&gt;, &lt;code&gt;integrity&lt;/code&gt; and &lt;code&gt;crossorigin&lt;/code&gt; attributes were added to the tag.
In dash, we would declare the &lt;code&gt;external_stylesheet&lt;/code&gt; as like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;external_stylesheets&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;rel&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;stylesheet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;href&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;integrity&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;crossorigin&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;anonymous&amp;#39;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The stylesheets are then passed to the dash application:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dash&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;external_stylesheets&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;external_stylesheets&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finally, we add bootstrap classes to our html elements. 
Here is a small example that shows how we can style our layout using Bootstrap:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;dash&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;dash_html_components&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;html&lt;/span&gt;

&lt;span class="n"&gt;external_stylesheets&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;rel&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;stylesheet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;href&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;integrity&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;crossorigin&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;anonymous&amp;#39;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dash&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;external_stylesheets&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;external_stylesheets&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
    &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
        &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;1 of 3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;className&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;col blue&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2 of 3 (wider)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;className&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;col-6 orange&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;3 of 3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;className&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;col green&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;className&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;row&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;className&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;container&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;__main__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run_server&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="dash-bootstrap.png" src="/images/8cc25b7cd4eb470388fb0bcbdd36b3e4.png"&gt;&lt;/p&gt;
&lt;h2&gt;Core Components&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;dash_core_components&lt;/code&gt; (dcc) library provides the elements for interactive user interfaces.
Some common input components that can be found in the library are text input, dropdown, slide, checkbox, radio item, button, date picker, ... 
The dcc components are added inside the application layout in the same way the HTML components are:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;dash&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;dash_html_components&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;html&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;dash_core_components&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;dcc&lt;/span&gt;

&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dash&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dash&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
    &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;This is the title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;dcc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dropdown&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;label&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Option 1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;label&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Option 2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;label&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Option 3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run_server&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="9ed96c7d2e6f1cff6b15683c4ff4781e.png" src="/images/c9c76bc709f64fcc800e2640d3d93224.png"&gt;&lt;/p&gt;
&lt;h1&gt;Graph&lt;/h1&gt;
&lt;p&gt;Graphs are set as a &lt;code&gt;dcc.Graph&lt;/code&gt; component in the layout. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
    &lt;span class="n"&gt;dcc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Graph&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;my-graph&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="s1"&gt;&amp;#39;data&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:[&lt;/span&gt;
                &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;x&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;y&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; 
                &lt;span class="s1"&gt;&amp;#39;type&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bar&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s1"&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;my_data&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s1"&gt;&amp;#39;layout&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A simple bar chart&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="simple-bar-chart.png" src="/images/3ffe3f9d84a2411a83ec6205cb8cc7e2.png"&gt;&lt;/p&gt;
&lt;p&gt;We can also use the same syntax as the plotly library:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;plotly.graph_objs&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;go&lt;/span&gt;


&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
    &lt;span class="n"&gt;dcc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Graph&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;go&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="n"&gt;go&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                    &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                    &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                    &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;data&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="n"&gt;marker&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;go&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Marker&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                        &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#1b9e77&amp;#39;&lt;/span&gt;
                    &lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="n"&gt;layout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;go&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Layout&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A bar chart using plotly&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;showlegend&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;legend&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;go&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Legend&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                    &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;
                &lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="plotly-graph.png" src="/images/ab4686d63edf48578d54f320f8c61a89.png"&gt;&lt;/p&gt;
&lt;h1&gt;Callback&lt;/h1&gt;
&lt;p&gt;The &lt;code&gt;@app.callback&lt;/code&gt; decorator is where the interactivity happens.&lt;/p&gt;
&lt;p&gt;In the layout, we define an input which is going to be a dcc component like a text field or a dropdown and an output which is going to be an html component where the result is displayed.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
    &lt;span class="n"&gt;dcc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;my-input&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;placeholder&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;type something&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;my-output&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then we define a function that is going to process our input and return an output. We also use the &lt;code&gt;@app.callback&lt;/code&gt; decorator where we define our inputs and outputs. Whenever an input property changes, the function will be called.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;dash.dependencies&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Output&lt;/span&gt;

&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;callback&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;Output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;component_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;my-output&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;component_property&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;children&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;component_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;my-input&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;component_property&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;update_output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;input_value&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;retun&lt;/span&gt; &lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;You&amp;#39;ve entered &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;input_value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;What the above code does is that whenever you type something in the text field, the &lt;code&gt;update_output()&lt;/code&gt; method will be called. The decorator set that the input is the value of the component with the &lt;code&gt;my-input&lt;/code&gt; id. What the function returns will be sent to the output which is the component with the &lt;code&gt;my-output&lt;/code&gt; id.&lt;/p&gt;
&lt;p&gt;Let's see another example. We're going to have two dropdowns that will let us set the background and foreground colors of a &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
    &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
        &lt;span class="n"&gt;dcc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dropdown&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;background-color&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;label&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;blue&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#7570b3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
                &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;label&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;orange&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#d95f02&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
                &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;label&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;green&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#1b9e77&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="n"&gt;placeholder&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;background color&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;width&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;50%&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;display&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;inline-block&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="p"&gt;]),&lt;/span&gt;
    &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
        &lt;span class="n"&gt;dcc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dropdown&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;text-color&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;label&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;black&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#000000&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
                &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;label&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;white&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#ffffff&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
                &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;label&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;grey&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#b8b8b8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;black&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;placeholder&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;text color&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;width&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;50%&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;display&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;inline-block&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;]),&lt;/span&gt;
    &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;lorem ipsum&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;my-output&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;])&lt;/span&gt;


&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;callback&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;component_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;my-output&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;component_property&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;style&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)],&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;component_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;background-color&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;component_property&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
     &lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;component_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;text-color&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;component_property&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;update_output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;backgroud_color&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;text_color&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;style&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;background-color&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;backgroud_color&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;color&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;text_color&lt;/span&gt;&lt;span class="p"&gt;}]&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;style&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="div-color-change.png" src="/images/d5766458ddd945e4926db2e3c3a089a3.png"&gt;&lt;/p&gt;
&lt;p&gt;In the layout, we define two divisions that contain the dropdowns. A third division with some text will be formatted with the values set in the two dropdowns.
In this case, the callback decorator will get two inputs. Whenever a change is made in any of the inputs, the &lt;code&gt;update_output()&lt;/code&gt; method is called.
The input &lt;code&gt;Input(component_id='background-color', component_property='value')&lt;/code&gt; takes the &lt;em&gt;value&lt;/em&gt; of the HTML component with the &lt;em&gt;background-color&lt;/em&gt; id.
The input &lt;code&gt;Input(component_id='text-color', component_property='value')]&lt;/code&gt; takes the &lt;em&gt;value&lt;/em&gt; of the HTML component with the &lt;em&gt;text-color&lt;/em&gt; id.
The values of the two inputs are then passed as arguments to the &lt;code&gt;update_output()&lt;/code&gt; method: &lt;code&gt;def update_output(backgroud_color, text_color)&lt;/code&gt;. Using those two values, the method will set and return the style as it should be passed in the layout html component.
The output in the callback will tell Dash what to do with the value returned by the method. Here, &lt;code&gt;Output(component_id='my-output', component_property='style')&lt;/code&gt; tells dash to send the value to the &lt;em&gt;style&lt;/em&gt; attribute of the html component with the &lt;em&gt;my-output&lt;/em&gt; id.&lt;/p&gt;
&lt;h1&gt;Live updates&lt;/h1&gt;
&lt;p&gt;To update the graph automatically at certain intervals, we add the &lt;code&gt;dcc.Interval&lt;/code&gt; component to our layout.
We'll set three attributes:
- &lt;strong&gt;id&lt;/strong&gt;: this is the id of the component used as a reference for the input of our callback.
- &lt;strong&gt;intervals&lt;/strong&gt;: this is the time between each update in miliseconds.
- &lt;strong&gt;n_intervals&lt;/strong&gt;: this is the number of the interval. It is incremented at each update.&lt;/p&gt;
&lt;p&gt;As an example, we'll create a small app that draws the distribution of a variable with a normal distribution.&lt;/p&gt;
&lt;p&gt;First, we add the interval component to our layout:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
    &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
        &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;H1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;This is a live Graph&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="n"&gt;dcc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Graph&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;live-graph&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="n"&gt;dcc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interval&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;interval-component&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;interval&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;n_intervals&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The interval becomes the input of our update method:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;callback&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;live-graph&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;figure&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
              &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;interval-component&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;n_intervals&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then in the update method, we generate a new value for x ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;normal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;scale&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;... and create a new graph that we'll send to the output.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="n"&gt;figure&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;data&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;go&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Histogram&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)],&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;layout&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;go&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Layout&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Distribution of x (&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; values)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;xaxis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;X&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
            &lt;span class="n"&gt;yaxis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;count of X&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;figure&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Let's put it all together&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;dash&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;dash_core_components&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;dcc&lt;/span&gt; 
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;dash_html_components&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;html&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;plotly.graph_objs&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;go&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;dash.dependencies&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Output&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;

&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dash&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
    &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
        &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;H1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;This is a live Graph&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="n"&gt;dcc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Graph&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;live-graph&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
        &lt;span class="n"&gt;dcc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interval&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="nb"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;interval-component&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;interval&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;n_intervals&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="p"&gt;])&lt;/span&gt;


&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;callback&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;live-graph&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;figure&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
              &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;interval-component&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;n_intervals&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;update_histogram&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;normal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;scale&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="n"&gt;figure&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;data&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;go&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Histogram&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)],&lt;/span&gt;
        &lt;span class="s1"&gt;&amp;#39;layout&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;go&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Layout&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Distribution of X (&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; values)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;xaxis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;X&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;figure&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;__main__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run_server&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here is our small application in action:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Peek 2019-09-05 16-25.gif" src="/images/3b87cd3da44b4a60ae97802e75713bd0.gif"&gt;&lt;/p&gt;
&lt;h1&gt;Integrate with flask&lt;/h1&gt;
&lt;p&gt;As I mentioned at the beginning of this post, Dash is built on Flask. 
There is a very good post written by Oleg Komarov that explains &lt;a href="https://medium.com/@olegkomarov_77860/how-to-embed-a-dash-app-into-an-existing-flask-app-ea05d7a2210b"&gt;how to embed a Dash app into an existing Flask app&lt;/a&gt;.
In his post, Oleg shows an example with a fully functionning complexe flask application.&lt;/p&gt;
&lt;h1&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;In this post, I went through the basics of creating interactive data visualizations using the Dash framework. 
It shows how we can easily create useful dashboards with only a couple of lines of code. &lt;/p&gt;
&lt;h1&gt;Resources&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://github.com/plotly/dash-html-components/blob/master/dash_html_components/H1.py"&gt;dash_html_components&lt;/a&gt;&lt;br&gt;
&lt;a href="https://github.com/plotly/dash-core-components"&gt;dash_core_components&lt;/a&gt;&lt;br&gt;
&lt;a href="https://github.com/plotly/dash"&gt;dash repository&lt;/a&gt;&lt;br&gt;
&lt;a href="https://medium.com/@olegkomarov_77860/how-to-embed-a-dash-app-into-an-existing-flask-app-ea05d7a2210b"&gt;How to embed a Dash app into an existing Flask app&lt;/a&gt;  &lt;/p&gt;</content><category term="Visualization"></category><category term="visualization"></category><category term="python"></category><category term="dash"></category></entry><entry><title>Realtime Analytics with bitmapist4</title><link href="https://guillaume-martin.github.io/bitmapist.html" rel="alternate"></link><published>2019-05-03T00:00:00+08:00</published><updated>2019-05-03T00:00:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2019-05-03:/bitmapist.html</id><summary type="html">&lt;p&gt;A memory efficient and fast tool to analyze your users' activity in real time.&lt;/p&gt;</summary><content type="html">&lt;p&gt;In this post, I'll have a look at bitmaps and how they can help us analyzing our users data. I'll also look at a python library that let us take advantage of bitmaps the easy way.&lt;/p&gt;
&lt;h2&gt;What is bitmap?&lt;/h2&gt;
&lt;p&gt;A bitmap, also called bit array, bit set, bit string or bit vector, is an array that stores bits. It is a mapping from a domain (mostly integers) to bits. A position in the array is called an offset.&lt;/p&gt;
&lt;p&gt;A set of integers {1,2,3,4,5,6,7,8} could be map to the array [0,1,1,0,0,0,1,0].&lt;/p&gt;
&lt;h3&gt;Bit operations&lt;/h3&gt;
&lt;p&gt;We can manipulate the bits in a bitmap using the usual logical operators AND, OR, XOR, NOT.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;set a bit to 1: 11101&lt;mark&gt;0&lt;/mark&gt;10 &lt;strong&gt;OR&lt;/strong&gt; 00000&lt;mark&gt;1&lt;/mark&gt;00 = 11101&lt;mark&gt;1&lt;/mark&gt;10&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;set a bit to 0: 111010&lt;mark&gt;1&lt;/mark&gt;0 &lt;strong&gt;AND&lt;/strong&gt; 111111&lt;mark&gt;0&lt;/mark&gt;1 = 111010&lt;mark&gt;0&lt;/mark&gt;0&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;test if a bit is set:&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;1110101&lt;mark&gt;0&lt;/mark&gt; &lt;strong&gt;AND&lt;/strong&gt; 000000&lt;mark&gt;1&lt;/mark&gt; = 0000000 (= 0 -&amp;gt; the bit is not set)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;111010&lt;mark&gt;1&lt;/mark&gt;0 &lt;strong&gt;AND&lt;/strong&gt; 000000&lt;mark&gt;1&lt;/mark&gt;0 = 000000&lt;mark&gt;1&lt;/mark&gt;0 (&lt;span class="math"&gt;\(\neq\)&lt;/span&gt; 0 -&amp;gt; the bit is set)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;toggle a bit&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;mark&gt;0&lt;/mark&gt;10 &lt;strong&gt;XOR&lt;/strong&gt; 00000&lt;mark&gt;1&lt;/mark&gt;00 = 11101&lt;mark&gt;1&lt;/mark&gt;10&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;11101&lt;mark&gt;1&lt;/mark&gt;10 &lt;strong&gt;XOR&lt;/strong&gt; 00000&lt;mark&gt;1&lt;/mark&gt;00 = 11101&lt;mark&gt;0&lt;/mark&gt;10&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;invert all bits&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;NOT&lt;/strong&gt; 10110010 = 01001101&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Redis implementation&lt;/h3&gt;
&lt;p&gt;There is no bitmap data structure in Redis. Bitmaps are stored as strings. However there are built-in functions to work with bitmaps.&lt;/p&gt;
&lt;p&gt;To set a bit, we can use the &lt;a href="https://redis.io/commands/setbit"&gt;&lt;code&gt;SETBIT key offset value&lt;/code&gt;&lt;/a&gt; function.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; SETBIT foo &lt;span class="m"&gt;12&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;integer&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
&amp;gt; GET foo
&lt;span class="s2"&gt;&amp;quot;\x00\b&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Let's use an example with 8 bits: 11101010&lt;/p&gt;
&lt;p&gt;For each offset where the value is one, we run the command &lt;code&gt;SETBIT bitmap &amp;lt;offset&amp;gt; 1&lt;/code&gt;.
Our bit array is now stored with the key &lt;code&gt;bitmap&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;We can get the value of the bit at any offset with the &lt;a href="https://redis.io/commands/getbit"&gt;&lt;code&gt;GETBIT key offset&lt;/code&gt;&lt;/a&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; GETBIT bitmap &lt;span class="m"&gt;2&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;integer&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&amp;gt; GETBIT bitmap &lt;span class="m"&gt;4&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;integer&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To know how many bits are set to 1, we can use the &lt;a href="https://redis.io/commands/bitcount"&gt;&lt;code&gt;BITCOUNT key [start end]&lt;/code&gt;&lt;/a&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; BITCOUNT bitmap
&lt;span class="o"&gt;(&lt;/span&gt;integer&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;5&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finally, we can do bit operations with &lt;a href="https://redis.io/commands/bitop"&gt;&lt;code&gt;BITOP operation destkey key [key...]&lt;/code&gt;&lt;/a&gt; where &lt;code&gt;destkey&lt;/code&gt; is the destination key where the result is stored.
As an example, we are going to set two bitmaps and then find how many bits are set to 1 in both of them.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;bitmap1:10011&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;bitmap2:01001&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; SETBIT bitmap1 1 1
(integer) 0
&amp;gt; SETBIT bitmap1 4 1
(integer) 0
&amp;gt; SETBIT bitmap1 5 1
(integer) 0
&amp;gt; SETBIT bitmap2 2 1
(integer) 0
&amp;gt; SETBIT bitmap2 5 1
(integer) 0
&amp;gt; BITOP AND both bitmap1 bitmap2
(integer) 1
&amp;gt; BITCOUNT both
(integer) 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Use in Analytics&lt;/h3&gt;
&lt;p&gt;Well, this looks nice, but what are we supposed to do with this?&lt;/p&gt;
&lt;p&gt;Using bit operations on Redis is very fast. As a consequence, bitmaps are often used in real time analytics.&lt;/p&gt;
&lt;p&gt;I'll show how it is used with an example. We are a SaaS business and we want to track our users activity. Each of our users is going to have a number as an id (1, 2, 3,...).  We can use that id as the offset in the bitmap. The key in which we store the bitmap would be the activity we are tracking. For example, users' activity for March 1st will be stored in &lt;code&gt;active:2019-03-01&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I have five users with ids going from 0 to 4. On March 1st, users 1 and 4 have been active. We record their activity by setting he bit at their offset to 1:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; SETBIT active:2019-03-01 1 1
(integer) 0
&amp;gt; SETBIT active:2019-03-01 4 1
(integer) 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Our bitmap should look like this: &lt;code&gt;01001&lt;/code&gt;. Now if I want to get the number of active users for March 1st, I get the bit count for that day:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; BITCOUNT active:2019-03-01
(integer) 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Two users were active that day.&lt;/p&gt;
&lt;p&gt;If I want to know whether a user had been active on a given day, I just need to get the value of the bit at the offset that matches her id:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; GETBIT active:2019-03-01 2
(integer) 0
&amp;gt; GETBIT active:2019-03-01 4
(integer) 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;User 2 didn't connect on March 1st, whereas user 4 did.&lt;/p&gt;
&lt;h4&gt;Weekly Active Users (WAU)&lt;/h4&gt;
&lt;p&gt;We've been tracking the activity of our users for quite some times so we have bitmaps for every day. Now, we want to get the WAU which is the number of active users in a given week. A weekly active user is a user who has been active at least one day during the week we're interested in. We need to use the &lt;code&gt;OR&lt;/code&gt; operator on activity on all days of that week. The command will look something like &lt;code&gt;BITOP OR &amp;lt;destination_key&amp;gt; &amp;lt;monday_key&amp;gt; &amp;lt;tuesday_key&amp;gt;...&amp;lt;sunday_key&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For this example, I'll show how to get the WAU for week 10 (March 4th to March 10th). I'll store the active users of the week in the &lt;code&gt;active:2019-w10&lt;/code&gt; key&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; BITOP OR active:2019-w10 \
    active:2019-03-04 \
    active:2019-03-05 \
    active:2019-03-06 \
    active:2019-03-07 \
    active:2019-03-08 \
    active:2019-03-09 \
    active:2019-03-10
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I now have a bitmap for week 10 of 2019. If a user has been active at least once during that week, her bit is set to 1. To get the total number of active users for the week (WAU), I use the &lt;code&gt;BITCOUNT&lt;/code&gt; command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; BITCOUNT active:2019-w10
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Retention&lt;/h4&gt;
&lt;p&gt;Let say we want the retention rate over two periods of time, period 1 and period 2:
&lt;/p&gt;
&lt;div class="math"&gt;$$
Retention\ Rate = \frac{\#\ of\ users\ active\ in\ period\ 1\ AND\ period\ 2 }{\#\ of\ users\ active\ during\ period\ 1}
$$&lt;/div&gt;
&lt;p&gt;
So if we want to get the retention rate between week 10 and week 11, we first need to get the users who were active in both weeks. Assuming we've already aggregated our weekly data: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; BITOP AND active:w10+w11 active:w10 active:w11
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The number of users active during both weeks is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; BITCOUNT active:w10+w11
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We just need to divide this number by the number of users active during week 10 (&lt;code&gt;BITCOUNT active:w10&lt;/code&gt;) and we have our retention rate.&lt;/p&gt;
&lt;p&gt;Note that the Redis CLI does not support arithmetic operations. I cannot type &lt;code&gt;BITCOUNT active:w10+w11 / BITCOUNT active:w10&lt;/code&gt;. &lt;/p&gt;
&lt;h4&gt;Churn&lt;/h4&gt;
&lt;p&gt;The customer churn (also known as customer attrition) is simply the lost of customers.
&lt;/p&gt;
&lt;div class="math"&gt;$$
\%\ Customer\ Churn = \frac{\#\ of\ customers\ who\ churned}{total\ \#\ of\ customers}
$$&lt;/div&gt;
&lt;p&gt;
As an example, we're going to say that a customer has churned if she's not active for three months, let's say Q2 of 2019. We are also going to take into account only the users that were active in Q1. Those who were not active in Q1 churned long ago. I'll assume that we already have aggregated our monthly data.&lt;/p&gt;
&lt;p&gt;First, I get the users active during Q1:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; BITOP OR active:2019-Q1 \
    active:2019-01 \
    active:2019-02 \
    active:2019:03
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I do the same  to get users active during Q2:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; BITOP OR active:2019-Q2 \
    active:2019-04 \
    active:2019-05 \
    active:2019-06
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then, I invert all the bits of &lt;code&gt;active:2019-Q2&lt;/code&gt; to get users that were inactive:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; BITOP NOT inactive:2019-Q2 active:2019-Q2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finaly, I find users that were active in Q1 AND inactive in Q2:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; BITOP AND churned:2019-Q2 \
    active:2019-Q1 \
    inactive:2019-Q2
&amp;gt; BITCOUNT churned:2019-Q2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We saw how we can do analytics with bitmaps, but using the Redis command line is not convenient. If we want to do some arithmetic, or generate nice reports, we will have to use another language. &lt;/p&gt;
&lt;p&gt;For those using Python, there is the &lt;a href="https://pypi.org/project/redis/"&gt;redis package&lt;/a&gt; that would let us interface with our Redis database. But there are also a python library and a server developed by the &lt;a href="doist.com"&gt;Doist&lt;/a&gt; team. &lt;/p&gt;
&lt;h2&gt;Doist applications&lt;/h2&gt;
&lt;h3&gt;bitmapist-server&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/Doist/bitmapist-server"&gt;github&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;bitmapist-server is a standalone server developed by Doist to be used with their bitmapist library.
Redis stores bitmaps in plain bytes arrays. This implementation can require a lot of memory when working with large sparse bitmaps. This can be the case if you're tracking users' activity. If you have millions of users but a small fraction of them is active on any given day, you will end up with a bitmap that as millions of bytes but only few of them are set to 1.&lt;/p&gt;
&lt;p&gt;The bitmapist-server helps saving memory using two techniques:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://roaringbitmap.org/"&gt;compressed bitmap representation&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;only keeping &lt;em&gt;hot&lt;/em&gt; dataset in memory.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The Doist team claims that a dataset that would use 129.48G on redis only uses 300M on bitmapist-server.&lt;/p&gt;
&lt;h3&gt;bitmapist4&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/Doist/bitmapist4"&gt;github&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Bitmapist4 is a python library that let us easily manipulate bitmaps on Redis or bitmapist-server. It provides functions for easily saving events and aggregate automatically weekly and monthly data. It also has a cohort module that helps us run cohort analysis in only a few lines of code.&lt;/p&gt;
&lt;h2&gt;Setup&lt;/h2&gt;
&lt;h3&gt;Run bitmapist-server&lt;/h3&gt;
&lt;p&gt;You can build the server from source following the instructions on &lt;a href="https://github.com/Doist/bitmapist-server"&gt;github&lt;/a&gt;, but there's a Dockerfile in the repository and using containers is a lot easier. So we are going to create a bitmapist-server container and run it. If you don't have docker installed on your computer you can download it &lt;a href="https://www.docker.com/products/docker-desktop"&gt;here&lt;/a&gt; for Mac and Windows. For linux, instructions can be found on https://docs.docker.com/install/linux/docker-ce/&lt;distro&gt;/ (replace distro with centos, debian, fedora, ubuntu or binaries).&lt;/p&gt;
&lt;p&gt;Build the docker image:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ git clone https://github.com/Doist/bitmapist-server.git
$ &lt;span class="nb"&gt;cd&lt;/span&gt; bitmapist-server
$ docker build -t bitmapist-server:latest ./
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Run the container:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ docker container run -d -p &lt;span class="m"&gt;6379&lt;/span&gt;:6379 --name bitmapist-server bitmapist-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Control that the container is running&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ docker container ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
8fc1ab9d39f1        bitmapist-server    &lt;span class="s2"&gt;&amp;quot;./bitmapist-server …&amp;quot;&lt;/span&gt;   &lt;span class="m"&gt;20&lt;/span&gt; hours ago        Up &lt;span class="m"&gt;5&lt;/span&gt; minutes        &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:6379-&amp;gt;6379/tcp   bitmapist-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Install bitmapist4&lt;/h3&gt;
&lt;p&gt;To install the bitmapist4 library, simply type the following command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ pip install bitmapist4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Dataset&lt;/h3&gt;
&lt;p&gt;For this tutorial, I use the dataset from the &lt;em&gt;WSDM - KKBox's Churn Prediction Challenge&lt;/em&gt; competition hosted on kaggle. It can be downloaded &lt;a href="https://www.kaggle.com/c/kkbox-churn-prediction-challenge/data"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This is a good dataset because it contains the logs of the users' activity. I will use the &lt;code&gt;members_v3.csv&lt;/code&gt; and &lt;code&gt;user_logs.csv&lt;/code&gt; files.&lt;/p&gt;
&lt;p&gt;The data descriptions given by Kaggle are as follow:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;members.csv&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This is the users' information. Note that not every user in the dataset is available. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;msno&lt;/li&gt;
&lt;li&gt;city  &lt;/li&gt;
&lt;li&gt;bd: age. &lt;/li&gt;
&lt;li&gt;gender    &lt;/li&gt;
&lt;li&gt;registered_via: registration method&lt;/li&gt;
&lt;li&gt;registration_init_time: format &lt;code&gt;%Y%m%d&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;expiration_date: format &lt;code&gt;%Y%m%d&lt;/code&gt;, taken as a snapshot at which the member.csv is extracted. Not representing the actual churn behavior.   &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Let's have a look at the first lines:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ head -n &lt;span class="m"&gt;5&lt;/span&gt; members_v3.csv
msno,city,bd,gender,registered_via,registration_init_time
Rb9UwLQTrxzBVwCB6+bCcSQWZ9JiNLC9dXtM1oEsZA8&lt;span class="o"&gt;=&lt;/span&gt;,1,0,,11,20110911
+tJonkh+O1CA796Fm5X60UMOtB6POHAwPjbTRVl/EuU&lt;span class="o"&gt;=&lt;/span&gt;,1,0,,7,20110914
&lt;span class="nv"&gt;cV358ssn7a0f7jZOwGNWS07wCKVqxyiImJUX6xcIwKw&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;,1,0,,11,20110915
9bzDeJP6sQodK73K5CBlJ6fgIQzPeLnRl0p5B77XP+g&lt;span class="o"&gt;=&lt;/span&gt;,1,0,,11,20110915
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;msno&lt;/code&gt; is the id of the user. This is a string, however, we need integers to save data in bitmaps as the id is going to be the offset at which we save the user's bit. We'll ignore &lt;code&gt;city&lt;/code&gt;, &lt;code&gt;bd&lt;/code&gt; and &lt;code&gt;gender&lt;/code&gt; to keep things simple.&lt;/p&gt;
&lt;p&gt;Let's control how many lines the file has:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ wc -l members_v3.csv
&lt;span class="m"&gt;6769474&lt;/span&gt; members_v3.csv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The file has a little bit less than 6.8 million lines.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;user_logs.csv&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Those are the daily user logs describing listening behavior of a user. The data has been collected until 2/28/2017. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;msno: user id&lt;/li&gt;
&lt;li&gt;date: format &lt;code&gt;%Y%m%d&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;num_25: # of songs played less than 25% of the song length&lt;/li&gt;
&lt;li&gt;num_50: # of songs played between 25% to 50% of the song length&lt;/li&gt;
&lt;li&gt;num_75: # of songs played between 50% to 75% of of the song length&lt;/li&gt;
&lt;li&gt;num_985: # of songs played between 75% to 98.5% of the song length&lt;/li&gt;
&lt;li&gt;num_100: # of songs played over 98.5% of the song length&lt;/li&gt;
&lt;li&gt;num_unq: # of unique songs played&lt;/li&gt;
&lt;li&gt;total_secs: total seconds played&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Let's have a look at the first lines&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ head -n &lt;span class="m"&gt;5&lt;/span&gt; user_logs.csv
msno,date,num_25,num_50,num_75,num_985,num_100,num_unq,total_secs
rxIP2f2aN0rYNp+toI0Obt/N/FYQX8hcO1fTmmy2h34&lt;span class="o"&gt;=&lt;/span&gt;,20150513,0,0,0,0,1,1,280.3350
rxIP2f2aN0rYNp+toI0Obt/N/FYQX8hcO1fTmmy2h34&lt;span class="o"&gt;=&lt;/span&gt;,20150709,9,1,0,0,7,11,1658.9480
&lt;span class="nv"&gt;yxiEWwE9VR5utpUecLxVdQ5B7NysUPfrNtGINaM2zA8&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;,20150105,3,3,0,0,68,36,17364.9560
&lt;span class="nv"&gt;yxiEWwE9VR5utpUecLxVdQ5B7NysUPfrNtGINaM2zA8&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;,20150306,1,0,1,1,97,27,24667.3170
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Each line represents the activity of a user on a given day. In the following examples, I will ignore the information related to the number of songs played or the duration of the session. I will only record whether on a given day a user had been active, i.e. for each line, I will set the user's bit to 1 for that day. For example, the first line will be saved in &lt;code&gt;active:2015-05-13&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Let's control how many lines the file has.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ wc -l user_logs.csv
&lt;span class="m"&gt;47375490&lt;/span&gt; user_logs.csv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;user_logs.csv&lt;/code&gt; file has over 47 millions lines.&lt;/p&gt;
&lt;h2&gt;Loading the data&lt;/h2&gt;
&lt;p&gt;Before starting working on analytics, we need to save the data from the csv files into the bitmapist-server.
I have two issues to deal with:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The users ids are strings but I need an integer because the id is the offset in the bitmap array.&lt;/li&gt;
&lt;li&gt;I can't load the entire logs at once because my computer doesn't have enough memory.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So here is how I am going to proceed:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Save data from the &lt;code&gt;members_v3.csv&lt;/code&gt; file. &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;There are no duplicate users (&lt;code&gt;msno&lt;/code&gt;). For each line, I can assign an integer to the &lt;code&gt;msno&lt;/code&gt; and save the pair in a dictionary.  Then, I increment the integer before the next line. I will have an integer id for each user that I can use to mark an event.&lt;/p&gt;
&lt;p&gt;For each line, I will mark two events: the &lt;em&gt;date of registration&lt;/em&gt; (&lt;code&gt;registration_init_time&lt;/code&gt;) and the &lt;em&gt;registration method&lt;/em&gt; (&lt;code&gt;registered_via&lt;/code&gt;). I can use the &lt;code&gt;transaction()&lt;/code&gt; method to take advantage of &lt;a href="https://redis.io/topics/pipelining"&gt;Redis pipelining&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;members_file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;../data/members_v3.csv&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;id_dict&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;members_file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
   &lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# skip the headers&lt;/span&gt;
   &lt;span class="n"&gt;reader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;csv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;    
   &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;id_int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
       &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
       &lt;span class="c1"&gt;# add the user id to the id dictionary&lt;/span&gt;
       &lt;span class="n"&gt;id_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id_int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

       &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;transaction&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
           &lt;span class="c1"&gt;# save registration date for cohort analysis&lt;/span&gt;
           &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mark_event&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;registered&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                       &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])]),&lt;/span&gt;
                       &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strptime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;%Y%m&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

           &lt;span class="c1"&gt;# save registration method&lt;/span&gt;
           &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mark_unique&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;registered_via:&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                       &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])]))&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;I iterate through the &lt;code&gt;user_logs.csv&lt;/code&gt; file and mark an &lt;code&gt;active&lt;/code&gt; event for each line. &lt;/p&gt;
&lt;p&gt;Because the dataset is quite large and I don't need all the data, I'll load only the rows for 2016.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;log_file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;../data/user_logs.csv&amp;#39;&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;log_file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;reader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;csv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="c1"&gt;# we keep only the logs of users in members dataset and logs for 2016&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;id_dict&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;][:&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;2016&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mark_event&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                         &lt;span class="n"&gt;id_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]],&lt;/span&gt; 
                         &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strptime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;%Y%m&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;b.mark_event() and b.unique()&lt;/h3&gt;
&lt;p&gt;The interesting part in the loading script are the &lt;code&gt;mark_event()&lt;/code&gt; and &lt;code&gt;mark_unique()&lt;/code&gt; methods. Let's see what they do.&lt;/p&gt;
&lt;p&gt;b is an instance of the &lt;code&gt;Bitmapist&lt;/code&gt; class. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;bitmapist4&lt;/span&gt;

&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bitmapist4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Bitmapist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prefix_key&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;kkbox__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The prefix key is a string that will be added to the redis key. The default value is &lt;code&gt;bitmapist_&lt;/code&gt;, but if you want to track multiple applications, you could differentiate them with the prefix.&lt;/p&gt;
&lt;h4&gt;mark_event()&lt;/h4&gt;
&lt;p&gt;The &lt;code&gt;mark_event()&lt;/code&gt; method let us record that an event has happened at a certain time. It takes the following arguments:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;event_name&lt;/code&gt; (string): the name of the event you are recording (e.g. 'active')&lt;/li&gt;
&lt;li&gt;&lt;code&gt;uuid&lt;/code&gt; (integer): the id of the user. &lt;/li&gt;
&lt;li&gt;&lt;code&gt;timestamp&lt;/code&gt; (datetime): the time at which the event happened. If ignored, it will be marked now in UTC timezone (&lt;code&gt;datetime.datetime.utcnow()&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;track_hourly&lt;/code&gt; (boolean): the default is False, but you can set it to True if you want to track hourly events. &lt;/li&gt;
&lt;li&gt;&lt;code&gt;track_unique&lt;/code&gt; (boolean):  set to True if you want to also mark the unique event. For example, you want to track usage of a feature. Every time someone used that feature, you will mark the event at the day the feature was used (e.g. set the bit to 1 for id 123 for key &lt;code&gt;feature_used:2019-03-01&lt;/code&gt;). That way, you can track who used the feature on any given day. But you may also want to know who ever used this feature. This data is not time specific. In this case, you set &lt;code&gt;track_unique&lt;/code&gt; to &lt;code&gt;True&lt;/code&gt; and the event is also recorded without the timestamp (e.g. set the bit to 1 for id 123 for key &lt;code&gt;feature_used&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When you mark an event with a timestamp, Bitmapist will automatically save the event for the month, week and day. Which mean that you don't have to aggregate the data later using bit operations. &lt;/p&gt;
&lt;h4&gt;mark_unique()&lt;/h4&gt;
&lt;p&gt;The &lt;code&gt;mark_unique()&lt;/code&gt; method only takes the &lt;code&gt;event_name&lt;/code&gt; and &lt;code&gt;uuid&lt;/code&gt; arguments. It is used to save events for which the time is not important. In our example, I marked the registration method as a unique event because all I want to know is how the user registered, I don't care about the date (it was saved with the &lt;em&gt;registered&lt;/em&gt; event).&lt;/p&gt;
&lt;h2&gt;Analytics&lt;/h2&gt;
&lt;p&gt;Now that our data is saved in our bitmapist server, we can start the fun part: data analysis!&lt;/p&gt;
&lt;h3&gt;Users Activity&lt;/h3&gt;
&lt;h4&gt;Daily Active Users (DAU)&lt;/h4&gt;
&lt;p&gt;I can get the number of users active on any given day using &lt;code&gt;DayEvents()&lt;/code&gt; with the &lt;code&gt;active&lt;/code&gt; event name.&lt;/p&gt;
&lt;p&gt;There are two ways to extract the information for a specific date:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# set up the date to April 3rd, 2016&lt;/span&gt;
&lt;span class="n"&gt;date&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# method one&lt;/span&gt;
&lt;span class="n"&gt;dau&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DayEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dau&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;There were &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; users active on April 3rd, 2016.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# method two&lt;/span&gt;
&lt;span class="n"&gt;dau&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DayEvents&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;from_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dau&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;There were &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; users active on April 3rd, 2016.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;There were 62,507 users active on April 3rd, 2016.
There were 62,507 users active on April 3rd, 2016.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Weekly Active User (WAU)&lt;/h4&gt;
&lt;p&gt;The same way I could extract the number of users active on a given day, I can also extract the users active on a specific week. Remember that when we marked the event, bitmapist automatically saved the weekly and monthly data. So I just have to use &lt;code&gt;WeekEvents()&lt;/code&gt; with the &lt;code&gt;active&lt;/code&gt; event name.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;wau&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WeekEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# 14 is the week number&lt;/span&gt;
&lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;wau&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;WeekEvents&lt;/code&gt; class takes a &lt;code&gt;year&lt;/code&gt; and a &lt;code&gt;week&lt;/code&gt; arguments. If you don't have the week number, you can use the &lt;code&gt;from_date()&lt;/code&gt; classmethod instead of extracting the week number from the date by yourself:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;wau&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WeekEvents&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;from_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;wau&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;There were &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; users active on week 13 of 2016.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;There were 156,759 users active on week 13 of 2016.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If we don't provide the date, bitmapist will return the data for now. That means we would have live data about how many users were active today, this week, this month, ...&lt;/p&gt;
&lt;h4&gt;Retention&lt;/h4&gt;
&lt;p&gt;As we saw earlier, the retention is the percentage of users active during a period and that were also active the following one. In the example I used, we looked at the retention rate between week 10 and 11. Let's see how we could get this information with bitmapist:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;active_w10&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WeekEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;active_W10_w11&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;active_w10&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WeekEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;retention&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;active_W10_w11&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;active_w10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;retention&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;.0f&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt;% of users active in week 10 were still active in week 11.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;47% of users active in week 10 were still active in week 11.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To get the number of users active both week, I used the &lt;code&gt;&amp;amp;&lt;/code&gt; operator. Bitmapist let us use such operators to compare or combine bitmaps. Let's have a look.&lt;/p&gt;
&lt;h4&gt;Bit operations&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;NOT (~)&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Not active in January&lt;/span&gt;
&lt;span class="n"&gt;jan_inactives&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;jan_inactives&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; users were not active in January 2016.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;6,360,354 users were not active in January 2016.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;AND (&amp;amp;)&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# active in both January and February&lt;/span&gt;
&lt;span class="n"&gt;jan_and_feb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;jan_and_feb&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; users were active in January and February 2016.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;127,278 users were active in January and February 2016.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can also combine operators.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# active one month but not the following one&lt;/span&gt;
&lt;span class="n"&gt;jan_not_feb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;jan_not_feb&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; users were active in January 2016 but not active in February.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;281,840 users were active in January 2016 but not active in February.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;OR (|)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;We don't have quarters data in Bitmapist. We can use the OR operator to aggregate it ourselves:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# active in quarter 1&lt;/span&gt;
&lt;span class="n"&gt;actives_q1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; \
             &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; \
             &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;actives_q1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; users were active during the first quarter of 2016.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;810,499 users were active during the first quarter of 2016.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Churn&lt;/h4&gt;
&lt;p&gt;Let's look now at how bitmapist can help us get the churn between Q1 and Q2. The active users in Q1 are all the users that were active during one the three months of the quarter. I'll use the &lt;code&gt;|&lt;/code&gt; (OR) operator. I also need to know which users were not active during the second quarter. Those are the users who were not active in any month of the quarter. I'll use the &lt;code&gt;~&lt;/code&gt; (NOT) operator to get the inactive users of each month and the &lt;code&gt;&amp;amp;&lt;/code&gt; (AND) operator to aggregate the three months activity.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;actives_q1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; \
             &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; \
             &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 

&lt;span class="n"&gt;inactives_q2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; \
               &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; \
               &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 

&lt;span class="n"&gt;churn_q2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;actives_q1&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;inactives_q2&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;churn_q2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; users churned in the second quarter.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;210,409 users churned in the second quarter.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Cohort analysis&lt;/h3&gt;
&lt;p&gt;Bitmapist also has a &lt;code&gt;cohort&lt;/code&gt; module that does all the heavy work for us. &lt;/p&gt;
&lt;p&gt;First, I get ready...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;bitmapist4&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Bitmapist&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cohort&lt;/span&gt;

&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Bitmapist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key_prefix&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;kkbox_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then I get my cohort table. The &lt;code&gt;cohort&lt;/code&gt; module has a &lt;code&gt;get_cohort_table()&lt;/code&gt; method.
We need to provide the cohort and the activity. The cohort is how we group the users (e.g. registration date)  and the activity is what we are tracking (e.g. the active event).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;table_pct&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cohort&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_cohort_table&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;registered&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                                    &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                                    &lt;span class="n"&gt;rows&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;39&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;table_pct&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;CohortTable([
  CohortRow(&amp;#39;01 Jan 2016&amp;#39;, 253156, [13.738564363475485, 6.1945993774589585, 5.25328256095056, 5.003239109481901, 5.020619696945757, 4.761490938393718, 4.838123528575266, 4.733444990440677, 4.597955410892888, 4.7117192561108565, 4.7373951239551895, 4.634691652577857, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]),
  CohortRow(&amp;#39;01 Feb 2016&amp;#39;, 208170, [13.772877936302061, 7.072104529951482, 5.54834990632656, 5.474852284190805, 5.145794302733343, 5.092472498438776, 5.010328097228227, 4.960368929240524, 5.049718979680069, 5.022337512609886, 4.959888552625258, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]),
  CohortRow(&amp;#39;01 Mar 2016&amp;#39;, 195618, [13.599464261979982, 6.271406516782709, 5.1667024506947214, 4.843623797401057, 4.732693310431555, 4.630453230275332, 4.580866791399565, 4.66572605792923, 4.756208528867487, 4.539970759337075, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]),
 ...
   CohortRow(&amp;#39;01 Jan 2019&amp;#39;, 0, [0, 0, 0]),
   CohortRow(&amp;#39;01 Feb 2019&amp;#39;, 0, [0, 0]),
   CohortRow(&amp;#39;01 Mar 2019&amp;#39;, 0, [0])])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I am just showing the first  and last three rows. The &lt;code&gt;nrows&lt;/code&gt; arguments set how many rows the table has.  We can see that the last row of the table is March 2019. This is the time at which the table starts. So if I want to make a cohort analysis on my data, I need to set &lt;code&gt;row=39&lt;/code&gt; so that the table has enough rows to include the 2016 cohorts.&lt;/p&gt;
&lt;p&gt;The data is not easy to read. We can convert it into a DataFrame using the &lt;code&gt;df()&lt;/code&gt; method. I also keep only the useful rows using &lt;code&gt;.iloc[:12]&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;table_pct&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;cohort&lt;/th&gt;
&lt;th&gt;0&lt;/th&gt;
&lt;th&gt;1&lt;/th&gt;
&lt;th&gt;2&lt;/th&gt;
&lt;th&gt;3&lt;/th&gt;
&lt;th&gt;4&lt;/th&gt;
&lt;th&gt;5&lt;/th&gt;
&lt;th&gt;6&lt;/th&gt;
&lt;th&gt;7&lt;/th&gt;
&lt;th&gt;8&lt;/th&gt;
&lt;th&gt;...&lt;/th&gt;
&lt;th&gt;29&lt;/th&gt;
&lt;th&gt;30&lt;/th&gt;
&lt;th&gt;31&lt;/th&gt;
&lt;th&gt;32&lt;/th&gt;
&lt;th&gt;33&lt;/th&gt;
&lt;th&gt;34&lt;/th&gt;
&lt;th&gt;35&lt;/th&gt;
&lt;th&gt;36&lt;/th&gt;
&lt;th&gt;37&lt;/th&gt;
&lt;th&gt;38&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;01 Jan 2016&lt;/td&gt;
&lt;td&gt;253156&lt;/td&gt;
&lt;td&gt;13.738564&lt;/td&gt;
&lt;td&gt;6.194599&lt;/td&gt;
&lt;td&gt;5.253283&lt;/td&gt;
&lt;td&gt;5.003239&lt;/td&gt;
&lt;td&gt;5.020620&lt;/td&gt;
&lt;td&gt;4.761491&lt;/td&gt;
&lt;td&gt;4.838124&lt;/td&gt;
&lt;td&gt;4.733445&lt;/td&gt;
&lt;td&gt;4.597955&lt;/td&gt;
&lt;td&gt;...&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;01 Feb 2016&lt;/td&gt;
&lt;td&gt;208170&lt;/td&gt;
&lt;td&gt;13.772878&lt;/td&gt;
&lt;td&gt;7.072105&lt;/td&gt;
&lt;td&gt;5.548350&lt;/td&gt;
&lt;td&gt;5.474852&lt;/td&gt;
&lt;td&gt;5.145794&lt;/td&gt;
&lt;td&gt;5.092472&lt;/td&gt;
&lt;td&gt;5.010328&lt;/td&gt;
&lt;td&gt;4.960369&lt;/td&gt;
&lt;td&gt;5.049719&lt;/td&gt;
&lt;td&gt;...&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;NaN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;01 Mar 2016&lt;/td&gt;
&lt;td&gt;195618&lt;/td&gt;
&lt;td&gt;13.599464&lt;/td&gt;
&lt;td&gt;6.271407&lt;/td&gt;
&lt;td&gt;5.166702&lt;/td&gt;
&lt;td&gt;4.843624&lt;/td&gt;
&lt;td&gt;4.732693&lt;/td&gt;
&lt;td&gt;4.630453&lt;/td&gt;
&lt;td&gt;4.580867&lt;/td&gt;
&lt;td&gt;4.665726&lt;/td&gt;
&lt;td&gt;4.756209&lt;/td&gt;
&lt;td&gt;...&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;NaN&lt;/td&gt;
&lt;td&gt;NaN&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;That's better, but what do those numbers mean?&lt;/p&gt;
&lt;p&gt;The index identify the cohort. The first row is for the users who registered in January 2016. 
The cohort column gives us the size of the cohort (i.e. how many users registered that month):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# registered in January&lt;/span&gt;
&lt;span class="n"&gt;january&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;registered&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;january&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; users registered in January&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;253,156 users registered in January
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The following columns give us the percentage of users from that cohort who are active for this period. For the January cohort, 0 is January, 1 is February and so on. For the February cohort, 0 is February, 1 is March, ... :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# how many users were active in January&lt;/span&gt;
&lt;span class="n"&gt;active_jan&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;january&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;year&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;month&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;active_jan_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;active_jan&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;active_jan_pct&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;active_jan_num&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;january&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;active_jan_num&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; of those users were active the same month. That is &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;active_jan_pct&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;.6f&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt; percents.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;34,780 of those users were active the same month. That is 13.738564 percents.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This &lt;code&gt;13.738564&lt;/code&gt; percents is the number we can read in the column 1 of the January cohort row.:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;cohort&lt;/th&gt;
&lt;th&gt;0&lt;/th&gt;
&lt;th&gt;1&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;01 Jan 2016&lt;/td&gt;
&lt;td&gt;253156&lt;/td&gt;
&lt;td&gt;13.738564&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;If you need users count instead of percentages, you can set the &lt;code&gt;user_percent&lt;/code&gt; parameter to False.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;table_cnt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cohort&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_cohort_table&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;registered&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                                &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                                &lt;span class="n"&gt;rows&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;39&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="n"&gt;use_percent&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;table_cnt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;cohort&lt;/th&gt;
&lt;th&gt;0&lt;/th&gt;
&lt;th&gt;1&lt;/th&gt;
&lt;th&gt;2&lt;/th&gt;
&lt;th&gt;3&lt;/th&gt;
&lt;th&gt;4&lt;/th&gt;
&lt;th&gt;5&lt;/th&gt;
&lt;th&gt;6&lt;/th&gt;
&lt;th&gt;7&lt;/th&gt;
&lt;th&gt;8&lt;/th&gt;
&lt;th&gt;...&lt;/th&gt;
&lt;th&gt;29&lt;/th&gt;
&lt;th&gt;30&lt;/th&gt;
&lt;th&gt;31&lt;/th&gt;
&lt;th&gt;32&lt;/th&gt;
&lt;th&gt;33&lt;/th&gt;
&lt;th&gt;34&lt;/th&gt;
&lt;th&gt;35&lt;/th&gt;
&lt;th&gt;36&lt;/th&gt;
&lt;th&gt;37&lt;/th&gt;
&lt;th&gt;38&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;01 Jan 2016&lt;/td&gt;
&lt;td&gt;253156&lt;/td&gt;
&lt;td&gt;34780&lt;/td&gt;
&lt;td&gt;15682.0&lt;/td&gt;
&lt;td&gt;13299.0&lt;/td&gt;
&lt;td&gt;12666.0&lt;/td&gt;
&lt;td&gt;12710.0&lt;/td&gt;
&lt;td&gt;12054.0&lt;/td&gt;
&lt;td&gt;12248.0&lt;/td&gt;
&lt;td&gt;11983.0&lt;/td&gt;
&lt;td&gt;11640.0&lt;/td&gt;
&lt;td&gt;...&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;01 Feb 2016&lt;/td&gt;
&lt;td&gt;208170&lt;/td&gt;
&lt;td&gt;28671&lt;/td&gt;
&lt;td&gt;14722.0&lt;/td&gt;
&lt;td&gt;11550.0&lt;/td&gt;
&lt;td&gt;11397.0&lt;/td&gt;
&lt;td&gt;10712.0&lt;/td&gt;
&lt;td&gt;10601.0&lt;/td&gt;
&lt;td&gt;10430.0&lt;/td&gt;
&lt;td&gt;10326.0&lt;/td&gt;
&lt;td&gt;10512.0&lt;/td&gt;
&lt;td&gt;...&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;NaN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;01 Mar 2016&lt;/td&gt;
&lt;td&gt;195618&lt;/td&gt;
&lt;td&gt;26603&lt;/td&gt;
&lt;td&gt;12268.0&lt;/td&gt;
&lt;td&gt;10107.0&lt;/td&gt;
&lt;td&gt;9475.0&lt;/td&gt;
&lt;td&gt;9258.0&lt;/td&gt;
&lt;td&gt;9058.0&lt;/td&gt;
&lt;td&gt;8961.0&lt;/td&gt;
&lt;td&gt;9127.0&lt;/td&gt;
&lt;td&gt;9304.0&lt;/td&gt;
&lt;td&gt;...&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;0.0&lt;/td&gt;
&lt;td&gt;NaN&lt;/td&gt;
&lt;td&gt;NaN&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;We can improve the display further using the &lt;code&gt;stylize()&lt;/code&gt; method. It will format the percentages correctly and highlight some data.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;cohort&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stylize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="stylized df" src="images/bitmapist_stylized_df.png"&gt;&lt;/p&gt;
&lt;h4&gt;Visualize our cohorts&lt;/h4&gt;
&lt;p&gt;Now that our cohort data is stored in a dataframe, it is easy to create visualizations from it.&lt;/p&gt;
&lt;h5&gt;Cohort heatmap&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;months&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1900&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strftime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;%b&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;im&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;imshow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cohorts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;cmap&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Blues&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_yticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;months&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticklabels&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cohorts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_yticklabels&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;months&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cohorts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;dimgrey&amp;#39;&lt;/span&gt;
        &lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;.1f&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;ha&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;center&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;va&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;center&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;months&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;cohorts&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Cohort Analysis for 2016&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="cohort heatmap" src="/images/bitmapist_cohort_heatmap.jpg"&gt;&lt;/p&gt;
&lt;h5&gt;Cohorts Plots&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cohorts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:]&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;months&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;legend&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;months&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;% o&lt;/span&gt;&lt;span class="s1"&gt;f active users&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Cohort Analysis for 2016&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="cohorts plots" src="/images/bitmapist_cohorts_plots.jpg"&gt;&lt;/p&gt;
&lt;h2&gt;Registration methods cohorts&lt;/h2&gt;
&lt;p&gt;We are now going to use bitmapist to run a cohort analysis where we group users by registration method. We want to know what method has the highest user retention. &lt;/p&gt;
&lt;p&gt;First, I need to get all the registration methods. Bitmapist has a method to extract all the events that have been saved: &lt;code&gt;get_event_names()&lt;/code&gt;.  The registration method was saved as a unique event. Getting all the events names will give me the registration methods.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_event_names&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;[&amp;#39;active&amp;#39;,
 &amp;#39;registered&amp;#39;,
 &amp;#39;registered_via:-1&amp;#39;,
 &amp;#39;registered_via:1&amp;#39;,
 &amp;#39;registered_via:10&amp;#39;,
 &amp;#39;registered_via:11&amp;#39;,
 &amp;#39;registered_via:13&amp;#39;,
 &amp;#39;registered_via:14&amp;#39;,
 &amp;#39;registered_via:16&amp;#39;,
 &amp;#39;registered_via:17&amp;#39;,
 &amp;#39;registered_via:18&amp;#39;,
 &amp;#39;registered_via:19&amp;#39;,
 &amp;#39;registered_via:2&amp;#39;,
 &amp;#39;registered_via:3&amp;#39;,
 &amp;#39;registered_via:4&amp;#39;,
 &amp;#39;registered_via:5&amp;#39;,
 &amp;#39;registered_via:6&amp;#39;,
 &amp;#39;registered_via:7&amp;#39;,
 &amp;#39;registered_via:8&amp;#39;,
 &amp;#39;registered_via:9&amp;#39;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;All I have to do now is extract the number from the &lt;code&gt;registered_via:#&lt;/code&gt; events.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;registration_methods&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_event_names&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;:&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;[&amp;#39;-1&amp;#39;,
 &amp;#39;1&amp;#39;,
 &amp;#39;10&amp;#39;,
 &amp;#39;11&amp;#39;,
 &amp;#39;13&amp;#39;,
 &amp;#39;14&amp;#39;,
 &amp;#39;16&amp;#39;,
 &amp;#39;17&amp;#39;,
 &amp;#39;18&amp;#39;,
 &amp;#39;19&amp;#39;,
 &amp;#39;2&amp;#39;,
 &amp;#39;3&amp;#39;,
 &amp;#39;4&amp;#39;,
 &amp;#39;5&amp;#39;,
 &amp;#39;6&amp;#39;,
 &amp;#39;7&amp;#39;,
 &amp;#39;8&amp;#39;,
 &amp;#39;9&amp;#39;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Next, as I only saved the activity data for 2016, I am only going to consider the users who registered in 2016. I create a &lt;code&gt;base_users&lt;/code&gt; bitmap:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;base_users&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;YearEvent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;registered&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Before going further, I want to have a look at how many user used each method to register.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;users_count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;UniqueEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;registered_via:&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;base_users&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;registration_methods&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;methods&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;registration_methods&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                   &lt;span class="s1"&gt;&amp;#39;users_count&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;users_count&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sort_values&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;users_count&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ascending&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;methods&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="methods users count" src="/images/bitmapist_methods_users-count.jpg"&gt;&lt;/p&gt;
&lt;p&gt;I used the &lt;code&gt;AND&lt;/code&gt; operator to limit the registrations to 2016 : &lt;code&gt;b.UniqueEvents(f'registered_via:{m}') &amp;amp; base_users&lt;/code&gt;. 
Most users registered via method 4. After that, some users registered via methods 7, 9, 3. I will ignore the other methods in the following analysis. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# I create a matrix where I&amp;#39;ll store the data that&lt;/span&gt;
&lt;span class="c1"&gt;# I&amp;#39;ll use later to generate a dataframe&lt;/span&gt;
&lt;span class="n"&gt;matrix&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

&lt;span class="c1"&gt;# I&amp;#39;ll add one row per method to the matrix.&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
    &lt;span class="c1"&gt;# The first element of the row is the name of the cohort.&lt;/span&gt;
    &lt;span class="c1"&gt;# Here, I use the registration method.&lt;/span&gt;
    &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="c1"&gt;# The next element is the number of users who registered &lt;/span&gt;
    &lt;span class="c1"&gt;# using this method in 2016. &lt;/span&gt;
    &lt;span class="n"&gt;users&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;UniqueEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;registered_via:&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;base_users&lt;/span&gt;
    &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;users&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="c1"&gt;# The following cells are the percentage of users that are active&lt;/span&gt;
    &lt;span class="c1"&gt;# n months after their registration, n being the period.&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;period&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;actives&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;users&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
                      &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;registered&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;month&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; 
                      &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MonthEvents&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;active&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;month&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;period&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;month&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; 
        &lt;span class="n"&gt;pct_active&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;actives&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;actives&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pct_active&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;matrix&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;columns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;method&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;users_count&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;method&lt;/th&gt;
&lt;th&gt;users_count&lt;/th&gt;
&lt;th&gt;0&lt;/th&gt;
&lt;th&gt;1&lt;/th&gt;
&lt;th&gt;2&lt;/th&gt;
&lt;th&gt;3&lt;/th&gt;
&lt;th&gt;4&lt;/th&gt;
&lt;th&gt;5&lt;/th&gt;
&lt;th&gt;6&lt;/th&gt;
&lt;th&gt;7&lt;/th&gt;
&lt;th&gt;8&lt;/th&gt;
&lt;th&gt;9&lt;/th&gt;
&lt;th&gt;10&lt;/th&gt;
&lt;th&gt;11&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;84791&lt;/td&gt;
&lt;td&gt;14.572301&lt;/td&gt;
&lt;td&gt;8.024437&lt;/td&gt;
&lt;td&gt;5.762404&lt;/td&gt;
&lt;td&gt;4.823625&lt;/td&gt;
&lt;td&gt;4.213891&lt;/td&gt;
&lt;td&gt;3.515703&lt;/td&gt;
&lt;td&gt;3.001498&lt;/td&gt;
&lt;td&gt;2.549799&lt;/td&gt;
&lt;td&gt;2.171221&lt;/td&gt;
&lt;td&gt;1.763159&lt;/td&gt;
&lt;td&gt;1.142810&lt;/td&gt;
&lt;td&gt;0.622708&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;1890005&lt;/td&gt;
&lt;td&gt;12.737903&lt;/td&gt;
&lt;td&gt;2.842638&lt;/td&gt;
&lt;td&gt;1.521477&lt;/td&gt;
&lt;td&gt;1.296399&lt;/td&gt;
&lt;td&gt;1.123172&lt;/td&gt;
&lt;td&gt;0.987564&lt;/td&gt;
&lt;td&gt;0.852432&lt;/td&gt;
&lt;td&gt;0.715871&lt;/td&gt;
&lt;td&gt;0.588570&lt;/td&gt;
&lt;td&gt;0.462962&lt;/td&gt;
&lt;td&gt;0.325766&lt;/td&gt;
&lt;td&gt;0.154920&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;168888&lt;/td&gt;
&lt;td&gt;21.171427&lt;/td&gt;
&lt;td&gt;30.015750&lt;/td&gt;
&lt;td&gt;26.596324&lt;/td&gt;
&lt;td&gt;24.227891&lt;/td&gt;
&lt;td&gt;22.440315&lt;/td&gt;
&lt;td&gt;19.428852&lt;/td&gt;
&lt;td&gt;16.647719&lt;/td&gt;
&lt;td&gt;13.998034&lt;/td&gt;
&lt;td&gt;11.956445&lt;/td&gt;
&lt;td&gt;10.514068&lt;/td&gt;
&lt;td&gt;7.727014&lt;/td&gt;
&lt;td&gt;4.245417&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;90800&lt;/td&gt;
&lt;td&gt;18.244493&lt;/td&gt;
&lt;td&gt;16.658590&lt;/td&gt;
&lt;td&gt;13.555066&lt;/td&gt;
&lt;td&gt;11.843612&lt;/td&gt;
&lt;td&gt;10.251101&lt;/td&gt;
&lt;td&gt;8.642070&lt;/td&gt;
&lt;td&gt;7.219163&lt;/td&gt;
&lt;td&gt;5.938326&lt;/td&gt;
&lt;td&gt;4.606828&lt;/td&gt;
&lt;td&gt;3.592511&lt;/td&gt;
&lt;td&gt;2.359031&lt;/td&gt;
&lt;td&gt;1.219163&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;I can now create a heatmap from the dataframe to easily visualize the retention rate per registration method.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;cohorts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;method&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;periods&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

&lt;span class="n"&gt;im&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;imshow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cmap&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Blues&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_yticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cohorts&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticklabels&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;periods&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_yticklabels&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cohorts&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cohorts&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;dimgrey&amp;#39;&lt;/span&gt;
        &lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;.1f&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;ha&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;center&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;va&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;center&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;months&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;cohorts&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Cohort Analysis for 2016&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="methods cohorts heatmap" src="/images/bitmapist_methods_cohorts_heatmap.jpg"&gt;&lt;/p&gt;
&lt;p&gt;We can see that while method 4 was the most used registration method, it has the worst retention rate. This might be what pulled down the retention rate on all cohorts in the previous analysis. This would require to dig a bit deeper.&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;The slowest part of what I have done here was loading the data in the bitmapist server. It took several hours. But in a production environment, the events would be recorded has they happen. In Redis, the &lt;code&gt;SETBIT&lt;/code&gt; operation has a time complexity of O(1). It doesn't matter how large your bitmap get, setting a new bit will always require the same time.&lt;/p&gt;
&lt;p&gt;Another advantage of using bitmapist server is that I was able to load the data in my computer. Thing that I was not able to do using pandas.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Doist/bitmapist-server/blob/master/Dockerfile"&gt;bitmap-server repository&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Doist/bitmapist4"&gt;bitmapist4 repository&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://redis.io/commands"&gt;redis commands&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://redis.io/topics/pipelining"&gt;Using pipelining to speedup Redis queries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/Bitmap"&gt;Bitmap - Wikipedia article&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.kaggle.com/c/kkbox-churn-prediction-challenge"&gt;Kaggle's WSDM - KKBox's Churn Prediction Challenge&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.slideshare.net/crashlytics/crashlytics-on-redis-analytics"&gt;Scaling Crashlytics: Building Analytics on Redis 2.6&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="analytics"></category><category term="python"></category><category term="bitmap"></category><category term="redis"></category><category term="bitmapist"></category></entry><entry><title>How to set environment variables in a conda virtual environment</title><link href="https://guillaume-martin.github.io/saving-environment-variables-in-conda.html" rel="alternate"></link><published>2019-04-10T13:15:00+08:00</published><updated>2019-04-10T16:10:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2019-04-10:/saving-environment-variables-in-conda.html</id><summary type="html">&lt;p&gt;How to save environment variables in a virtual environment set using conda.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Environment variables are useful to store sensitive data like API keys or passwords when we don't want them to be hard coded in our source code. But we often only use them in some specific circumstances and don't need to have them set all the time. In this short post, I am going to show how to save environment variables in a virtual environment set using conda.&lt;/p&gt;
&lt;p&gt;First, we need to create the virtual environment using the &lt;code&gt;conda create&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ conda create --name my_environment
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This command will create a &lt;code&gt;my_environment&lt;/code&gt; subdirectory in the &lt;code&gt;anaconda3/env&lt;/code&gt; directory. &lt;/p&gt;
&lt;p&gt;Next, we activate the environment:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ &lt;span class="nb"&gt;source&lt;/span&gt; activate my_environment
&lt;span class="o"&gt;(&lt;/span&gt;my_environment&lt;span class="o"&gt;)&lt;/span&gt;$ 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now, we need to create scripts that will set our environment variables whenever we activate our virtual environment and unset them when we deactivate. The path to our environment directory is set as &lt;code&gt;$CONDA_PREFIX&lt;/code&gt;. We &lt;code&gt;cd&lt;/code&gt; to that directory and create a &lt;code&gt;/etc/conda/activate.d&lt;/code&gt; and a &lt;code&gt;/etc/conda/deactivate.d&lt;/code&gt; directory:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;(&lt;/span&gt;my_environment&lt;span class="o"&gt;)&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;$CONDA_PREFIX&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;my_environment&lt;span class="o"&gt;)&lt;/span&gt;$ mkdir -p ./etc/conda/activate.d
&lt;span class="o"&gt;(&lt;/span&gt;my_environment&lt;span class="o"&gt;)&lt;/span&gt;$ mkdir -p ./etc/conda/deactivate.d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In each of those directories, we create a &lt;code&gt;env_var.sh&lt;/code&gt; script where we'll write the commands to set and unset our variables:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;(&lt;/span&gt;my_environment&lt;span class="o"&gt;)&lt;/span&gt;$ touch ./etc/conda/activate.d/env_vars.sh
&lt;span class="o"&gt;(&lt;/span&gt;my_environment&lt;span class="o"&gt;)&lt;/span&gt;$ touch ./etc/conda/deactivate.d/env_vars.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In &lt;code&gt;activate.d/env_vars.sh&lt;/code&gt;, we add the &lt;code&gt;export&lt;/code&gt; commands to set our variables when the virtual environment is activated:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#!/bin/sh&lt;/span&gt;

&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;MY_VARIABLE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;some_value
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In &lt;code&gt;deactivate.d/env_vars.sh&lt;/code&gt;, we add the &lt;code&gt;unset&lt;/code&gt; commands to delete our variables when the virtual environment in deactivated.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#!/bin/sh&lt;/span&gt;

&lt;span class="nb"&gt;unset&lt;/span&gt; MY_VARIABLE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Let's test our setting. We need to reactivate our environment to get the variables set.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;(&lt;/span&gt;my_environment&lt;span class="o"&gt;)&lt;/span&gt;$ conda deactivate
$ conda activate my_environment
&lt;span class="o"&gt;(&lt;/span&gt;my_environment&lt;span class="o"&gt;)&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$MY_VARIABLE&lt;/span&gt;
some_value
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The environment variable has been set. Now, let's check if the variable is unset when we deactivate our environment:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;(&lt;/span&gt;my_environment&lt;span class="o"&gt;)&lt;/span&gt;$ conda deactivate
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$MY_VARIABLE&lt;/span&gt;

$
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;echo&lt;/code&gt; command returns an empty line, meaning that our variable has been unset.&lt;/p&gt;
&lt;p&gt;Voilà! We now have a virtual environment with it's own environment variables.&lt;/p&gt;</content><category term="Linux"></category><category term="linux"></category><category term="environment variables"></category><category term="virtual environments"></category><category term="anaconda"></category><category term="conda"></category></entry><entry><title>Makeover Monday Week 48 - 2018</title><link href="https://guillaume-martin.github.io/makeovermonday-2018wk48.html" rel="alternate"></link><published>2018-11-28T12:44:00+08:00</published><updated>2018-11-28T12:47:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2018-11-28:/makeovermonday-2018wk48.html</id><summary type="html">&lt;p&gt;Compare the cost of a night out around the world&lt;/p&gt;</summary><content type="html">&lt;p&gt;This week's challenge is to improve a data visualization that was published in an article from &lt;a href="https://www.thrillist.com/news/nation/cost-of-a-night-out-cities-around-the-world#"&gt;thrillist&lt;/a&gt;.
It shows a comparison of the cost of a night out in selected cities around the world. 
The data is available on &lt;a href="https://data.world/makeovermonday/2018w48/workspace/file?filename=Cost+of+a+night+out+around+the+world.xlsx"&gt;data.world&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;The original visualization&lt;/h2&gt;
&lt;p&gt;&lt;img alt="original" src="/images/the_price_of_a_party_around_the_world_n.jpg"&gt;&lt;/p&gt;
&lt;p&gt;The designer chose horizontal stacked bars to show the average price of a party night. There is one bar per city. The length of the bar represents the total cost of the night.&lt;br&gt;
Each bar is segmented into parts that represent the cost of the items purchased during the night: club entry, two longdrinks, a taxi ride and a Big Mac.&lt;br&gt;
The bars are usually the best choice for comparisons. we can easily compare the total price between two cities even if those cities are not next to each other on the chart. It is clear that a night out in New York is more expensive than a night out in Paris. However, I find it more challenging to compare the price of items. Are the longdrinks more expensive in New York than in Paris? &lt;/p&gt;
&lt;h2&gt;My goal&lt;/h2&gt;
&lt;p&gt;In my visualization, I want to improve the comparison of the price of the different items in each city. I also want to keep the comparison of the totals easy.&lt;br&gt;
The dataset has two categories of activity: a Date night or a Party night. I am going to show both of them.&lt;/p&gt;
&lt;h2&gt;My visualization&lt;/h2&gt;
&lt;p&gt;I keep the horizontal bars to compare the total price per city. Below the bars, I am showing a parallel coordinates graph. On the X axis, we have the items purchased during the night. On the Y axis, we have the cost. There is one line per city. 
There is a filter to select whether we want to see the data for a Date night or for a Party night.&lt;br&gt;
When we click on the bar of a city, the line in the second graph is highlighted, making it easier to compare the price of the items in this city with the price in other cities. &lt;/p&gt;
&lt;p&gt;The interactive visualization can be seen &lt;a href="https://public.tableau.com/views/makeovermonday-2018wk48/Dashboard1?:embed=y&amp;amp;:display_count=yes"&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="final" src="/images/makeovermonday_2018wk48.jpeg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="final with highlight" src="/images/makeovermonday-2018wk48-highlighted.png"&gt;&lt;/p&gt;</content><category term="visualization"></category><category term="tableau"></category><category term="visualization"></category><category term="makeovermonday"></category></entry><entry><title>How to handle JSON data in PostgreSQL</title><link href="https://guillaume-martin.github.io/how-to-handle-json-data-in-postgresql.html" rel="alternate"></link><published>2018-11-15T08:45:00+08:00</published><updated>2018-11-15T08:45:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2018-11-15:/how-to-handle-json-data-in-postgresql.html</id><summary type="html">&lt;p&gt;How to read and edit data stored as a JSON object in a PostgreSQL database.&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Introducing JSON data type&lt;/h2&gt;
&lt;p&gt;PostgreSQL introduced the JSON data type in version 9.2 and the JSONB data type in version 9.4. &lt;br&gt;
JSON (JavaScript Object Notation) is a data-interchange format designed to be easy to read and write by humans. A JSON object is an unordered set of key:value pairs that looks like &lt;code&gt;{key_1:value_1, key_2:value_2, ...}&lt;/code&gt;.
The &lt;code&gt;value&lt;/code&gt; can be a string, a number, a boolean, an object or an array.&lt;br&gt;
Here is an example of JSON object taken from the &lt;a href="https://en.wikipedia.org/wiki/JSON#Example"&gt;wikipedia&lt;/a&gt; page:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;quot;firstName&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;John&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;quot;lastName&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Smith&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;quot;isAlive&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;quot;age&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;quot;address&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;streetAddress&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;21 2nd Street&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;city&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;New York&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;state&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;NY&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;postalCode&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;10021-3100&amp;quot;&lt;/span&gt;
  &lt;span class="p"&gt;},&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;quot;phoneNumbers&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;home&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;quot;number&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;212 555-1234&amp;quot;&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;office&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;quot;number&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;646 555-4567&amp;quot;&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mobile&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;quot;number&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;123 456-7890&amp;quot;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;],&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;quot;children&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[],&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;quot;spouse&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The values or the firstName, isAlive and age keys are strings, boolean or numbers.&lt;br&gt;
The values of address is a JSON object.&lt;br&gt;
the values of phoneNumbers and children are arrays.&lt;/p&gt;
&lt;p&gt;In PostgreSQL, JSON data is stored in plain text while JSONB data is stored in some binary representation. The JSONB data type takes more disk space but is preferable when doing a lot of operations on the JSON data or when indexing the JSON column.&lt;/p&gt;
&lt;p&gt;The use of JSON data gives more flexibility as we can add and remove attributes without changing our schema by adding and deleting columns.&lt;/p&gt;
&lt;h2&gt;Setup the training database&lt;/h2&gt;
&lt;p&gt;To practice with handling JSON data, let's create a simple table &lt;code&gt;orders&lt;/code&gt; that has a &lt;code&gt;info&lt;/code&gt; column storing the orders details.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;orders&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
  &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="nb"&gt;serial&lt;/span&gt; &lt;span class="k"&gt;primary&lt;/span&gt; &lt;span class="k"&gt;key&lt;/span&gt;
  &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then, we add some data. To insert data in a JSON column, we simply insert the JSON object as a string: &lt;code&gt;'{"key":"value"}'&lt;/code&gt;. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; 
    &lt;span class="n"&gt;orders&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;VALUES&lt;/span&gt;
    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;{ &amp;quot;customer&amp;quot;: &amp;quot;Alice&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;chocolate&amp;quot;,&amp;quot;qty&amp;quot;: 6}}&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;{ &amp;quot;customer&amp;quot;: &amp;quot;Bob&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;beer&amp;quot;,&amp;quot;qty&amp;quot;: 24}}&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;{ &amp;quot;customer&amp;quot;: &amp;quot;Charlie&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;milk&amp;quot;,&amp;quot;qty&amp;quot;: 1}}&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;{ &amp;quot;customer&amp;quot;: &amp;quot;Doris&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;cheese&amp;quot;,&amp;quot;qty&amp;quot;: 2}}&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;{ &amp;quot;customer&amp;quot;: &amp;quot;Emily&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;milk&amp;quot;,&amp;quot;qty&amp;quot;: 2}}&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;{ &amp;quot;customer&amp;quot;: &amp;quot;Fabian&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;beer&amp;quot;,&amp;quot;qty&amp;quot;: 6}}&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We should now have a table where each row represents an order. The &lt;code&gt;info&lt;/code&gt; column contains all the details of the order: customer, items, product, quantity.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;tests=# SELECT * FROM orders;
 id |                                info                                
----+--------------------------------------------------------------------
  1 | { &amp;quot;customer&amp;quot;: &amp;quot;Alice&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;chocolate&amp;quot;,&amp;quot;qty&amp;quot;: 6}}
  2 | { &amp;quot;customer&amp;quot;: &amp;quot;Bob&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;beer&amp;quot;,&amp;quot;qty&amp;quot;: 24}}
  3 | { &amp;quot;customer&amp;quot;: &amp;quot;Charlie&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;milk&amp;quot;,&amp;quot;qty&amp;quot;: 1}}
  4 | { &amp;quot;customer&amp;quot;: &amp;quot;Doris&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;cheese&amp;quot;,&amp;quot;qty&amp;quot;: 2}}
  5 | { &amp;quot;customer&amp;quot;: &amp;quot;Emily&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;milk&amp;quot;,&amp;quot;qty&amp;quot;: 2}}
  6 | { &amp;quot;customer&amp;quot;: &amp;quot;Fabian&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;beer&amp;quot;,&amp;quot;qty&amp;quot;: 6}}
(6 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Select data&lt;/h2&gt;
&lt;p&gt;There are four operators that we can use in PostgreSQL to query JSON data:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-&amp;gt;&lt;/code&gt; returns JSON objects.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-&amp;gt;&amp;gt;&lt;/code&gt; returns JSON objects as text.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;#&amp;gt;&lt;/code&gt; returns JSON objects at a specified path.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;#&amp;gt;&amp;gt;&lt;/code&gt; returns JSON objects at a specified path as text.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;The &lt;code&gt;-&amp;gt;&lt;/code&gt; and &lt;code&gt;-&amp;gt;&amp;gt;&lt;/code&gt; operators&lt;/h3&gt;
&lt;p&gt;Because the &lt;code&gt;-&amp;gt;&lt;/code&gt; operator returns a JSON object, we can chain operators.&lt;br&gt;
I am going to try to select the products from the orders table using the &lt;code&gt;-&amp;gt;&amp;gt;&lt;/code&gt; operator to show the difference:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
  &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;product&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;product&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
  &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ERROR:  operator does not exist: text -&amp;gt;&amp;gt; unknown
LINE 2:   info -&amp;gt;&amp;gt; &amp;#39;items&amp;#39; -&amp;gt;&amp;gt; &amp;#39;product&amp;#39; AS product
                           ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;-&amp;gt;&amp;gt;&lt;/code&gt; operator returns items as text so we can't apply the operator &lt;code&gt;-&amp;gt;&amp;gt;&lt;/code&gt; on them. That is what &lt;code&gt;operator does not exist: text -&amp;gt;&amp;gt; unknown&lt;/code&gt; actually means.&lt;br&gt;
To get the list of products, I need to get the items as a JSON object using &lt;code&gt;-&amp;gt;&lt;/code&gt;, then I can use the &lt;code&gt;-&amp;gt;&amp;gt;&lt;/code&gt; operator to extract the products:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
  &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;product&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;product&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
  &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;  product  
-----------
 chocolate
 beer
 milk
 cheese
 milk
 beer
(6 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Note that &lt;code&gt;info -&amp;gt; 'items' -&amp;gt; 'product' AS product&lt;/code&gt; would also work.&lt;/p&gt;
&lt;h3&gt;The &lt;code&gt;#&amp;gt;&lt;/code&gt; and &lt;code&gt;#&amp;gt;&amp;gt;&lt;/code&gt; operators&lt;/h3&gt;
&lt;p&gt;When using the &lt;code&gt;-&amp;gt;&lt;/code&gt; and &lt;code&gt;-&amp;gt;&amp;gt;&lt;/code&gt; operators, I was adding the key as a text in the right operand. If I wanted to get a list of products, I had to chain the operators like this: &lt;code&gt;info -&amp;gt; 'items' -&amp;gt;&amp;gt; 'product'&lt;/code&gt;.&lt;br&gt;
Another way is to specify the path to the key I want to extract:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
  &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;#&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;{items, product}&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;product&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
  &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This query is returning the same result as &lt;code&gt;info -&amp;gt; 'items' -&amp;gt; 'product'&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;  product   
-------------
 &amp;quot;chocolate&amp;quot;
 &amp;quot;beer&amp;quot;
 &amp;quot;milk&amp;quot;
 &amp;quot;cheese&amp;quot;
 &amp;quot;beer&amp;quot;
 &amp;quot;milk&amp;quot;
(6 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;info #&amp;gt;&amp;gt; '{items, product}'&lt;/code&gt; would return the same result as &lt;code&gt;info -&amp;gt; 'items' -&amp;gt;&amp;gt; 'product'&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;jsonb_pretty&lt;/code&gt; function outputs the result in a more readable format.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;jsonb_pretty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="n"&gt;jsonb&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt;
    &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="k"&gt;LIMIT&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;          orders          
--------------------------------
 {                             +
     &amp;quot;items&amp;quot;: {                +
         &amp;quot;qty&amp;quot;: 6,             +
         &amp;quot;product&amp;quot;: &amp;quot;chocolate&amp;quot;+
     },                        +
     &amp;quot;customer&amp;quot;: &amp;quot;Alice&amp;quot;       +
 }
 {                             +
     &amp;quot;items&amp;quot;: {                +
         &amp;quot;qty&amp;quot;: 24,            +
         &amp;quot;product&amp;quot;: &amp;quot;beer&amp;quot;     +
     },                        +
     &amp;quot;customer&amp;quot;: &amp;quot;Bob&amp;quot;         +
 }
(2 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The function also works with operators:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
  &lt;span class="n"&gt;jsonb_pretty&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)::&lt;/span&gt;&lt;span class="n"&gt;jsonb&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
  &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="k"&gt;LIMIT&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;        items        
----------------------------
 {                         +
     &amp;quot;qty&amp;quot;: 6,             +
     &amp;quot;product&amp;quot;: &amp;quot;chocolate&amp;quot;+
 }
 {                         +
     &amp;quot;qty&amp;quot;: 24,            +
     &amp;quot;product&amp;quot;: &amp;quot;beer&amp;quot;     +
 }
(2 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The JSON operators can be used in other parts of a query, like we'll see in the following examples.&lt;/p&gt;
&lt;h3&gt;SELECT with WHERE clause&lt;/h3&gt;
&lt;p&gt;Let's list the customers who bought beer.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
  &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;customer&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;customer&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
  &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt;
  &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;product&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;beer&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;customer 
----------
 Bob
 Fabian
(2 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Use aggregate functions&lt;/h3&gt;
&lt;p&gt;We can also use the usual aggregate functions on JSON columns. Note that as the operators return values as text, we need to cast them as integers if we want to calculate sums, averages, etc...&lt;br&gt;
Let's get some statistics on the quantities ordered:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
  &lt;span class="k"&gt;MIN&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;qty&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)::&lt;/span&gt;&lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;mini&lt;/span&gt;
  &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;MAX&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;qty&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)::&lt;/span&gt;&lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;maxi&lt;/span&gt;
  &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;qty&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)::&lt;/span&gt;&lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;
  &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;AVG&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;qty&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)::&lt;/span&gt;&lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;average&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
  &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt; mini | maxi | total |      average       
------+------+-------+--------------------
    1 |   24 |    41 | 6.8333333333333333
(1 row)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;GROUP BY statement&lt;/h3&gt;
&lt;p&gt;Aggregates often come with a GROUP BY statement. Like for the &lt;em&gt;WHERE&lt;/em&gt; clause, we can use the &lt;code&gt;-&amp;gt;&lt;/code&gt; and &lt;code&gt;-&amp;gt;&amp;gt;&lt;/code&gt; operators in the &lt;em&gt;GROUP BY&lt;/em&gt; statement.
Let's get the total quantity ordered per product:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; 
    &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;product&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;product&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;SUM&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;qty&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)::&lt;/span&gt;&lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; 
    &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt;
    &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;product&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;  product  | total 
-----------+-------
 milk      |     3
 beer      |    30
 cheese    |     2
 chocolate |     6
(4 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;UPDATE data&lt;/h2&gt;
&lt;h3&gt;Changing an existing value&lt;/h3&gt;
&lt;p&gt;To change a value inside a JSON attribute, we can use the &lt;code&gt;jsonb_set()&lt;/code&gt; function. As it is implemented for JSONB data types only, we need to cast our JSON columns as JSONB.&lt;br&gt;
Function:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;jsonb_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;            &lt;span class="n"&gt;jsonb&lt;/span&gt;
          &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;            &lt;span class="nb"&gt;text&lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt;
          &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;new_value&lt;/span&gt;       &lt;span class="n"&gt;jsonb&lt;/span&gt;
          &lt;span class="p"&gt;[,&lt;/span&gt; &lt;span class="n"&gt;create_missing&lt;/span&gt; &lt;span class="nb"&gt;boolean&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The function will replace the section of &lt;code&gt;target&lt;/code&gt; designated by &lt;code&gt;path&lt;/code&gt; with the &lt;code&gt;new_value&lt;/code&gt;. If the section doesn't exist and &lt;code&gt;create_missing&lt;/code&gt; is set to true (default), the &lt;code&gt;new_value&lt;/code&gt; will be added.  &lt;/p&gt;
&lt;p&gt;Let's change Fabian's name to Bob&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; 
   &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="k"&gt;SET&lt;/span&gt;
  &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;jsonb_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="n"&gt;jsonb&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;{customer}&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;jsonb&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;quot;Bob&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt; 
  &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;customer&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Fabian&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;tests=# SELECT * FROM orders WHERE info -&amp;gt;&amp;gt; &amp;#39;customer&amp;#39; = &amp;#39;Bob&amp;#39;;
 id |                             info                             
----+--------------------------------------------------------------
  2 | { &amp;quot;customer&amp;quot;: &amp;quot;Bob&amp;quot;, &amp;quot;items&amp;quot;: {&amp;quot;product&amp;quot;: &amp;quot;beer&amp;quot;,&amp;quot;qty&amp;quot;: 24}}
  6 | {&amp;quot;items&amp;quot;: {&amp;quot;qty&amp;quot;: 6, &amp;quot;product&amp;quot;: &amp;quot;beer&amp;quot;}, &amp;quot;customer&amp;quot;: &amp;quot;Bob&amp;quot;}
(2 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We now have two customers named Bob. Note that because the keys in the JSON data are not sorted, the two records look different.&lt;/p&gt;
&lt;p&gt;Using the &lt;code&gt;path&lt;/code&gt; parameter, we can update data deeper into the JSON hierarchy.&lt;br&gt;
For example, let's set the quantity of cheese bought by Doris to three:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; 
   &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="k"&gt;SET&lt;/span&gt;
  &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;jsonb_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="n"&gt;jsonb&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;{items,qty}&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;jsonb&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt; 
  &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;customer&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Doris&amp;#39;&lt;/span&gt;
  &lt;span class="k"&gt;AND&lt;/span&gt; &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;product&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;cheese&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;tests=# SELECT * FROM orders WHERE info -&amp;gt;&amp;gt; &amp;#39;customer&amp;#39; = &amp;#39;Doris&amp;#39;;
 id |                              info                               
----+-----------------------------------------------------------------
  4 | {&amp;quot;items&amp;quot;: {&amp;quot;qty&amp;quot;: 3, &amp;quot;product&amp;quot;: &amp;quot;cheese&amp;quot;}, &amp;quot;customer&amp;quot;: &amp;quot;Doris&amp;quot;}
(1 row)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Creating a new key&lt;/h3&gt;
&lt;p&gt;Let's say that I want to add a unit_price to the items.
We can use the &lt;code&gt;jsonb_insert&lt;/code&gt; function that was introduced in 9.6.&lt;br&gt;
Function:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;jsonb_insert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;          &lt;span class="n"&gt;jsonb&lt;/span&gt;
             &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;          &lt;span class="nb"&gt;text&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;
             &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;new_value&lt;/span&gt;     &lt;span class="n"&gt;jsonb&lt;/span&gt;
             &lt;span class="p"&gt;[,&lt;/span&gt; &lt;span class="n"&gt;insert_after&lt;/span&gt; &lt;span class="nb"&gt;boolean&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;new_value&lt;/code&gt; will be inserted in the &lt;code&gt;target&lt;/code&gt; in the section designated by &lt;code&gt;path&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I am going to add 5 as the unit_price of chocolate.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt;
    &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="k"&gt;SET&lt;/span&gt; 
    &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;jsonb_insert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="n"&gt;jsonb&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;{items,unit_price}&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;jsonb&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;5&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt; 
    &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;items&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;product&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;chocolate&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;tests=# SELECT * FROM orders WHERE info -&amp;gt; &amp;#39;items&amp;#39; -&amp;gt;&amp;gt; &amp;#39;product&amp;#39; = &amp;#39;chocolate&amp;#39;;
 id |                                info                                
----+--------------------------------------------------------------------
  1 | {&amp;quot;items&amp;quot;: {&amp;quot;qty&amp;quot;: 6, &amp;quot;product&amp;quot;: &amp;quot;chocolate&amp;quot;, &amp;quot;unit_price&amp;quot;: 5}, &amp;quot;customer&amp;quot;: &amp;quot;Alice&amp;quot;}
(1 row)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I have now a new attribute that I was able to add without modifying my schema. This is one of the main advantages of using JSON data, it allows for more flexibility. I also added a new attribute to one record without impacting the other records.&lt;/p&gt;
&lt;h3&gt;Removing a key&lt;/h3&gt;
&lt;p&gt;Removing a key from a JSON object is very easy and doesn't require the use of a function. If I cast my data as JSONB, I can simply remove the key by typing &lt;code&gt;column = column - key&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; 
  &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;span class="k"&gt;SET&lt;/span&gt; 
  &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="n"&gt;jsonb&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;customer&amp;#39;&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt;
  &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;customer&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Emily&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;tests=# SELECT * FROM orders WHERE id = 5;
 id |                   info                   
----+------------------------------------------
  5 | {&amp;quot;items&amp;quot;: {&amp;quot;qty&amp;quot;: 2, &amp;quot;product&amp;quot;: &amp;quot;milk&amp;quot;}}
(1 row)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The record doesn't have a customer anymore.&lt;/p&gt;
&lt;h2&gt;Further reading&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://json.org/"&gt;json.org&lt;/a&gt;&lt;br&gt;
&lt;a href="https://en.wikipedia.org/wiki/JSON"&gt;JSON wikipedia article&lt;/a&gt;&lt;br&gt;
&lt;a href="https://stackoverflow.com/a/22910602"&gt;Explanation of JSONB introduced by PostgreSQL&lt;/a&gt;&lt;br&gt;
&lt;a href="https://www.postgresql.org/docs/11/functions-json.html"&gt;PostgreSQL JSON Fonctions and Operators&lt;/a&gt;&lt;/p&gt;</content><category term="Database"></category><category term="json"></category><category term="sql"></category><category term="postgresql"></category><category term="database"></category></entry><entry><title>"The best stats you've ever seen" with Matplotlib</title><link href="https://guillaume-martin.github.io/best-stats-anim.html" rel="alternate"></link><published>2018-07-12T13:00:00+08:00</published><updated>2018-07-12T19:30:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2018-07-12:/best-stats-anim.html</id><summary type="html">&lt;p&gt;Using Matplotlib to replicate a visualization presented by Hans Rosling in a TED talk.&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;In a TED talk titled &lt;em&gt;"The best stats you've ever seen"&lt;/em&gt; he gave in 2006, Hans Rosling showed the audience how we can use statistics to debunk misconceptions about the world.&lt;br&gt;
His talk can be seen &lt;a href="https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen"&gt;here&lt;/a&gt;. It's only 20 minutes long and if you haven't seen it yet, you really should.  &lt;/p&gt;
&lt;p&gt;In this post, I am going to use Matplotlib to replicate the animation he shows at the beginning of his talk. It shows the evolution of the fertility rate and the life expectancy of countries over the years. Hans Rosling built this animation when, after testing his students on global health, he realized that they still thought that the world was divided in two: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the western world: low fertility rate and high life expectancy&lt;/li&gt;
&lt;li&gt;the third world: high fertility rate and low life expectancy&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There will be some differences between the original visualization and the one I am going to build:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;more data. The talk was made in 2006 with data from 1962 to 2003. I will use data from 1960 to 2016.&lt;/li&gt;
&lt;li&gt;regions. The original visualization has five regions. I will keep the regions from the source data (i.e. seven regions).&lt;/li&gt;
&lt;li&gt;colors. I can't ge the exact colors of the regions. I'll use my own color mapping.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Preparing the data&lt;/h2&gt;
&lt;p&gt;The data was downloaded from &lt;a href="https://data.worldbank.org/"&gt;data.worldbank.org&lt;/a&gt; on June 28th, 2018. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://data.worldbank.org/indicator/SP.DYN.LE00.IN"&gt;life expentancy at birth&lt;/a&gt;: number of years a newborn would live if the patterns of mortality at the time of birth remain the same throughout his life.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://data.worldbank.org/indicator/SP.DYN.TFRT.IN"&gt;Fertility rate&lt;/a&gt;: number of children a woman would give birth to during her childbearing years.  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://data.worldbank.org/indicator/SP.POP.TOTL"&gt;Country population&lt;/a&gt;: total number of residents regardless of legal status or citizenship (midyear estimates)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The countries metadata is included in the downloaded zip files. It will be used to get the region of the countries. Countries are grouped in seven regions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;East Asia &amp;amp; Pacific&lt;/li&gt;
&lt;li&gt;Europe &amp;amp; Central Asia&lt;/li&gt;
&lt;li&gt;Latin America &amp;amp; Caribbean&lt;/li&gt;
&lt;li&gt;Middle East &amp;amp; North Africa&lt;/li&gt;
&lt;li&gt;North America&lt;/li&gt;
&lt;li&gt;South Asia&lt;/li&gt;
&lt;li&gt;Sub-Saharan Africa&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I use &lt;code&gt;pandas&lt;/code&gt; to import the data and compile a dataframe with which I will generate the visualization.&lt;br&gt;
I use &lt;code&gt;numpy&lt;/code&gt; to execute some operations on the data.&lt;br&gt;
I use &lt;code&gt;pyplot&lt;/code&gt; and &lt;code&gt;animation&lt;/code&gt; from &lt;code&gt;matplotlib&lt;/code&gt; to generate the visualization.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.animation&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;animation&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I import the data in separate dataframes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;country&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;country_metadata.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;population&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;country_population.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;skiprows&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;fertility_rate&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fertility_rate.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;skiprows&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;life_expectancy&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;life_expectancy.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;skiprows&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;All tables have a &lt;code&gt;Country Name&lt;/code&gt; and a &lt;code&gt;Country Code&lt;/code&gt; column. I'll use the &lt;code&gt;Country Code&lt;/code&gt; column as the country id to merge the datasets.&lt;br&gt;
So from the country dataframe, I need only the Country Code and Region columns.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;country&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;country&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Country Code&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Region&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;em&gt;population&lt;/em&gt;, &lt;em&gt;fertility_rate&lt;/em&gt; and &lt;em&gt;life_expectancy&lt;/em&gt; dataframes have the same structure. I'll repeat the same process on three of them to prepare the data.&lt;br&gt;
First, I remove useless columns:  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;population&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;drop&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Country Name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Indicator Name&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Indicator Code&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                 &lt;span class="s1"&gt;&amp;#39;2017&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Unnamed: 62&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;inplace&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Next, I drop the countries with missing values. I could try to fill data missing in any given year with the data from the previous or next year but some countries are missing too much if not all data.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;population&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dropna&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;inplace&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The years are in columns (i.e. one column represents the data of all countries for a given year). I need &lt;code&gt;year&lt;/code&gt; to be a variable that has its own column. To do so, I'll use the &lt;code&gt;melt()&lt;/code&gt; method on the dataframe.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;years&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1960&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2017&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="n"&gt;population&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;melt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;population&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                     &lt;span class="n"&gt;id_vars&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Country Code&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                     &lt;span class="n"&gt;value_vars&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;years&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                     &lt;span class="n"&gt;var_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Year&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                     &lt;span class="n"&gt;value_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Population&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;At this point, the &lt;em&gt;population&lt;/em&gt; data is ready. I preprocess the &lt;em&gt;fertility_rate&lt;/em&gt; and the &lt;em&gt;life_expectancy&lt;/em&gt; the same way.&lt;br&gt;
When the three datasets are ready, I merge them into one dataframe.&lt;br&gt;
Some countries may have data for one statistic but not the other. After merging the dataframes, I do a &lt;code&gt;dropna()&lt;/code&gt; again to remove those cases.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;merge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;country&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;population&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;how&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Country Code&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;merge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;life_exp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;how&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Country Code&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Year&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;merge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fertility_rate&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;how&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Country Code&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Year&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dropna&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;inplace&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The data is ready. I can now start builing the visualization.  &lt;/p&gt;
&lt;h2&gt;Building the visualization&lt;/h2&gt;
&lt;p&gt;The visualization consist of a scatter plot with the &lt;em&gt;fertility rate&lt;/em&gt; on the X axis and the &lt;em&gt;life expectancy&lt;/em&gt; on the Y axis. The size of the markers is set by the &lt;em&gt;population&lt;/em&gt;. The higher the population, the bigger the marker.&lt;br&gt;
I group the data by region and draw one scatter plot by region.&lt;br&gt;
To show an example, I am going to plot the data for the year 1960.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Fertility Rate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Fertility Rate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Life Expectancy&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Life Expectancy&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# set the regions&amp;#39;s colors&lt;/span&gt;
&lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Latin America &amp;amp; Caribbean&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#2CA02C&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;South Asia&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#8C564B&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Sub-Saharan Africa&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#E377C2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Europe &amp;amp; Central Asia&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#FF7F0E&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;Middle East &amp;amp; North Africa&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#D62728&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;East Asia &amp;amp; Pacific&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#1F77B4&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;North America&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#9467BD&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;


&lt;span class="c1"&gt;# create one scatterplot per region&lt;/span&gt;
&lt;span class="c1"&gt;# I need to do like this to have all the regions &lt;/span&gt;
&lt;span class="c1"&gt;# showing up in the legend&lt;/span&gt;
&lt;span class="n"&gt;groups&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sample&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;groupby&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Region&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;grp&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;groups&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;scat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scatter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;grp&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Fertility Rate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;grp&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Life Expectancy&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                      &lt;span class="n"&gt;marker&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;o&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;colors&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                      &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sqrt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sample&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Population&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;10000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;edgecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# add the year in the middle of the scatter plot&lt;/span&gt;
&lt;span class="c1"&gt;# for now, the text is empty (&amp;#39;&amp;#39;). Il will be filled &lt;/span&gt;
&lt;span class="c1"&gt;# in each frame&lt;/span&gt;
&lt;span class="n"&gt;year_label&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;4.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1960&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;va&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ha&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                     &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fontdict&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;weight&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bold&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;

&lt;span class="c1"&gt;# decorate the visualization&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;labelcolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Fertility Rate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Life Expectancy&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;legend&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;markerscale&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here's the result:&lt;br&gt;
&lt;img alt="Best stat static" src="images/best-stat-static.png"&gt;&lt;/p&gt;
&lt;h3&gt;Animate the plot&lt;/h3&gt;
&lt;p&gt;To make the animation, we need to create one plot for each year. Each plot is a frame. Frames are shown in sequence.&lt;br&gt;
Luckily, matplotlib as an animation module. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.animation&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;animation&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To make the animation, I need to define a function that will set the inital state (optional) and a function that will update the plot for each frame.&lt;br&gt;
But first, I need to modify a bit the script I used to build the static plot. 
I create a list where I store all my scatter artists. I will iterate through that list to update each scatter plot representing a region individually. Also, I don't need to set the x and y values of the scatter plot. Finaly, I remove the size parameter from the scatter plot. It will be set for each frame.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;scats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="n"&gt;groups&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;groupby&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Region&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;grp&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;groups&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;scat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scatter&lt;/span&gt;&lt;span class="p"&gt;([],&lt;/span&gt; &lt;span class="p"&gt;[],&lt;/span&gt;
                      &lt;span class="n"&gt;marker&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;o&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;colors&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                      &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;edgecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;scats&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scat&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;year_label&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;4.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;va&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ha&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fontdict&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;weight&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bold&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;init()&lt;/code&gt; method that initialize the animation is very simple&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;init&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;scat&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;scats&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;scat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_offsets&lt;/span&gt;&lt;span class="p"&gt;([])&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;scats&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;set_offsets()&lt;/code&gt; method set the values of x and y. I want to start with an empty plot so I just pass an empty list.&lt;br&gt;
Next, I define an &lt;code&gt;update()&lt;/code&gt; method that will update the scatter plot for each frame.&lt;br&gt;
For each region, the method does:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;filter the data for the current year&lt;/li&gt;
&lt;li&gt;set the x and y values (&lt;code&gt;set_offset()&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;changes the size of the markers with the population of the year (&lt;code&gt;set_sizes()&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;update the year label at the center of the figure (&lt;code&gt;set_text&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;year&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;scat&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scats&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;groups&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="c1"&gt;# get the data for the current year&lt;/span&gt;
        &lt;span class="n"&gt;sample&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Year&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;year&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="c1"&gt;# set the x and y values&lt;/span&gt;
        &lt;span class="n"&gt;scat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_offsets&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sample&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Fertility Rate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Life Expectancy&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]])&lt;/span&gt;
        &lt;span class="c1"&gt;# update the size of the markers with the population&lt;/span&gt;
        &lt;span class="c1"&gt;# of the current year&lt;/span&gt;
        &lt;span class="n"&gt;scat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_sizes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sqrt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sample&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Population&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;10000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c1"&gt;# update the year label displayed at the center of the figure&lt;/span&gt;
        &lt;span class="n"&gt;year_label&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;year&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;scats&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I am now ready to make the animation using the &lt;code&gt;FuncAnimation&lt;/code&gt; from the animation module.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;ani&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;animation&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FuncAnimation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;init_func&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                              &lt;span class="n"&gt;frames&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;years&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                              &lt;span class="n"&gt;interval&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                              &lt;span class="n"&gt;repeat&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Once the animation in done, I can show it using &lt;code&gt;plt.show()&lt;/code&gt; or save it as a movie or an animated gif.&lt;br&gt;
I am going to save it as a gif to display it on this post:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;ani&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;best_stat_anim.gif&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dpi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;160&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;writer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;imagemagick&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Et voilà!&lt;/p&gt;
&lt;p&gt;&lt;img alt="Best stat animation" src="images/best_stat_anim.gif"&gt;&lt;/p&gt;
&lt;h2&gt;source code&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://github.com/guillaume-martin/best_stats_ever"&gt;github&lt;/a&gt;&lt;br&gt;
&lt;a href="https://www.kaggle.com/gemartin/the-best-stats-you-ve-ever-seen-with-matplotlib"&gt;kaggle&lt;/a&gt;&lt;/p&gt;</content><category term="Visualization"></category><category term="visualization"></category><category term="python"></category><category term="matplotlib"></category></entry><entry><title>RFM Segmentation with Python</title><link href="https://guillaume-martin.github.io/rfm-segmentation-with-python.html" rel="alternate"></link><published>2018-06-01T01:40:00+08:00</published><updated>2021-02-17T00:00:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2018-06-01:/rfm-segmentation-with-python.html</id><summary type="html">&lt;p&gt;How to segment your customers using RFM analysis with Python&lt;/p&gt;</summary><content type="html">&lt;h2&gt;About RFM segmentation&lt;/h2&gt;
&lt;p&gt;Customer segmentation is important for multiple reasons. We get a deeper knowledge of our customers and can tailor targeted marketing campaigns.&lt;/p&gt;
&lt;p&gt;The RFM method was introduced by Bult and Wansbeek in 1995 and has been successfully used by marketers since.&lt;br&gt;
It analyzes customers' behavior on three parameters:&lt;br&gt;
&lt;strong&gt;Recency&lt;/strong&gt;: How recent is the last purchase of the customer.&lt;br&gt;
&lt;strong&gt;Frequency&lt;/strong&gt;: How often the customer makes a purchase.&lt;br&gt;
&lt;strong&gt;Monetary&lt;/strong&gt;: How much money does the customer spends.&lt;/p&gt;
&lt;p&gt;The advantages of RFM is that it is easy to implement and it can be used for different types of business. It helps craft better marketing campaigns and improves CRM and customer's loyalty.&lt;/p&gt;
&lt;p&gt;The disadvantages are that it may not apply in industries where customers are usually one time buyers. It is based on historical data and won't give much insight about prospects.  &lt;/p&gt;
&lt;p&gt;In this post, I will show how we can use RFM segmentation with Python.&lt;/p&gt;
&lt;h2&gt;Methodology&lt;/h2&gt;
&lt;p&gt;To get the RFM score of a customer, we need to first calculate the R, F and M scores on a scale from 1 (worst) to 5 (best).  &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;calculate Recency = number of days since last purchase&lt;/li&gt;
&lt;li&gt;calculate Freqency = number of purchases during the studied period (usually one year)&lt;/li&gt;
&lt;li&gt;calculate Monetary = total amount of purchases made during the studied period&lt;/li&gt;
&lt;li&gt;find quintiles for each of these dimensions&lt;/li&gt;
&lt;li&gt;give a grade to each dimension depending in which quintiles it stands&lt;/li&gt;
&lt;li&gt;combine R, F and M scores to get the RFM score&lt;/li&gt;
&lt;li&gt;map RF scores to segments  &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;For this example, I will use the &lt;a href="https://archive.ics.uci.edu/ml/datasets/Online+Retail"&gt;Online Retail dataset&lt;/a&gt; available on the UCI Machine Learning Repository.&lt;/p&gt;
&lt;h2&gt;Calculcate the RFM score&lt;/h2&gt;
&lt;h3&gt;Prepare the data&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;timedelta&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I create a dataframe with the sales data&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;sales&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_excel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;online-retail.xlsx&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Index([&amp;#39;InvoiceNo&amp;#39;, &amp;#39;StockCode&amp;#39;, &amp;#39;Description&amp;#39;, &amp;#39;Quantity&amp;#39;, &amp;#39;InvoiceDate&amp;#39;,
        &amp;#39;UnitPrice&amp;#39;, &amp;#39;CustomerID&amp;#39;, &amp;#39;Country&amp;#39;],
      dtype=&amp;#39;object&amp;#39;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{:,}&lt;/span&gt;&lt;span class="s1"&gt; rows; &lt;/span&gt;&lt;span class="si"&gt;{:,}&lt;/span&gt;&lt;span class="s1"&gt; columns&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;541,909 rows; 8 columns
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{:,}&lt;/span&gt;&lt;span class="s1"&gt; invoices don&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;t have a customer id&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CustomerID&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isnull&lt;/span&gt;&lt;span class="p"&gt;()]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;135,080 invoices don&amp;#39;t have a customer id
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I am going to drop those lines as they will not help in our analysis of customers.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dropna&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;CustomerID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;inplace&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;What is the time frame of the data?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Orders from &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt; to &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;InvoiceDate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;
                                    &lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;InvoiceDate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;()))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;  Orders from 2010-12-01 08:26:00 to 2011-12-09 12:50:00
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We have about one year of sales data (from December 2010 to December 2011). This is the period usually used for RFM analysis. I'll set the period of the study to 365 days to get exactly one year.&lt;/p&gt;
&lt;p&gt;I calculate the total price of each line.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Price&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Quantity&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;UnitPrice&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Next, I control whether there's only one row per invoice.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;InvoiceNo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value_counts&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;576339    542
579196    533
580727    529
578270    442
573576    435
Name: InvoiceNo, dtype: int64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Invoices can have multiple rows (one row per item). However, I am interested in how many times did a customer purchase, not how many items did he buy. I want to count orders rather than items.&lt;br&gt;
I create an &lt;code&gt;order&lt;/code&gt; dataframe that will aggregate our sales at the order level.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;orders&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sales&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;groupby&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;InvoiceNo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;InvoiceDate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;CustomerID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;agg&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Price&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;()})&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reset_index&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;orders&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;InvoiceNo&lt;/th&gt;
      &lt;th&gt;InvoiceDate&lt;/th&gt;
      &lt;th&gt;CustomerID&lt;/th&gt;
      &lt;th&gt;Price&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;536365&lt;/td&gt;
      &lt;td&gt;2010-12-01 08:26:00&lt;/td&gt;
      &lt;td&gt;17850.0&lt;/td&gt;
      &lt;td&gt;139.12&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;536366&lt;/td&gt;
      &lt;td&gt;2010-12-01 08:28:00&lt;/td&gt;
      &lt;td&gt;17850.0&lt;/td&gt;
      &lt;td&gt;22.20&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;536367&lt;/td&gt;
      &lt;td&gt;2010-12-01 08:34:00&lt;/td&gt;
      &lt;td&gt;13047.0&lt;/td&gt;
      &lt;td&gt;278.73&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;536368&lt;/td&gt;
      &lt;td&gt;2010-12-01 08:34:00&lt;/td&gt;
      &lt;td&gt;13047.0&lt;/td&gt;
      &lt;td&gt;70.05&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;536369&lt;/td&gt;
      &lt;td&gt;2010-12-01 08:35:00&lt;/td&gt;
      &lt;td&gt;13047.0&lt;/td&gt;
      &lt;td&gt;17.85&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;Finally, I am going to simulate an analysis I am doing in real time by setting the &lt;code&gt;NOW&lt;/code&gt; date at one day after the last purchase. This date will be used as a reference to calculate the &lt;code&gt;Recency&lt;/code&gt; score.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;NOW&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;orders&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;InvoiceDate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;timedelta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;days&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;NOW&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Timestamp(&amp;#39;2011-12-10 12:50:00&amp;#39;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I am going to study the data over a period of one year. I set a &lt;code&gt;period&lt;/code&gt; variable to 365 (days).&lt;br&gt;
You can change this value depending on your needs. It will depend on the industry and the expected behavior of customers but one year is a commonly used value in RFM segmentation.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;period&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;365&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Calculate the Recency, Frequency and Monetary Value of each customers&lt;/h3&gt;
&lt;p&gt;To make things easier, I am going to add a column with the number of days between the purchase and now. To find the Recency values, I will just have to find the minimum of this column for each customer.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;orders&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;DaysSinceOrder&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;orders&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;InvoiceDate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NOW&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;days&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The scores are calculated for each customer. I need a dataframe with one row per customer. The scores will be stored in columns.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;aggr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;DaysSinceOrder&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;  &lt;span class="c1"&gt;# the number of days since last order (Recency)&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;InvoiceDate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;NOW&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;timedelta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;days&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;period&lt;/span&gt;&lt;span class="p"&gt;)]),&lt;/span&gt; &lt;span class="c1"&gt;# the total number of orders in the last period (Frequency)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="n"&gt;rfm&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;orders&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;groupby&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;CustomerID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;agg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aggr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reset_index&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rename&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;DaysSinceOrder&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Recency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;InvoiceDate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Frequency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="n"&gt;inplace&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;CustomerID&lt;/th&gt;
      &lt;th&gt;Recency&lt;/th&gt;
      &lt;th&gt;Frequency&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;12346.0&lt;/td&gt;
      &lt;td&gt;326&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;12347.0&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;6&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;12348.0&lt;/td&gt;
      &lt;td&gt;75&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;12349.0&lt;/td&gt;
      &lt;td&gt;19&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;12350.0&lt;/td&gt;
      &lt;td&gt;310&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;I have the Recency and Frequency data. I need to add the Monetary value of each customer by adding sales over the last year.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Monetary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;CustomerID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;orders&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;orders&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;CustomerID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; \
                                                           &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;orders&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;InvoiceDate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;NOW&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;timedelta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;days&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;period&lt;/span&gt;&lt;span class="p"&gt;))]&lt;/span&gt;\
                                                           &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Price&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;CustomerID&lt;/th&gt;
      &lt;th&gt;Recency&lt;/th&gt;
      &lt;th&gt;Frequency&lt;/th&gt;
      &lt;th&gt;Monetary&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;12346.0&lt;/td&gt;
      &lt;td&gt;326&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;12347.0&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;6&lt;/td&gt;
      &lt;td&gt;3598.21&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;12348.0&lt;/td&gt;
      &lt;td&gt;75&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;1797.24&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;12349.0&lt;/td&gt;
      &lt;td&gt;19&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1757.55&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;12350.0&lt;/td&gt;
      &lt;td&gt;310&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;334.40&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;h3&gt;Calculate the R, F and M scores&lt;/h3&gt;
&lt;p&gt;At this point, I have the values for Recency, Frequency and Monetary parameters. Each customer will get a note between 1 and 5 for each parameter.&lt;br&gt;
We can do this by setting ranges based on expected behavior. For example, to rate Recency, we could use this scale:&lt;br&gt;
1: 0-30 days&lt;br&gt;
2: 31-60 days&lt;br&gt;
3: 61-90 days&lt;br&gt;
4: 91-180 days&lt;br&gt;
5: 181-365 days  &lt;/p&gt;
&lt;p&gt;We could also use quintiles. Each quintiles contains 20% of the population. Using quintiles is more flexible as the ranges will adapt to the data and would work across different industries or if there's any change in expected customer behavior.&lt;br&gt;
I am going to use the quintiles method. First, I get the quintiles for each parameter.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;quintiles&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Recency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Frequency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Monetary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quantile&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_dict&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;quintiles&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;{&amp;#39;Frequency&amp;#39;: {0.2: 1.0, 0.4: 2.0, 0.6: 3.0, 0.8: 6.0},
  &amp;#39;Monetary&amp;#39;: {0.2: 215.89800000000002,
  0.4: 440.432,
  0.6: 876.3679999999999,
  0.8: 1909.6580000000006},
  &amp;#39;Recency&amp;#39;: {0.2: 11.0, 0.4: 32.0, 0.6: 71.0, 0.8: 178.80000000000018}}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then I write methods to assign ranks from 1 to 5. A smaller Recency value is better whereas higher Frequency and Monetary values are better. I need to write two separate methods.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;r_score&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;quintiles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Recency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;quintiles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Recency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;quintiles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Recency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;quintiles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Recency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fm_score&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;quintiles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;quintiles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;quintiles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;quintiles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I am now ready to get the R, F and M scores of each customer.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;R&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Recency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;r_score&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;F&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Frequency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fm_score&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Frequency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;M&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Monetary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fm_score&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Monetary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Get customers segments from RFM score&lt;/h3&gt;
&lt;p&gt;Finally, I combine the R, F and M scores into a &lt;code&gt;RFM Score&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RFM Score&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;R&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;F&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;M&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;CustomerID&lt;/th&gt;
      &lt;th&gt;Recency&lt;/th&gt;
      &lt;th&gt;Frequency&lt;/th&gt;
      &lt;th&gt;Monetary&lt;/th&gt;
      &lt;th&gt;R&lt;/th&gt;
      &lt;th&gt;F&lt;/th&gt;
      &lt;th&gt;M&lt;/th&gt;
      &lt;th&gt;RFM Score&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;12346.0&lt;/td&gt;
      &lt;td&gt;326&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0.00&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;121&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;12347.0&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;6&lt;/td&gt;
      &lt;td&gt;3598.21&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;545&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;12348.0&lt;/td&gt;
      &lt;td&gt;75&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;1797.24&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;244&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;12349.0&lt;/td&gt;
      &lt;td&gt;19&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1757.55&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;414&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;12350.0&lt;/td&gt;
      &lt;td&gt;310&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;334.40&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;112&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;The RFM scores give us 5&lt;span class="math"&gt;\(^3\)&lt;/span&gt; = 125 segments. Which is not easy to work with.&lt;br&gt;
I am going to work with 11 segments based on the R and F scores. Here is the description of the segments:  &lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="left"&gt;Segment&lt;/th&gt;
&lt;th align="left"&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="left"&gt;Champions&lt;/td&gt;
&lt;td align="left"&gt;Bought recently, buy often and spend the most&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;Loyal Customers&lt;/td&gt;
&lt;td align="left"&gt;Buy on a regular basis. Responsive to promotions.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;Potential Loyalist&lt;/td&gt;
&lt;td align="left"&gt;Recent customers with average frequency.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;Recent Customers&lt;/td&gt;
&lt;td align="left"&gt;Bought most recently, but not often.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;Promising&lt;/td&gt;
&lt;td align="left"&gt;Recent shoppers, but haven’t spent much.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;Customers Needing Attention&lt;/td&gt;
&lt;td align="left"&gt;Above average recency, frequency and monetary values. May not have bought very recently though.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;About To Sleep&lt;/td&gt;
&lt;td align="left"&gt;Below average recency and frequency. Will lose them if not reactivated.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;At Risk&lt;/td&gt;
&lt;td align="left"&gt;Purchased often but a long time ago. Need to bring them back!&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;Can’t Lose Them&lt;/td&gt;
&lt;td align="left"&gt;Used to purchase frequently but haven’t returned for a long time.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;Hibernating&lt;/td&gt;
&lt;td align="left"&gt;Last purchase was long back and low number of orders. May be lost.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;The resulting matrix look like this:&lt;br&gt;
&lt;img alt="rfm segments" src="/images/rfm-segments.png"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;segt_map&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;[1-2][1-2]&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;hibernating&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;[1-2][3-4]&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;at risk&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;[1-2]5&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;can&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;t loose&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;3[1-2]&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;about to sleep&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;33&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;need attention&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;[3-4][4-5]&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;loyal customers&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;41&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;promising&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;51&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;new customers&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;[4-5][2-3]&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;potential loyalists&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;5[4-5]&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;champions&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Segment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;R&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;F&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Segment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Segment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;segt_map&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;regex&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;CustomerID&lt;/th&gt;
      &lt;th&gt;Recency&lt;/th&gt;
      &lt;th&gt;Frequency&lt;/th&gt;
      &lt;th&gt;Monetary&lt;/th&gt;
      &lt;th&gt;R&lt;/th&gt;
      &lt;th&gt;F&lt;/th&gt;
      &lt;th&gt;M&lt;/th&gt;
      &lt;th&gt;RFM Score&lt;/th&gt;
      &lt;th&gt;Segment&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;12346.0&lt;/td&gt;
      &lt;td&gt;326&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0.00&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;121&lt;/td&gt;
      &lt;td&gt;hibernating&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;12347.0&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;6&lt;/td&gt;
      &lt;td&gt;3598.21&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;545&lt;/td&gt;
      &lt;td&gt;champions&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;12348.0&lt;/td&gt;
      &lt;td&gt;75&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;1797.24&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;244&lt;/td&gt;
      &lt;td&gt;at risk&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;12349.0&lt;/td&gt;
      &lt;td&gt;19&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1757.55&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;414&lt;/td&gt;
      &lt;td&gt;promising&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;12350.0&lt;/td&gt;
      &lt;td&gt;310&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;334.40&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;112&lt;/td&gt;
      &lt;td&gt;hibernating&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;h2&gt;Visualize our customers segments&lt;/h2&gt;
&lt;p&gt;Now that we have our scores, we can do some data visualization to get a better idea of our customers portfolio.
First, let see at the distribution of R, F and M. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# plot the distribution of customers over R and F&lt;/span&gt;
&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nrows&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ncols&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;R&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;F&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]):&lt;/span&gt;
    &lt;span class="n"&gt;parameters&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;R&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Recency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;F&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Frequency&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value_counts&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sort_index&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;axes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;bars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_frame_on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;left&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;labelleft&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bottom&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Distribution of &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;parameters&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt;
                &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_height&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
            &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;firebrick&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_x&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_width&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;(&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt;%)&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;())),&lt;/span&gt;
               &lt;span class="n"&gt;ha&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;va&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;# plot the distribution of M for RF score&lt;/span&gt;
&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nrows&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ncols&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                         &lt;span class="n"&gt;sharex&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sharey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                         &lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;r_range&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;f_range&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;r_range&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;f_range&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;R&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;F&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;M&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value_counts&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sort_index&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;
        &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;axes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;bars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;F&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;va&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;va&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;R&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
            &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_frame_on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;left&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;labelleft&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bottom&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticklabels&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_height&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
                &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;firebrick&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_x&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_width&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                    &lt;span class="n"&gt;ha&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="n"&gt;va&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;k&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;suptitle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Distribution of M for each F and R&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="RF distribution" src="/images/rfm-rf-distribution.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="M distribution" src="/images/rfm-m-distribution.png"&gt;&lt;/p&gt;
&lt;p&gt;We can see that if recency seems evenly distributed, almost half of the customers don't purchase very often (48% of customers have a frequency of 1 or 2).&lt;br&gt;
When looking at the monetary value, we see that the customers spending the most are those with the highest activity (R and F of 4-5). We have very few large orders (high monetary value but low frequency).&lt;/p&gt;
&lt;p&gt;Let's look at the distribution of our segments.&lt;br&gt;
I am not going to use a treemap like the segments matrix shown above to visualize the distribution of segments. Bar charts are a better fit for comparing quantities.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# count the number of customers in each segment&lt;/span&gt;
&lt;span class="n"&gt;segments_counts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rfm&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Segment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value_counts&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sort_values&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ascending&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;bars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;barh&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;segments_counts&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
              &lt;span class="n"&gt;segments_counts&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;silver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_frame_on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;left&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;bottom&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;labelbottom&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_yticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;segments_counts&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_yticklabels&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;segments_counts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_width&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;segments_counts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;champions&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;loyal customers&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
            &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;firebrick&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_y&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_height&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;{:,}&lt;/span&gt;&lt;span class="s1"&gt; (&lt;/span&gt;&lt;span class="si"&gt;{:}&lt;/span&gt;&lt;span class="s1"&gt;%)&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                                   &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;segments_counts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;())),&lt;/span&gt;
                &lt;span class="n"&gt;va&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;ha&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;
               &lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="RFM customers segmentation" src="/images/rfm-customers-segmentation.png"&gt;&lt;/p&gt;
&lt;p&gt;We have a lot of customers who don't buy frequently from us (29% are hibernating).  However, 32% of our customers are either champions or loyal customers.&lt;/p&gt;
&lt;p&gt;Further analysis can be done that integrate the Monetary parameters.&lt;br&gt;
With customers assigned to segments and some statistics on the composition of our customers portfolio, we can work on targeted marketing campaigns to retain customers that are at risk, improve sales to customers with some potential and reward the best customers.&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="analytics"></category><category term="python"></category><category term="segmentation"></category><category term="marketing"></category><category term="crm"></category></entry><entry><title>Average ensemble optimization</title><link href="https://guillaume-martin.github.io/average-ensemble-optimization.html" rel="alternate"></link><published>2018-05-25T12:30:00+08:00</published><updated>2021-02-17T00:00:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2018-05-25:/average-ensemble-optimization.html</id><summary type="html">&lt;p&gt;How to find the best weights to use in a weighted average ensemble.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Machine learning practitioners rely on ensembles to improve the performance of their model.
One of the methods used for ensembling multiple models is to calculate the weighted average of their predictions. The problem that rises is how to find the weights that will give us the best ensemble. In this post, I will explain how to optimize those weights using scipy. But before starting, I want to give credit to &lt;a href="https://www.kaggle.com/tilii7"&gt;Tilii&lt;/a&gt; from who I got this method that he used in this &lt;a href="https://www.kaggle.com/tilii7/cross-validation-weighted-linear-blending-errors"&gt;kernel&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;For this example, I will work on a regression problem using the boston dataset available in scikit-learn.&lt;br&gt;
First, I load the data:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.datasets&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;load_boston&lt;/span&gt;

&lt;span class="n"&gt;boston&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;load_boston&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;X&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boston&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boston&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;
&lt;span class="n"&gt;features&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boston&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;feature_names&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;features&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;[&amp;#39;CRIM&amp;#39; &amp;#39;ZN&amp;#39; &amp;#39;INDUS&amp;#39; &amp;#39;CHAS&amp;#39; &amp;#39;NOX&amp;#39; &amp;#39;RM&amp;#39; &amp;#39;AGE&amp;#39; &amp;#39;DIS&amp;#39; &amp;#39;RAD&amp;#39; &amp;#39;TAX&amp;#39; &amp;#39;PTRATIO&amp;#39; &amp;#39;B&amp;#39; &amp;#39;LSTAT&amp;#39;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I'll work with only one feature for easy visualization.&lt;br&gt;
I'll use RM (Avg number of rooms)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;X&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reshape&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then I split the dataset into a train and test sets. I'll use the test set to evaluate my final model.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.model_selection&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;train_test_split&lt;/span&gt;

&lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;X_test&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_train&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_test&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;train_test_split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;test_size&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;random_state&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Let's have a quick pick at the data.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scatter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_train&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;facecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;edgecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;royalblue&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Average number of rooms&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Median value of homes ($1000)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="png" src="/images/avg-ens-scatter.png"&gt;&lt;/p&gt;
&lt;p&gt;I am going to work with two models only. I'll ensemble a linear model and a tree based model.&lt;br&gt;
I choose a simple linear regression and a single decision tree to get weaker base models. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.linear_model&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;LinearRegression&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.tree&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;DecisionTreeRegressor&lt;/span&gt;

&lt;span class="n"&gt;model_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LinearRegression&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;model_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;DecisionTreeRegressor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_depth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;random_state&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then, I need to generate out-of-fold (oof) predictions on the train set. &lt;/p&gt;
&lt;p&gt;What are out-of-fold predictions?&lt;br&gt;
We fit our model on a train set then we make predictions on a test set using the trained model. I am going to do the same for my ensemble. Here to fit the model is to find the best weights to calculate the average of the predictions from the base models. So to &lt;em&gt;'fit'&lt;/em&gt; my ensemble I need predictions made on the training set but I can't make predictions using data the model has already seen in the training phase. So for each base model, I need to train on a part of the training set and make predictions on another part. This is what we do in cross-validation.&lt;/p&gt;
&lt;p&gt;&lt;img alt="oof predictions" src="/images/oof-predictions.png"&gt;&lt;/p&gt;
&lt;p&gt;I am going to do a 5 folds cross validation. For each iteration, I will:&lt;br&gt;
- train the models on the train folds.&lt;br&gt;
- get predictions on the validation fold.&lt;br&gt;
- store the predictions in an array.  &lt;/p&gt;
&lt;p&gt;At the end of cross validation, I will have an array for each model with predictions made on the training set. I will use those predictions as features to build my ensemble.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.model_selection&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;KFold&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sklearn.metrics&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;mean_squared_error&lt;/span&gt;

&lt;span class="n"&gt;kf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;KFold&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n_splits&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;random_state&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;nrows_trn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# create an array for each model to store the oof predictions&lt;/span&gt;
&lt;span class="n"&gt;mod1_oof_trn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nrows_trn&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;mod2_oof_trn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nrows_trn&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# create arrays to store each iteration score&lt;/span&gt;
&lt;span class="n"&gt;mod1_scores&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;mod2_scores&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trn_idx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;val_idx&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_train&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
    &lt;span class="c1"&gt;# split the features and target into training and validation folds&lt;/span&gt;
    &lt;span class="n"&gt;X_trn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;X_val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;trn_idx&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;val_idx&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;y_trn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_val&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;y_train&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;trn_idx&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;y_train&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;val_idx&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="c1"&gt;# train the first model on the train folds&lt;/span&gt;
    &lt;span class="n"&gt;model_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_trn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_trn&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# get the predictions on the validation fold&lt;/span&gt;
    &lt;span class="c1"&gt;# and save them in the array I created previously&lt;/span&gt;
    &lt;span class="n"&gt;mod1_oof_trn&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;val_idx&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_val&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# store the model score for this iteration&lt;/span&gt;
    &lt;span class="n"&gt;mod1_scores&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mean_squared_error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y_val&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mod1_oof_trn&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;val_idx&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="c1"&gt;# do the same thing for the second model&lt;/span&gt;
    &lt;span class="n"&gt;model_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_trn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_trn&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;mod2_oof_trn&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;val_idx&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_val&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;mod2_scores&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mean_squared_error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y_val&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mod2_oof_trn&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;val_idx&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now that I have the predictions on the train set, I can fit my models on all the train data to get predictions on the test set.&lt;br&gt;
An alternative way would be to make predictions on the test set during cross validation and average the 5 predictions.&lt;br&gt;
Create arrays to store the predictions:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;nrows_tst&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;X_test&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;mod1_oof_tst&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;zeros&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nrows_tst&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;mod2_oof_tst&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;zeros&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nrows_tst&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then add those lines inside the CV script:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;mod1_oof_tst&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;model_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_test&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;
&lt;span class="n"&gt;mod2_oof_tst&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;model_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_test&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;model_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_train&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;model_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_train&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;mod1_predictions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_test&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;mod2_predictions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_test&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Let's have a look at how my models behave.&lt;br&gt;
I am going to chart the boxplots of the CV scores and plot the regression lines of each model over the training data.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.gridspec&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;gridspec&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Model 1 CV score: mean = &lt;/span&gt;&lt;span class="si"&gt;{:.4f}&lt;/span&gt;&lt;span class="s1"&gt;; standard deviation = &lt;/span&gt;&lt;span class="si"&gt;{:.4f}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mod1_scores&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;
                                                                            &lt;span class="n"&gt;mod1_scores&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="p"&gt;()))&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Model 2 CV score: mean = &lt;/span&gt;&lt;span class="si"&gt;{:.4f}&lt;/span&gt;&lt;span class="s1"&gt;; standard deviation = &lt;/span&gt;&lt;span class="si"&gt;{:.4f}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mod2_scores&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;
                                                                            &lt;span class="n"&gt;mod2_scores&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="p"&gt;()))&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;G&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gridspec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GridSpec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                     &lt;span class="n"&gt;height_ratios&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;ax1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;:])&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;boxplot&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;mod1_scores&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mod2_scores&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Models CV scores and regression lines&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticklabels&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Model 1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Model 2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bottom&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;X_plot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reshape&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;y_plot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_plot&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scatter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_train&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;facecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;edgecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;royalblue&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_plot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_plot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;orange&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Average Number of rooms&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Median value of homes&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;sharey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ax2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;X_plot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reshape&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;y_plot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_plot&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scatter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_train&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_train&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;facecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;edgecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;royalblue&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_plot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_plot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;orange&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Average number of rooms&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Model 1 CV score: mean = 43.2682; standard deviation = 8.6542
Model 2 CV score: mean = 39.3335; standard deviation = 10.3182
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Models CV" src="/images/avg-ens-models-cv.png"&gt;&lt;/p&gt;
&lt;p&gt;We can see that the first model (linear regression) has a higher error but lower variance than the second model (decision tree).  Also, the regression lines are quite different except for a small segment where we have more data points.&lt;/p&gt;
&lt;p&gt;This is a good configuration for ensembling. Ensembling models that are too similar gives a smaller improvement of the prediction performance.&lt;/p&gt;
&lt;p&gt;I am now going to calculate the final predictions by calculating the weighted average of the predictions of those two models.&lt;br&gt;
I will use &lt;code&gt;scipy.optimize&lt;/code&gt; to find the best weights.&lt;br&gt;
First, I blend the predictions in a matrix where each row is a sample and each column is the prediction from one of the models.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;train_predictions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;concatenate&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;mod1_oof_trn&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                                    &lt;span class="n"&gt;mod2_oof_trn&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;]],&lt;/span&gt; &lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then I need to define an objective function that I will have to minimize&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;objective&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;weights&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot; Calculate the score of a weighted average of predictions&lt;/span&gt;

&lt;span class="sd"&gt;    Parameters&lt;/span&gt;
&lt;span class="sd"&gt;    ----------&lt;/span&gt;
&lt;span class="sd"&gt;    weights: array&lt;/span&gt;
&lt;span class="sd"&gt;        the weights used to calculate the average of the ensembled&lt;/span&gt;
&lt;span class="sd"&gt;        predictions.&lt;/span&gt;

&lt;span class="sd"&gt;    Returns&lt;/span&gt;
&lt;span class="sd"&gt;    -------&lt;/span&gt;
&lt;span class="sd"&gt;    float&lt;/span&gt;
&lt;span class="sd"&gt;        The mean_squared_error score of the ensemble&lt;/span&gt;
&lt;span class="sd"&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

    &lt;span class="n"&gt;y_ens&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;average&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;train_predictions&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;weights&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;weights&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;mean_squared_error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y_train&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_ens&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finaly, I use the &lt;code&gt;minimize&lt;/code&gt; function from &lt;code&gt;scipy.optimize&lt;/code&gt; to find the weights that will give the lowest MSE score.&lt;br&gt;
To avoid finding a local minima, I will run the optimization multiple time setting the initial weights at random. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;scipy.optimize&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;minimize&lt;/span&gt;

&lt;span class="n"&gt;results_list&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;    &lt;span class="c1"&gt;# a list to store the best score of each round&lt;/span&gt;
&lt;span class="n"&gt;weights_list&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;    &lt;span class="c1"&gt;# a list to store the best weights of each round&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# I randomly set the initial weights from which the algorithm will try searching a minima    &lt;/span&gt;
    &lt;span class="n"&gt;w0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;uniform&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;train_predictions&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="c1"&gt;# I define bounds, i.e. lower and upper values of weights.&lt;/span&gt;
    &lt;span class="c1"&gt;# I want the weights to be between 0 and 1.&lt;/span&gt;
    &lt;span class="n"&gt;bounds&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;train_predictions&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="c1"&gt;# I set some constraints. Here, I want the sum of the weights to be equal to 1&lt;/span&gt;
    &lt;span class="n"&gt;cons&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;type&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;eq&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="s1"&gt;&amp;#39;fun&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}]&lt;/span&gt;

    &lt;span class="c1"&gt;# I can now search for the best weights&lt;/span&gt;
    &lt;span class="n"&gt;res&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;minimize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;objective&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                   &lt;span class="n"&gt;w0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                   &lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;SLSQP&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                   &lt;span class="n"&gt;bounds&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;bounds&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                   &lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;disp&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;maxiter&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;10000&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
                   &lt;span class="n"&gt;constraints&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;cons&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# I save the best score and the best weights of&lt;/span&gt;
    &lt;span class="c1"&gt;# this round in their respective lists&lt;/span&gt;
    &lt;span class="n"&gt;results_list&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fun&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;weights_list&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# After running all the rounds, I extract the best score&lt;/span&gt;
&lt;span class="c1"&gt;# and the corresponding weights&lt;/span&gt;
&lt;span class="n"&gt;best_score&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;results_list&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;    
&lt;span class="n"&gt;best_weights&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;weights_list&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;results_list&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;best_score&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;Optimized weights:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Model 1: &lt;/span&gt;&lt;span class="si"&gt;{:.4f}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;best_weights&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Model 2: &lt;/span&gt;&lt;span class="si"&gt;{:.4f}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;best_weights&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Best score: &lt;/span&gt;&lt;span class="si"&gt;{:.4f}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;best_score&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Optimized weights:
Model 1: 0.3726
Model 2: 0.6274
Best score: 37.1407
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now, we can have a look at how our models perform on the test set.&lt;br&gt;
I am going to look at the performance of the two base models, the unoptimized ensemble (average without weights) and the optimized ensemble.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# individual scores&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Model 1 test score = &lt;/span&gt;&lt;span class="si"&gt;{:.4f}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mean_squared_error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y_test&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mod1_predictions&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Model 2 test score = &lt;/span&gt;&lt;span class="si"&gt;{:.4f}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mean_squared_error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y_test&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mod2_predictions&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;

&lt;span class="c1"&gt;# unoptimized ensemble&lt;/span&gt;
&lt;span class="n"&gt;test_predictions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;concatenate&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;mod1_predictions&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                                   &lt;span class="n"&gt;mod2_predictions&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;]],&lt;/span&gt; &lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;unoptimized_ensemble&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;average&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_predictions&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Unoptimized ensemble test score: &lt;/span&gt;&lt;span class="si"&gt;{:.4f}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mean_squared_error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y_test&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                                          &lt;span class="n"&gt;unoptimized_ensemble&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;

&lt;span class="c1"&gt;# optimized ensemble&lt;/span&gt;
&lt;span class="n"&gt;optimized_ensemble&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;average&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_predictions&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;weights&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;best_weights&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Optimized ensemble test score: &lt;/span&gt;&lt;span class="si"&gt;{:.4f}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mean_squared_error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y_test&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                                        &lt;span class="n"&gt;optimized_ensemble&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scatter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_test&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_test&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;edgecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;b&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;X_plot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_test&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;X_test&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reshape&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;line_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_plot&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;line_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_plot&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;blend&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;concatenate&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;line_1&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                        &lt;span class="n"&gt;line_2&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;]],&lt;/span&gt; &lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;line_ens&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;average&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;blend&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;weights&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;w0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;line_opt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;average&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;blend&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;weights&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;best_weights&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_plot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;model_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_plot&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;b&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;model 1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_plot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;model_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_plot&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;model 2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_plot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line_ens&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;orange&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;unoptimized ensemble&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_plot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line_opt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;g&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;optimized ensemble&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;legend&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Comparison of regression lines of all models&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Average number of rooms&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Median value of homes&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Model 1 test score = 46.9074
Model 2 test score = 40.2115
Unoptimized ensemble test score: 40.2323
Optimized ensemble test score: 39.5951
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Models comparison" src="/images/avg-ens-models-comparison.png"&gt;&lt;/p&gt;
&lt;p&gt;As we can see here, the ensemble that was not optimized (i.e. the weights were the same for both models) didn't improve our predictions. It's score of &lt;code&gt;40.2323&lt;/code&gt; is worst than the score of the decision tree at &lt;code&gt;40.2121&lt;/code&gt;.&lt;br&gt;
After optimizing the weights, the ensemble's score improved to &lt;code&gt;39.5951&lt;/code&gt; which is significantly better than all the other models.&lt;/p&gt;</content><category term="machine learning"></category><category term="python"></category><category term="scipy"></category><category term="optimization"></category><category term="machine learning"></category></entry><entry><title>Makeover Monday Week 21 - 2018</title><link href="https://guillaume-martin.github.io/makeovermonday-2018wk21.html" rel="alternate"></link><published>2018-05-22T13:15:00+08:00</published><updated>2018-05-23T09:55:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2018-05-22:/makeovermonday-2018wk21.html</id><summary type="html">&lt;p&gt;Review of the Guardian's predictions for the Premier League 2017-18&lt;/p&gt;</summary><content type="html">&lt;p&gt;This week, we were offered to work on a visualization made by &lt;a href="https://www.theguardian.com/football/2018/may/15/premier-league-2017-18-season-predictions-versus-reality"&gt;The Gardian&lt;/a&gt; to compare their predictions on the Premier League results for the season 2017-18 and the actual final standings.  &lt;/p&gt;
&lt;h2&gt;The original visualization&lt;/h2&gt;
&lt;p&gt;&lt;img alt="original" src="/images/epl-predictions.jpeg"&gt;&lt;/p&gt;
&lt;p&gt;The Guardian used a simple table with two columns. One columns shows the predictions and the other one shows the actual rank at the end of the season.
This choice make it hard to visualize how ranking changed from prediction to actual.&lt;/p&gt;
&lt;h2&gt;My goal&lt;/h2&gt;
&lt;p&gt;I want to show the evolution between the predictions and the final results.&lt;br&gt;
I want to see where are the biggest surprises and in which part of the board are the largest differences.  &lt;/p&gt;
&lt;h2&gt;My visualization&lt;/h2&gt;
&lt;p&gt;I chose a scatter plot that compares the predictions with the actual results.&lt;br&gt;
There's a reference line that shows prediction = actual. Any team that is on the line performed as predicted. The team that are over the line performed better than predicted and the teams that are under the line performed worst.  &lt;/p&gt;
&lt;p&gt;The size of the marker shows the absolute value of the difference between the prediction and the actual result.  &lt;/p&gt;
&lt;p&gt;The color of the marker shows the difference between the prediction and the actual result where blue is a positive difference (the actual standing is higher) and red is a negative difference (the actual sending is lower).&lt;br&gt;
Here is the result:  &lt;/p&gt;
&lt;p&gt;&lt;img alt="final" src="/images/makeovermonday-2018-wk21.png"&gt;&lt;/p&gt;</content><category term="visualization"></category><category term="tableau"></category><category term="visualization"></category><category term="makeovermonday"></category></entry><entry><title>Customizing Matplotlib Charts</title><link href="https://guillaume-martin.github.io/customize-matplotlib-charts.html" rel="alternate"></link><published>2018-05-08T08:20:00+08:00</published><updated>2021-02-17T00:00:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2018-05-08:/customize-matplotlib-charts.html</id><summary type="html">&lt;p&gt;Explore the Matplotlib API and learn how to customize your charts.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Since I started studying Python for data science, I have used Matplotlib for data visualization and found the library quite confusing.&lt;br&gt;
When I search for help on internet, I see different ways to do the same things. For example, to draw bars, some will use &lt;code&gt;plt.bar()&lt;/code&gt; and others &lt;code&gt;ax.bar()&lt;/code&gt;.&lt;br&gt;
Things are getting worst when you try to customize your graph (i.e. use subplots, modify axis, ...).  &lt;/p&gt;
&lt;p&gt;The reason for this diversity of approaches to set a plot is that there are two API in Matplotlib. The &lt;code&gt;pyplot&lt;/code&gt; API and an &lt;code&gt;object-oriented&lt;/code&gt; API. It is advised to learn the &lt;code&gt;object-oriented&lt;/code&gt; API and I'll try to stick to it as much as I can in this post.&lt;/p&gt;
&lt;p&gt;The &lt;em&gt;seaborn&lt;/em&gt; library can help us create nice graphics easily, but when we want to display multiple charts at once or tweak the look of the charts, we also need to be able to work with matplotlib API.&lt;/p&gt;
&lt;p&gt;I'll use the titanic dataset to create some of the charts. It can be downloaded from &lt;a href="https://www.kaggle.com/c/titanic/data"&gt;Kaggle&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Let's get started! First thing, import matplotlib.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Backend&lt;/h2&gt;
&lt;p&gt;Matplotlib has many use cases. It can be used from the python shell or in jupyter notebooks or it can be embeded in applications interface.&lt;br&gt;
We can choose from different backends to handle all those different cases.&lt;/p&gt;
&lt;p&gt;There are two types of backends:
- user interface backends or interactive backends to display on GUI.
- hardcopy backends or non-interactive backends to generate image files.&lt;/p&gt;
&lt;p&gt;The backend has to be set before we import pyplot.  &lt;/p&gt;
&lt;p&gt;There are two ways to set the backend: &lt;code&gt;matplotlib.use('backend_name')&lt;/code&gt; or &lt;code&gt;%matplotlib backend_name&lt;/code&gt;.&lt;br&gt;
The second method is an iPython magic command and will not work in all circumstances.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# View what is the current selected backend.&lt;/span&gt;
&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_backend&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;#39;module://ipykernel.pylab.backend_inline&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can easily get a list of available backends&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;interactive backends:&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rcsetup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;interactive_bk&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;non interactive backends:&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rcsetup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;non_interactive_bk&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;all backends: &lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rcsetup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all_backends&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;interactive backends:
[&amp;#39;GTK&amp;#39;, &amp;#39;GTKAgg&amp;#39;, &amp;#39;GTKCairo&amp;#39;, &amp;#39;MacOSX&amp;#39;, &amp;#39;Qt4Agg&amp;#39;, &amp;#39;Qt5Agg&amp;#39;, &amp;#39;TkAgg&amp;#39;, &amp;#39;WX&amp;#39;, &amp;#39;WXAgg&amp;#39;, &amp;#39;GTK3Cairo&amp;#39;, &amp;#39;GTK3Agg&amp;#39;, &amp;#39;WebAgg&amp;#39;, &amp;#39;nbAgg&amp;#39;]

non interactive backends:
[&amp;#39;agg&amp;#39;, &amp;#39;cairo&amp;#39;, &amp;#39;gdk&amp;#39;, &amp;#39;pdf&amp;#39;, &amp;#39;pgf&amp;#39;, &amp;#39;ps&amp;#39;, &amp;#39;svg&amp;#39;, &amp;#39;template&amp;#39;]

all backends: 
[&amp;#39;GTK&amp;#39;, &amp;#39;GTKAgg&amp;#39;, &amp;#39;GTKCairo&amp;#39;, &amp;#39;MacOSX&amp;#39;, &amp;#39;Qt4Agg&amp;#39;, &amp;#39;Qt5Agg&amp;#39;, &amp;#39;TkAgg&amp;#39;, &amp;#39;WX&amp;#39;, &amp;#39;WXAgg&amp;#39;, &amp;#39;GTK3Cairo&amp;#39;, &amp;#39;GTK3Agg&amp;#39;, &amp;#39;WebAgg&amp;#39;, &amp;#39;nbAgg&amp;#39;, &amp;#39;agg&amp;#39;, &amp;#39;cairo&amp;#39;, &amp;#39;gdk&amp;#39;, &amp;#39;pdf&amp;#39;, &amp;#39;pgf&amp;#39;, &amp;#39;ps&amp;#39;, &amp;#39;svg&amp;#39;, &amp;#39;template&amp;#39;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here, I'll use the &lt;em&gt;nbAgg&lt;/em&gt; backend.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;nbAgg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_backend&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;#39;nbAgg&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;now that the backend is set, we can import pyplot&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Figure&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;figure&lt;/code&gt; is the top level container that will contain everything we draw.&lt;br&gt;
When creating a figure, we can specify its size using the &lt;code&gt;figsize&lt;/code&gt; parameter. &lt;code&gt;figsize&lt;/code&gt; is a &lt;em&gt;width&lt;/em&gt;, &lt;em&gt;height&lt;/em&gt; tuple.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="c1"&gt;# Create a figure with width = 8 and height = 5.&lt;/span&gt;
    &lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can also use the &lt;code&gt;figaspect&lt;/code&gt; function to set the aspect ratio of our figure:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="c1"&gt;# Create a figure that is twice as tall as it is wide.&lt;/span&gt;
    &lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figaspect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Axes&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Axes&lt;/code&gt; are the area in which the data is plotted. A &lt;code&gt;Figure&lt;/code&gt; can have multiple &lt;code&gt;Axes&lt;/code&gt; but &lt;code&gt;Axes&lt;/code&gt; belong to one &lt;code&gt;Figure&lt;/code&gt; only.&lt;br&gt;
We can add &lt;code&gt;Axes&lt;/code&gt; to a &lt;code&gt;Figure&lt;/code&gt; using the &lt;code&gt;add_axes()&lt;/code&gt; or &lt;code&gt;add_subplot()&lt;/code&gt; methods. &lt;code&gt;Subplots&lt;/code&gt; and &lt;code&gt;Axes&lt;/code&gt; are the same thing.&lt;br&gt;
&lt;code&gt;add_axes()&lt;/code&gt; takes the &lt;code&gt;rect&lt;/code&gt; parameter. &lt;code&gt;rect&lt;/code&gt; is a sequence of floats that specifies [left, bottom, width, heights]. So the &lt;code&gt;Axes&lt;/code&gt; are positioned in absolute coordinates.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_axes&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;add_subplots()&lt;/code&gt; takes 3 integers as parameter. Those 3 numbers set the number of rows and columns and the position of the subplot in the grid: &lt;code&gt;add_subplots(ijk)&lt;/code&gt; add an &lt;code&gt;Axes&lt;/code&gt; in the kth position of a grid that has i rows and j columns.&lt;br&gt;
&lt;code&gt;add_subplots()&lt;/code&gt; is the easiest way to setup your layout while &lt;code&gt;add_axes()&lt;/code&gt; will give you more control over the position of your &lt;code&gt;Axes&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="c1"&gt;# Create a new axes at the first position of a 2 rows by 3 columns grid.&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;231&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;single Axes&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Create a figure.&lt;/span&gt;
&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="c1"&gt;# Add an axes.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="600"&gt;&lt;/p&gt;
&lt;h3&gt;Multiple subplots&lt;/h3&gt;
&lt;p&gt;We can create a figure with multiple subplots by calling &lt;code&gt;add_subplot()&lt;/code&gt; for each subplot we want to create.&lt;br&gt;
Here's an example for a 2 by 2 layout:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;ax1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;221&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;first subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;222&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;second subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;223&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;third subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;224&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fourth subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="600"&gt;&lt;/p&gt;
&lt;p&gt;This method is not the most efficient, especially if we want to draw a lot of subplots.&lt;br&gt;
An alternative way is to use the &lt;code&gt;plt.subplots()&lt;/code&gt; function.&lt;br&gt;
The function returns a figure and an array of axes.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nrows&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ncols&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# We can now access any Axes the same way we would access&lt;/span&gt;
&lt;span class="c1"&gt;# an element of a 2D array.&lt;/span&gt;
&lt;span class="n"&gt;axes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;first subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;axes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;second subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;axes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;third subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;axes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fourth subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="640"&gt;&lt;/p&gt;
&lt;p&gt;Another way to create grid layouts is to use the &lt;code&gt;gridspec&lt;/code&gt; module.  It lets us specify the location of subplots in the figure. It also makes it easy to have plots that span over multiple columns&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.gridspec&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;gridspec&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;# I use gridspec de set the grid.&lt;/span&gt;
&lt;span class="c1"&gt;# I need a 2x2 grid.&lt;/span&gt;
&lt;span class="n"&gt;G&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gridspec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GridSpec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# The first subplots is on the first row and span over all columns.&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;:])&lt;/span&gt;

&lt;span class="c1"&gt;# The second subplot is on the first column of the second row.&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="c1"&gt;# The third subplot is on the second column of the second row.&lt;/span&gt;
&lt;span class="n"&gt;ax3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="640"&gt;&lt;/p&gt;
&lt;p&gt;Or we can have a subplot that spans over multiple rows&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;# The first subplot is two rows high.&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="c1"&gt;# The second subplot is on the second column of the first row.&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="c1"&gt;# The third subplot is on the second column of the second row.&lt;/span&gt;
&lt;span class="n"&gt;ax3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="640"&gt;&lt;/p&gt;
&lt;p&gt;Using &lt;code&gt;gridspec&lt;/code&gt;, we can also have different sizes for each subplot by specifying ratios for &lt;em&gt;width&lt;/em&gt; and &lt;em&gt;heights&lt;/em&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;G&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gridspec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GridSpec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;width_ratios&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="c1"&gt;# The second column is two times larger than the first one.&lt;/span&gt;
                      &lt;span class="n"&gt;height_ratios&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# The first row is four times higher than the second one.&lt;/span&gt;
                     &lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# In this example, I use a different way to refer to a grid element.&lt;/span&gt;
&lt;span class="c1"&gt;# Note that it is not clear in which part of the grid the subplot is.&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="c1"&gt;# same as plt.subplot(G[0, 0])&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="c1"&gt;# same as plt.subplot(G[0, 1])&lt;/span&gt;
&lt;span class="n"&gt;ax3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="c1"&gt;# same as plt.subplot(G[1, 0])&lt;/span&gt;
&lt;span class="n"&gt;ax4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="c1"&gt;# same as plt.subplot(G[1, 1])&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="640"&gt;&lt;/p&gt;
&lt;h2&gt;Artists&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Artists&lt;/code&gt; are everything we can see on a &lt;code&gt;Figure&lt;/code&gt;. Most of them are tied to an &lt;code&gt;Axes&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Plotting&lt;/h2&gt;
&lt;p&gt;I won't spend to much time on the ploting functions. Everybody has already used them extensively and there are a lot of tutorials out there.&lt;br&gt;
I'll just add that the plotting functions we usually call using pyplot (e.g. &lt;code&gt;plt.scatter()&lt;/code&gt;) can be called on Axes: &lt;code&gt;ax.scatter()&lt;/code&gt;. This make it easy to manage multiple subplots&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;nrows&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ncols&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Plot different charts on each axes.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Embarked&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value_counts&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Pclass&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value_counts&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

&lt;span class="c1"&gt;# Customize a bit.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Embarked&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Pclass&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="600"&gt;&lt;/p&gt;
&lt;h2&gt;Customization&lt;/h2&gt;
&lt;p&gt;Now that we have set the layout and plot some data, we can have a look at how to customize the elements or &lt;code&gt;Artists&lt;/code&gt; of our plot.     &lt;/p&gt;
&lt;h3&gt;Axis and Ticks&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Axis&lt;/code&gt; are the X and Y axis of our plot, not to be confused with the &lt;code&gt;Axes&lt;/code&gt;.&lt;br&gt;
Each &lt;code&gt;Axis&lt;/code&gt; has &lt;code&gt;Ticks&lt;/code&gt; that can also be customized. Let's look at a sample plot.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="640"&gt;&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;Ticks&lt;/code&gt; on the X-axis are the marks with the numbers 0 to 10 and the ticks on the Y-axis are the marks with numbers 0 to 100.&lt;br&gt;
&lt;strong&gt;Customizing the axis&lt;/strong&gt;&lt;br&gt;
Some useful customizations on the axis are:  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ax.set_xlabel()&lt;/code&gt;, &lt;code&gt;ax.set_ylabel()&lt;/code&gt;: add a label to the axis&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ax.set_xlim()&lt;/code&gt;, &lt;code&gt;ax.set_ylim()&lt;/code&gt;: to set the data limits on the axis. We can use &lt;code&gt;get_xlim()&lt;/code&gt; or &lt;code&gt;get_ylim()&lt;/code&gt; to see what are those limits.  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Customizing the ticks&lt;/strong&gt;
We can customize the &lt;code&gt;Ticks&lt;/code&gt; using the &lt;code&gt;tick_params()&lt;/code&gt; method.&lt;br&gt;
The most useful options are:
- &lt;strong&gt;bottom, top, left, right&lt;/strong&gt;: set to True/False or 'on'/'off' to show or hide the ticks
- &lt;strong&gt;labelbottom, labeltop, labelleft, labelright&lt;/strong&gt;: set to True/False or 'on'/'off' to show or hide the ticks labels
- &lt;strong&gt;labelrotation&lt;/strong&gt;: rotate the tick labels
- &lt;strong&gt;labelsize&lt;/strong&gt;: resize the ticks labels
- &lt;strong&gt;labelolor&lt;/strong&gt;: change the color of ticks labels
- &lt;strong&gt;color&lt;/strong&gt;: change the ticks colors&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Add labels.&lt;/span&gt;
&lt;span class="c1"&gt;# We can also use LaTex notations in titles and labels.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;$x$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;$y = x^2$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Reduce the axis limites to let the line touch the borders.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Customize the ticks.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;labelleft&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;labelcolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;orange&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;labelsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
               &lt;span class="n"&gt;bottom&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;green&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
               &lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;direction&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;inout&amp;#39;&lt;/span&gt;
              &lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="640"&gt;&lt;/p&gt;
&lt;h3&gt;Spines&lt;/h3&gt;
&lt;p&gt;The spines are the lines that surround your plot. Two of them define the X and Y axis. The two others close the frame.&lt;br&gt;
We can set bounds to limit the spine length and show or hide a spine.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Shorten the spines used for the x and y axis.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_bounds&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_bounds&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Other customizations.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_linewidth&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Remove the two other spinces&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="640"&gt;&lt;/p&gt;
&lt;h3&gt;Bars, lines, markers, ...&lt;/h3&gt;
&lt;p&gt;Plotting functions return objects. For example &lt;code&gt;ax.bar(x, y)&lt;/code&gt; returns a container with all the bars. We can catch the bars and call methods on them.&lt;br&gt;
We can find the methods in the matplotlib &lt;a href="https://matplotlib.org/api/_as_gen/matplotlib.patches.Rectangle.html#matplotlib.patches.Rectangle"&gt;documentation&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;We can get the bars attributes:
- get_height()
- get_width()
- get_x(), get_y(), get_xy()&lt;/p&gt;
&lt;p&gt;or set a new value for those attributes:
- set_height()
- set_width()
- set_x(), set_y(), set_xy()
- set_color()
- ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Lets create some bars.&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;bars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;b&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# We can get the height of the bars.&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bars[&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt;]&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;s height = &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_height&lt;/span&gt;&lt;span class="p"&gt;()))&lt;/span&gt;

&lt;span class="c1"&gt;# Or we can set a different color for the third bar.&lt;/span&gt;
&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Or set a different width for the first bar.&lt;/span&gt;
&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_width&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;bars[0]&amp;#39;s height = 2
bars[1]&amp;#39;s height = 6
bars[2]&amp;#39;s height = 7
bars[3]&amp;#39;s height = 3
bars[4]&amp;#39;s height = 4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAHgCAYAAAA10dzkAAAgAElEQVR4nO3dX6jn21nf8ec0JSdiPFBKIDhqYhuVGoOWaouCUWgsRCpNLbShhSJqKebO3iVCmQujXhSSVo0IlUYsRSgFMV5YqnCCUAnh4L/iPwrJYZq0xlY8/mk1je5e/GbqzuTkZGatZ61nnvV7veADx+nsYa9vvvP9vjtnzz4RAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwP/3VETciYhnzMzMrNXuxOU9Do/tTkTcmJmZWcvdCRjwTETc3Lt37+aFF14wMzOzBrt3796DAHymuCNo6pmIuHnhhRduAIAeXnjhBQHIFAEIAM0IQGYJQABoRgAySwACQDMCkFkCEACaEYDMEoAA0IwAZJYABIBmBCCzBCAANCMAmSUAAaAZAcgsAQgAzQhAZglAAGhGAPLhePH/OPQPPuLHC0AAaEYA8qqIePWtvSkuN8TXP+LHC0AAaEYA8rB3R8R/jYinHvHnC0AAaEYActvLI+J/RsQ7XuLnPB2Xm+XB7oQAhHnPP39z89xz9qh7/vnq/8WgNQHIbX8/Ij4REZ/7Ej/nbrzI1wwKQJjw/PM3N694xc1NhD3qXvEKEQgTBCC3/ceIeN9n+Dn+BBCyPfdcfVB13HPPVf8vB20JQB54TUT8SUT8ncf8OF8DCLMEoACEzQQgD9yNiP8eEX/+MT9OAMIsASgAYTMBSETEn4uI5yPi+wY+VgDCLAEoAGEzAUhExN+Ky03wxQMfKwBhlgAUgLCZAGSWAIRZAlAAwmYCkFkCEGYJQAEImwlAZglAmCUABSBsJgCZJQBhlgAUgLCZAGSWAIRZAlAAwmYCkFkCEGYJQAEImwlAZglAmCUABSBsJgCZJQBhlgAUgLCZAGSWAIRZAlAAwmYCkFkCEGYJQAEImwlAZglAmCUABSBsJgCZJQBhlgAUgLCZAGSWAIRZAlAAwmYCkFkCEGYJQAEImwlAZglAmCUABSBsJgCZJQBhlgAUgLCZAGSWAIRZAlAAwmYCkFkCEGYJQAEImwlAZglAmCUABSBsJgCZJQBhlgAUgLCZAGSWAIRZAlAAwmYCkFkCEGYJQAEImwlAZglAmCUABSBsJgCZJQBhlgAUgLCZAGSWAIRZAlAAwmYCkFkCEGYJQAEImwlAZglAmCUABSBsJgCZJQBhlgAUgLCZAGSWAIRZAlAAwmYCkFkCEGYJQAEImwlAZglAmCUABSBsJgCZJQBhlgAUgLCZAGSWAIRZAlAAwmYCkFkCEGYJQAEImwlAZglAmCUABSBsJgCZJQBhlgAUgLCZAGSWAIRZAlAAwmYCkFkCEGYJQAEImwlAZglAmCUABSBsJgCZJQBhlgAUgLCZAORORPzbiPhfEfG/I+IXI+KvPcbHC0CYJQAFIGwmAK/bX4iID0fEv4mIvx4Rr42IvxkRf/kxfg0BCLMEoACEzQTgdfu+iPi5yV9DAMIsASgAYTMBeN1+NSLeFRH/PiI+FhG/EBH/5DN8zNNxuVke7E4IQJgjAAUgbCYAr9sf3d/3RMRfjYh/GhH/JyL+8Ut8zN243DCfNAF4jup3erelEIBjE4AwTABet49HxH9+6Mf+VUT8/Et8jD8BPFz1O73bUgjAsQlAGCYAr9vzEfGvH/qx74iIjzzGr+FrAA9T/U7vthQCcGwCEIYJwOv27+JT/xLIu+JT/1TwpQjAw1S/07sthQAcmwCEYQLwun1VRPzfiHhHRLwuIv5hRPxhRPyjx/g1BOBhqt/p3ZZCAI5NAMIwAcjfjohfictfBvm1+Mx/C/hhAvAw1e/0bkshAMcmAGGYAGSWADxM9Tu921IIwLEJQBgmAJklAA9T/U7vthQCcGwCEIYJQGYJwMNUv9O7LYUAHJsAhGECkFkC8DDV7/RuSyEAxyYAYZgAZJYAPEz1O73bUgjAsQlAGCYAmSUAD1P9Tu+2FAJwbAIQhglAZgnAw1S/07sthQAcmwCEYQKQWQLwMNXv9G5LIQDHJgBhmABklgA8TPU7vdtSCMCxCUAYJgCZJQAPU/1O77YUAnBsAhCGCUBmCcDDVL/Tuy2FABybAIRhApBZAvAw1e/0bkshAMcmAGGYAGSWADxM9Tu921IIwLEJQBgmAJklAA9T/U7vthQCcGwCEIYJQGYJwMNUv9O7LYUAHJsAhGECkFkC8DDV7/RuSyEAxyYAYZgAZJYAPEz1O73bUgjAsQlAGCYAmSUAD1P9Tu+2FAJwbAIQhglAZgnAw1S/07sthQAcmwCEYQKQWQLwMNXv9G5LIQDHJgBhmABklgA8TPU7vdtSCMCxCUAYJgCZJQAPU/1O77YUAnBsAhCGCUBmCcDDVL/Tuy2FABybAIRhApBZAvAw1e/0bkshAMcmAGGYAGSWADxM9Tu921IIwLEJQBgmAJklAA9T/U7vthQCcGwCEIYJQGYJwMNUv9O7LYUAHJsAhGECkFkC8DDV7/RuSyEAxyYAYZgAZJYAPEz1O73bUgjAsQlAGCYAmSUAD1P9Tu+2FAJwbAIQhglAZgnAw1S/07sthQAcmwCEYQKQWQLwMNXv9G5LIQDHJgBhmABklgA8TPU7vdtSCMCxCUAYJgCZJQAPU/1O77YUAnBsAhCGCUBmCcDDVL/Tuy2FABybAIRhApBZAvAw1e/0bkshAMcmAGGYAGSWADxM9Tu921IIwLEJQBgmAJklAA9T/U7vthQCcGwCEIYJQGYJwMNUv9O7LYUAHJsAhGECkFkC8DDV7/RuSyEAxyYAYZgAvG534/I//u39j8f8NQTgYarf6d2WQgCOTQDCMAF43e5GxH+JiFff2qse89cQgIepfqd3WwoBODYBCMME4HW7GxG/OPlrCMDDVL/Tuy2FABybAIRhAvC63Y2IP4yIj0bEhyLixyPiLz3mryEAD1P9Tu+2FAJwbAIQhgnA6/bmiPh7EfGGiHhTRDwbl68B/Isv8TFPx+VmebA7EQLwJNXv9G5LIQDHJgBhmADkts+OSwD+s5f4OXcjPuUvjgjAg1S/07sthQAcmwCEYQKQh/2niPihl/h/9yeAh6t+p3dbCgE4NgEIwwQgtz0dEf8tIv75Y3yMrwE8TPU7vdtSCMCxCUAYJgCv27+IiK+LiC+MiL8REe+LiN+LiNc8xq8hAA9T/U7vthQCcGwCEIYJwOv243H5G8Afj4iPRMR/iIgvfcxfQwAepvqd3m0pBODYBCAME4DMEoCHqX6nd1sKATg2AQjDBCCzBOBhqt/p3ZZCAI5NAMIwAcgsAXiY6nd6t6UQgGMTgDBMADJLAB6m+p3ebSkE4NgEIAwTgMwSgIepfqd3WwoBODYBCMMEILME4GGq3+ndlkIAjk0AwjAByCwBeJjqd3q3pRCAYxOAMEwAMksAHqb6nd5tKQTg2AQgDBOAzBKAh6l+p3dbCgE4NgEIwwQgswTgYarf6d2WQgCOTQDCMAHILAF4mOp3erelEIBjE4AwTAAySwAepvqd3m0pBODYBCAME4DMEoCHqX6nd1sKATg2AQjDBCCzBOBhqt/p3ZZCAI5NAMIwAcgsAXiY6nd6t6UQgGMTgDBMADJLAB6m+p3ebSkE4NgEIAwTgMwSgIepfqd3WwoBODYBCMMEILME4GGq3+ndlkIAjk0AwjAByCwBeJjqd3q3pRCAYxOAMEwAMksAHqb6nd5tKQTg2AQgDBOAzBKAh6l+p3dbCgE4NgEIwwQgswTgYarf6d2WQgCOTQDCMAHILAF4mOp3erelEIBjE4AwTAAySwAepvqd3m0pBODYBCAME4DMEoCHqX6nd1sKATg2AQjDBCCzBOBhqt/p3ZZCAI5NAMIwAcgsAXiY6nd6t6UQgGMTgDBMADJLAB6m+p3ebSkE4NgEIAwTgMwSgIepfqd3WwoBODYBCMMEILME4GGq3+ndlkIAjk0AwjAByCwBeJjqd3q3pRCAYxOAMEwAMksAHqb6nd5tKQTg2AQgDBOAzBKAh6l+p3dbCgE4NgEIwwQgswTgYarf6d2WQgCOTQDCMAHILAF4mOp3erelEIBjE4AwTAAySwAepvqd3m0pBODYBCAME4DMEoCHqX6nd1sKATg2AQjDBCCzBOBhqt/p3ZZCAI5NAMIwAcgsAXiY6nd6t6UQgGMTgDBMADJLAB6m+p3ebSkE4NgEIAwTgMwSgIepfqd3WwoBODYBCMMEILe9PS43w7sf42ME4GGq3+ndlkIAjk0AwjAByANfFREfiohfCgF41arf6d2WQgCOTQDCMAFIRMQrI+I3I+JNEfFsCMCrVv1O77YUAnBsAhCGCUAiIn40It51/5+fjZcOwKfjcrM82J0IAXiS6nd6t6UQgGMTgDBMAPLWiPiViHjF/f/72XjpALwblxvmkyYAz1H9Tu+2FAJwbAKwrepbp9NWEYDX7fMj4rci4stv/diz4U8Ar1r1w67bUgjAsQnAtqpvnU5bRQBet7fE5X/8T9zaTUT86f1/ftkj/Bq+BvAw1Q+7bkshAMcmANuqvnU6bRUBeN0+JyK+7KF9MCJ+7P4/PwoBeJjqh123pRCAYxOAbVXfOp22igDkYc+GvwV81aofdt2WQgCOTQC2VX3rdNoqApCHPRsC8KpVP+y6LYUAHJsAbKv61um0VQQgswTgYaofdt2WQgCOTQC2VX3rdNoqApBZAvAw1Q+7bkshAMcmANuqvnU6bRUByCwBeJjqh123pRCAYxOAbVXfOp22igBklgA8TPXDrttSCMCxCcC2qm+dTltFADJLAB6m+mHXbSkE4NgEYFvVt06nrSIAmSUAD1P9sOu2FAJwbAKwrepbp9NWEYDMEoCHqX7YdVsKATg2AdhW9a3TaasIQGYJwMNUP+y6LYUAHJsAbKv61um0VQQgswTgYaofdt2WQgCOTQC2VX3rdNoqApBZAvAw1Q+7bkshAMcmANuqvnU6bRUByCwBeJjqh123pRCAYxOAbVXfOp22igBklgA8TPXDrttSCMCxCcC2qm+dTltFADJLAB6m+mHXbSkE4NgEYFvVt06nrSIAmSUAD1P9sOu2FAJwbAKwrepbp9NWEYDMEoCHqX7YdVsKATg2AdhW9a3TaasIQGYJwMNUP+y6LYUAHJsAbKv61um0VQQgswTgYaofdt2WQgCOTQC2VX3rdNoqApBZAvAw1Q+7bkshAMcmANuqvnU6bRUByCwBeJjqh123pRCAYxOAbVXfOp22igBklgA8TPXDrttSCMCxCcC2qm+dTltFADJLAB6m+mHXbSkE4NgEYFvVt06nrSIAmSUAD1P9sOu2FAJwbAKwrepbp9NWEYDMEoCHqX7YdVsKATg2AdhW9a3TaasIQGYJwMNUP+y6LYUAHJsAbKv61um0VQQgswTgYaofdt2WQgCOTQC2VX3rdNoqApBZAvAw1Q+7bkshAMcmANuqvnU6bRUByCwBeJjqh123pRCAYxOAbVXfOp22igBklgA8TPXDrttSCMCxCcC2qm+dTltFADJLAB6m+mHXbSkE4NgEYFvVt06nrSIAmSUAD1P9sOu2FAJwbAKwrepbp9NWEYDMEoCHqX7YdVsKATg2AdhW9a3TaasIQGYJwMNUP+y6LYUAHJsAbKv61um0VQQgswTgYaofdt2WQgCOTQC2VX3rdNoqApBZAvAw1Q+7bkshAMcmANuqvnU6bRUByCwBeJjqh123pRCAYxOAbVXfOp22igBklgA8TPXDrttSCMCxCcC2qm+dTltFADJLAB6m+mHXbSkE4NgEYFvVt06nrSIAmSUAD1P9sOu2FAJwbAKwrepbp9NWEYDMEoCHqX7YdVsKATg2AdhW9a3TaasIQGYJwMNUP+y6LYUAHJsAbKv61um0VQQg3xERvxwRv3d/Px8Rb36MjxeAh6l+2HVbCgE4NgHYVvWt02mrCEC+KSK+MSK++P7eGREfj4jXP+LHC8DDVD/sui2FABybAGyr+tbptFUEIC/mdyLi2x7x5wrAw1Q/7LothQAcmwBsq/rW6bRVBCC3vSwi3hoRfxwRX/ppfs7TcblZHuxOhAA8SfXDrttSCMCxCcC2qm+dTltFABIR8YaI+IOI+ERE/G5c/pXwp3M3LjfMJ00AnqP6YddtKQTg2BICsPoI3Zal+hydtooAJCLi5RHxuoj4yoj43oj47fAngFer+mHXbSkE4NgE4PZlqT5Hp60iAHkxPxMRP/yIP9fXAB6m+mHXbSkE4NgE4PZlqT5Hp60iAHkxPxsR733EnysAD1P9sOu2FAJwbAJw+7JUn6PTVhGAfE9EfG1EvDYuXwv4zoj4k4j4hkf8eAF4mOqHXbelEIBjE4Dbl6X6HJ22igDkRyLiw3H5m78fi8u//n3U+IsQgMepfth1WwoBODYBuH1Zqs/RaasIQGYJwMNUP+y6LYUAHJsA3L4s1efotFUEILME4GGqH3bdlkIAjk0Abl+W6nN02ioCkFkC8DDVD7tuSyEAxyYAty9L9Tk6bRUByCwBeJjqh123pRCAYxOA25el+hydtooAZJYAPEz1w67bUgjAsQnA7ctSfY5OW0UAMksAHqb6YddtKQTg2ATg9mWpPkenrSIAmSUAD1P9sOu2FAJwbAJw+7JUn6PTVhGAzBKAh6l+2HVbCgE4NgG4fVmqz9FpqwhAZgnAw1Q/7LothQAcmwDcvizV5+i0VQQgswTgYaofdt2WQgCOTQBuX5bqc3TaKgKQWQLwMNUPu25LIQDHJgC3L0v1OTptFQHILAF4mOqHXbelEIBjE4Dbl6X6HJ22igBklgA8TPXDrttSCMCxCcDty1J9jk5bRQAySwAepvph120pBODYBOD2Zak+R6etIgCZJQAPU/2w67YUAnBsAnD7slSfo9NWEYDMEoCHqX7YdVsKATg2Abh9WarP0WmrCEBmCcDDVD/sui2FABybANy+LNXn6LRVBCCzBOBhqh923ZZCAI5NAG5flupzdNoqApBZAvAw1Q+7bkshAMcmALcvS/U5Om0VAcgsAXiY6oddt6UQgGMTgNuXpfocnbaKAGSWADxM9cOu21IIwLEJwO3LUn2OTltFADJLAB6m+mHXbSkE4NgE4PZlqT5Hp60iAJklAA9T/bDrthQCcGwCcPuyVJ+j01YRgMwSgIepfth1WwoBODYBuH1Zqs/RaasIQGYJwMNUP+y6LYUAHJsA3L4s1efotFUEILME4GGqH3bdlkIAjk0Abl+W6nN02ioCkFkC8DDVD7tuSyEAxyYAty9L9Tk6bRUByCwBeJjqh123pRCAYxOA25el+hydtooAZJYAPEz1w67bUgjAsQnA7ctSfY5OW0UAMksAHqb6YddtKQTg2ATg9mWpPkenrSIAmSUAD1P9sOu2FAJwbAJw+7JUn6PTVhGAzBKAh6l+2HVbCgE4NgG4fVmqz9FpqwhAZgnAw1Q/7LothQAcmwDcvizV5+i0VQQgswTgYaofdt2WQgCOTQBuX5bqc3TaKgKQWQLwMNUPu25LIQDHJgC3L0v1OTptFQHILAF4mOqHXbelEIBjE4Dbl6X6HJ22igBklgA8TPXDrttSCMCxCcDty1J9jk5bRQAySwAepvph120pBODYBOD2Zak+R6etIgCZJQAPU/2w67YUAnBsAnD7slSfo9NWEYDMEoCHqX7YdVsKATg2Abh9WarP0WmrCEDeHhEfjIjfj4iPRcRPRMSXPMbHC8DDVD/sui2FABybANy+LNXn6LRVBCA/HRHfEhGvj4gvj4ifiojnI+KzH/HjBeBhqh923ZZCAI5NAG5flupzdNoqApCHvSouN8QbH/HnC8DDVD/sui2FABybANy+LNXn6LRVBCAPe11cbogve8SfLwAPU/2w67YUAnBsAnD7slSfo9NWEYDc9lRE/GRE/NxL/Jyn43KzPNidCAF4kuqHXbelEIBjE4Dbl6X6HJ22igDkth+MiA9HxOe9xM+5G5cb5pO2KgCrf+Pt/M34pKi+vt2WQgCOTQBuX5bqc3TaKgKQB74/Iu5FxBd+hp+39U8Aq3/j7fzN+KSovr7dlkIAjk0Abl+W6nN02ioCkKci4gci4iMR8UUDH7/0awCrf+Pt/M34pKi+vt2WQgCOTQBuX5bqc3TaKgKQ90TE70bE10XEq2/tsx7x4wXgYaqvb7elEIBjE4Dbl6X6HJ22igDk5tPsWx7x4wXgYaqvb7elEIBjE4Dbl6X6HJ22igBklgA8TPX17bYUAnBsAnD7slSfo9NWEYDMEoCHqb6+3ZZCAI5NAG5flupzdNoqApBZAvAw1de321IIwLEJwO3LUn2OTltFADJLAB6m+vp2WwoBODYBuH1Zqs/RaasIQGYJwMNUX99uSyEAxyYAty9L9Tk6bRUByCwBeJjq69ttKQTg2ATg9mWpPkenrSIAmSUAD1N9fbsthQAcmwDcvizV5+i0VQQgswTgYaqvb7elEIBjE4Dbl6X6HJ22igBklgA8TPX17bYUAnBsAnD7slSfo9NWEYDMEoCHqb6+3ZZCAI5NAG5flupzdNoqApBZAvAw1de321IIwLEJwO3LUn2OTltFADJLAB6m+vp2WwoBODYBuH1Zqs/RaasIQGYJwMNUX99uSyEAxyYAty9L9Tk6bRUByCwBeJjq69ttKQTg2ATg9mWpPkenrSIAmSUAD1N9fbsthQAcmwDcvizV5+i0VQQgswTgYaqvb7elEIBjE4Dbl6X6HJ22igBklgA8TPX17bYUAnBsAnD7slSfo9NWEYDMEoCHqb6+3ZZCAI5NAG5flupzdNoqApBZAvAw1de321IIwLEJwO3LUn2OTltFADJLAB6m+vp2WwoBODYBuH1Zqs/RaasIQGYJwMNUX99uSyEAxyYAty9L9Tk6bRUByCwBeJjq69ttKQTg2ATg9mWpPkenrSIAmSUAD1N9fbsthQAcmwDcvizV5+i0VQQgswTgYaqvb7elEIBjE4Dbl6X6HJ22igBklgA8TPX17bYUAnBsAnD7slSfo9NWEYDMEoCHqb6+3ZZCAI5NAG5flupzdNoqApBZAvAw1de321IIwLEJwO3LUn2OTltFADJLAB6m+vp2WwoBODYBuH1Zqs/RaasIQGYJwMNUX99uSyEAxyYAty9L9Tk6bRUByCwBeJjq69ttKQTg2ATg9mWpPkenrSIAmSUAD1N9fbsthQAcmwDcvizV5+i0VQQgswTgYaqvb7elEIBjE4Dbl6X6HJ22igBklgA8TPX17bYUAnBsAnD7slSfo9NWEYDMEoCHqb6+3ZZCAI5NAG5flupzdNoqApBZAvAw1de321IIwLEJwO3LUn2OTltFADJLAB6m+vp2WwoBODYBuH1Zqs/RaasIQGYJwMNUX99uSyEAxyYAty9L9Tk6bRUByCwBeJjq69ttKQTg2ATg9mWpPkenrSIAmSUAD1N9fbsthQAcmwDcvizV5+i0VQQgswTgYaqvb7elEIBjE4Dbl6X6HJ22igDkjRHxvoj4aFxuhLc85scLwMNUX99uSyEAxyYAty9L9Tk6bRUByJsj4rsj4psjBGDlb8YnRfX17bYUAnBsAnD7slSfo9NWEYDcdhMCsOw345Oi+vp2WwoBODYBuH1Zqs/RaasIQG67CQFY9pvxSVF9fbsthQAcmwDcvizV5+i0VQQgt93EZw7Ap+NyszzYnQgBeJLq69ttKQTg2ATg9mWpPkenrSIAue0mPnMA3r3/8z5pAvAc1de321IIwLEJwO3LUn2OTltFAHLbTfgTwLLfjE+K6uvbbSkE4NgE4PZlqT5Hp60iALntJnwNYNlvxidF9fXtthQCcGwCcPuyVJ+j01YRgLwyIr7i/m4i4jvv//MXPOLHC8DDVF/fbkshAMcmALcvS/U5Om0VAcjXR3zq1/RFxHsf8eMF4GGqr2+3pRCAYxOA25el+hydtooAZJYAPEz19e22FAJwbAJw+7JUn6PTVhGAzBKAh6m+vt2WQgCOTQBuX5bqc3TaKgKQWQLwMNXXt9tSCMCxCcDty1J9jk5bRQAySwAepvr6dlsKATg2Abh9WarP0WmrCEBmCcDDVF/fbkshAMcmALcvS/U5Om0VAcgsAXiY6uvbbSkE4NgE4PZlqT5Hp60iAJklAA9TfX27LYUAHJsA3L4s1efotFUEILME4GGqr2+3pRCAYxOA25el+hydtooAZJYAPEz19e22FAJwbAJw+7JUn6PTVhGAzBKAh6m+vt2WQgCOTQBuX5bqc3TaKgKQWQLwMNXXt9tSCMCxCcDty1J9jk5bRQAySwAepvr6dlsKATg2Abh9WarP0WmrCEBmCcDDVF/fbkshAMcmALcvS/U5Om0VAcgsAXiY6uvbbSkE4NgE4PZlqT5Hp60iAJklAA9TfX27LYUAHJsA3L4s1efotFUEILME4GGqr2+3pRCAYxOA25el+hydtooAZJYAPEz19e22FAJwbAJw+7JUn6PTVhGAzBKAh6m+vt2WQgCOTQBuX5bqc3TaKgKQWQLwMNXXt9tSCMCxCcDty1J9jk5bRQAySwAepvr6dlsKATg2Abh9WarP0WmrCEBmCcDDVF/fbkshAMcmALcvS/U5Om0VAcgsAXiY6uvbbSkE4NgE4PZlqT5Hp60iAJklAA9TfX27LYUAHJsA3L4s1efotFUEILME4GGqr2+3pRCAYxOA25el+hydtooAZJYAPEz19e22FAJwbAJw+7JUn6PTVhGAzBKAh6m+vt2WQgCOTQBuX5bqc3TaKgKQWQLwMNXXt9tSCMCxCcDty1J9jk5bRQAySwAepvr6dlsKATg2Abh9WarP0WmrCEBmCcDDVF/fbkshAMcmALcvS/U5OtTYyzsAAAWVSURBVG0VAcgsAXiY6uvbbSkE4NgE4PZlqT5Hp60iAJklAA9TfX27LYUAHJsA3L4s1efotFUEILME4GGqr2+3pRCAYxOA25el+hydtooAZJYAPEz19e22FAJwbAJw+7JUn6PTVhGAzBKAh6m+vt2WQgCOTQBuX5bqc3TaKgKQWQLwMNXXt9tSCMCxCcDty1J9jk5bRQAySwAepvr6dlsKATg2Abh9WarP0WmrCEBmCcDDVF/fbkshAMcmALcvS/U5Om0VAcgsAXiY6uvbbSkE4NgE4PZlqT5Hp60iAJklAA9TfX27LYUAHJsA3L4s1efotFUEILME4GGqr2+3pRCAYxOA25el+hydtooAZJYAPEz19e22FAJwbAJw+7JUn6PTVhGARES8LSI+FBF/FBHPRcTXPsbHCsDDVF/fbkshAMcmALcvS/U5Om0VAcg/iIiPR8S3R8RfiYh3R8QfRMQXPOLHC8DDVF/fbkshAMcmALcvS/U5Om0VAcgHIuKHHvqxX4uI733EjxeAh6m+vt2WQgCOTQBuX5bqc3TaKgLwur08Ij4REX/3oR//lxHx/k/zMU/H5WZ5sDsRcXPv3r2bF154IX0RT95WnPNJWvX17baU6/7+99+8EGGPu/e/3/3e8X533Uuu+cO7d+/eTQjAq/W5cfkf/2se+vF3RMRvfJqPuXv/Y8zMzKz/7gRX50EAfvVDP/5dEfHrn+ZjHv4TwGci4rUv8mOn7k782W+Y6s/lmua6u+7XNNfddd955qeCqzPyr4Cv3TNxeUA8U/2JXBnXvYbrXsN1r+G6c1U+EBHveejHfjUe/S+BXBsPiBquew3XvYbrXsN156o8+DYw3xqXbwPzrrh8G5jXVH5STzAPiBquew3XvYbrXsN15+q8LSI+HBF/HJdvBP3G0s/myfZ0XP4izNPFn8e1cd1ruO41XPcarjsAAAAAAAAAAAAAAABAZ2+LiA9FxB/F5W9Mf23tp3O8N0bE+yLio3H59gxvqf10rsbbI+KDEfH7EfGxiPiJiPiS0s/oOnxHRPxyRPze/f18RLy59DO6Pm+Py7Pm3dWfCPDkePA9E789Lt8z8d1x+Z6JX1D5SR3uzRHx3RHxzSEAd/rpiPiWiHh9RHx5RPxURDwfEZ9d+Dldg2+KiG+MiC++v3fG5Znz+spP6op8VVz+P/i/FAIQuOUDEfFDD/3Yr4X/asouArDOq+Jy/X2P0P1+JyK+rfqTuAKvjIjfjIg3RcSzIQCB+/x3k+sJwDqvi8v1/7LqT+SKvCwi3hqXb9D/pcWfyzX40bj8l7AiBCBwy+fG5QX4NQ/9+Dsi4jf2fzpXSQDWeCoifjIifq76E7kSb4jLl5Z8IiJ+Ny7/Spi13hoRvxIRr7j/fz8bAhC470EAfvVDP/5dEfHr+z+dqyQAa/xgXP5TkZ9X/Hlci5fH5U9cvzIuX17y2+FPAFf6/Ij4rbh8resDz4YABO7zr4DrCcD9vj8i7kXEF1Z/IlfsZyLih6s/iYO9JS7Plk/c2k1E/On9f35Z3acGPCk+EBHveejHfjX8JZBdBOA+T0XED0TERyLii4o/l2v3sxHx3upP4mCfE5evbb29D0bEj4WveQXue/BtYL41Lt8G5l1x+Vqd11R+Uod7ZUR8xf3dRMR33v9n33pnrffE5evPvi4iXn1rn1X5SV2B74nL9xZ9bVy+FvCdEfEnEfENhZ/TNXo2/Ctg4CFvi8vXQ/1xXL4RtG+LsdbXxyX8Ht576z6lq/Bi1/wmLt8bkHV+JP7s+fKxuPzrX/G337MhAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgifH/AB73MHWFXrZRAAAAAElFTkSuQmCC" width="640"&gt;&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;hist()&lt;/code&gt; method returns an array of the bins values, an array of bins and the patches used to draw the histogram.
In the following example, I'll look at the age distribution of the Titanic's passengers. I'll set a different color to the highest bar to have it stand out.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Age&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dropna&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;bins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Get the value of each bin.&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nb"&gt;bin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bin &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt;: &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt; passengers&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;bin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;

&lt;span class="c1"&gt;# Change the highest bin color.&lt;/span&gt;
&lt;span class="n"&gt;max_idx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argmax&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;max_idx&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;bin 0: 40 passengers
bin 5: 22 passengers
bin 10: 16 passengers
bin 15: 86 passengers
bin 20: 114 passengers
bin 25: 106 passengers
bin 30: 95 passengers
bin 35: 72 passengers
bin 40: 48 passengers
bin 45: 41 passengers
bin 50: 32 passengers
bin 55: 16 passengers
bin 60: 15 passengers
bin 65: 4 passengers
bin 70: 6 passengers
bin 75: 0 passengers
bin 80: 1 passengers
bin 85: 0 passengers
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="640"&gt;&lt;/p&gt;
&lt;h3&gt;Annotations&lt;/h3&gt;
&lt;p&gt;We can add text to our plot with &lt;code&gt;ax.annotation()&lt;/code&gt; and &lt;code&gt;ax.text()&lt;/code&gt;.&lt;br&gt;
&lt;code&gt;ax.annotation('text', (x, y)&lt;/code&gt;&lt;br&gt;
&lt;code&gt;ax.text(x, y, 'text', **kwargs)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;If needed, we can add arrows to point our annotation to a specific point. Just use &lt;code&gt;ax.arrow(x, y, dx, dy)&lt;/code&gt; where &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; are the coordinates of the origin of the arrow and &lt;code&gt;dx&lt;/code&gt;, &lt;code&gt;dy&lt;/code&gt; are the length of the arrow along the coordinates.&lt;br&gt;
We can also add more arguments to customize the arrow:
- &lt;strong&gt;width&lt;/strong&gt;: width of the arrow tail
- &lt;strong&gt;head_width&lt;/strong&gt;: width of the arrow head
- &lt;strong&gt;head_length&lt;/strong&gt;: length of the arrow head
- &lt;strong&gt;shape&lt;/strong&gt;: shape of the arrow head ('full', 'left' or 'right')
- &lt;strong&gt;edgecolor&lt;/strong&gt;, &lt;strong&gt;facecolor&lt;/strong&gt;
- &lt;strong&gt;color&lt;/strong&gt; (will override edgecolor and facecolor)
- ...&lt;/p&gt;
&lt;p&gt;Let's look at an example.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;annotate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bar&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
        &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
        &lt;span class="s1"&gt;&amp;#39;foo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;red&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Add an arrow that starts at &amp;#39;foo&amp;#39; and point at the line.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arrow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;48&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;length_includes_head&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;0.3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;head_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;facecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;y&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;edgecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# We can also set an arrow in the annotate method.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;annotate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;quz&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
            &lt;span class="n"&gt;xytext&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="c1"&gt;# text coordinates &lt;/span&gt;
            &lt;span class="n"&gt;xy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;7.8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;   &lt;span class="c1"&gt;# arrow head coordinates&lt;/span&gt;
            &lt;span class="n"&gt;arrowprops&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arrowstyle&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="640"&gt;&lt;/p&gt;
&lt;h2&gt;Practice&lt;/h2&gt;
&lt;p&gt;Now, let's use everything we've learn to create some nice visualizations.&lt;/p&gt;
&lt;h3&gt;Exercise 1&lt;/h3&gt;
&lt;p&gt;In this first exercise, I am going to improve a simple bar chart showing the number of passengers per port of embarkation.&lt;br&gt;
Here's the default chart rendered by pyplot.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Embarked&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value_counts&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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dQjAut6Q9gf3o4U9nuSvhpcvyzhfAvYvgCYAAYoTgHU9I8kFS/tKkpuHlzd+COTNCx9zVlb/EMhZC7e5In4IxLbJABiHAJyXQ3ny08AcTvvXwP1JPpfVTwPz2eH9lw239zQwti0GwDgE4LwcyvEBeEZazD2Y5NG0J3w+e+ljzkny6eH9Dw63373G7ykATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6SUATQACFCMA6/qNJF9N8vCwLyW5fOH9u5PckOSBJI8k+VSS5y39GuckuXV4/wNJPpDk9DU/DwFoAhCgGAFY199N8vokPzPsd5IcS3L+8P4bk3w3yWuT7E/y+SR3JTlteP9pSe4Z3r5/uN19adG4DgFoAhCgGAE4L3+e5B8meWZaDF6x8L69SX6c5HXD65cPr+9duM2VSR7LeheDADQBCFCMAJyH09Li7WiSn03ymrQ/1D1Lt7s7yXuGl987vL5oz/Bxrz7B77U77WLZ2L4IQBOAAKUIwNp+LslfJvlRkofSviScJFelxeCyzyT58PDyTcPry44mecsJfs+DaRfMcROAJgAB6hCAtZ2e5MVJfjHJ+5L8Wdq/AG4WgHcm+dDw8k1J7lhxm2Np/5q4Gf8CaAIQoDgBOC+fTfsXvjG/BLzM9wCaAAQoRgDOy+eSfDRP/BDImxfed1ZW/xDIWQu3uSJ+CMS2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" width="640"&gt;&lt;/p&gt;
&lt;p&gt;I am going to remove unecessary elements and change the colors.&lt;br&gt;
I'll add some meaningful information like labels and values on bars and a title.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Embarked&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value_counts&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;bars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;lightslategrey&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Remove the frame.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_frame_on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# We need only 3 ticks (one per bar).&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="c1"&gt;# We don&amp;#39;t want the ticks, only the labels.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bottom&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;off&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticklabels&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Southampton&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Cherbourg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Queenstown&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                   &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fontsize&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s1"&gt;&amp;#39;verticalalignment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s1"&gt;&amp;#39;horizontalalignment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="p"&gt;})&lt;/span&gt;

&lt;span class="c1"&gt;# Remove ticks on the y axis and show values in the bars.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;left&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;off&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;labelleft&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;off&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Add the values on each bar.&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_x&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_width&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c1"&gt;# x coordinate&lt;/span&gt;
            &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_height&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;              &lt;span class="c1"&gt;# y coordinate&lt;/span&gt;
            &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;                             &lt;span class="c1"&gt;# text&lt;/span&gt;
            &lt;span class="n"&gt;ha&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;                       &lt;span class="c1"&gt;# horizontal alignment&lt;/span&gt;
            &lt;span class="n"&gt;va&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;                          &lt;span class="c1"&gt;# vertical alignment&lt;/span&gt;
            &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;                         &lt;span class="c1"&gt;# text color&lt;/span&gt;
            &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 

&lt;span class="c1"&gt;# Use a different color for the first bar.&lt;/span&gt;
&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;firebrick&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Add a title.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Most of passengers embarked at Southampton&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fontsize&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="s1"&gt;&amp;#39;fontweight&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;bold&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="s1"&gt;&amp;#39;verticalalignment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;baseline&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="s1"&gt;&amp;#39;horizontalalignment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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AGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGR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6Xr97G854m0nlFJKOesz588d+4wXH1puuPGmsnPnrvLcfzq882Xva7reB4AFKSDSlyggIrPT9X4wT9frZ3/LZ86/uJRSymFHHzd37JFvP7GUUsoZn/5s58vd53S9DwALUkCkL1FARGan6/1gnq7Xz/6Uf3jVEWX37t3l6muvK0994avnjj/3gktKKaUc+oZ3dr7sfU7X+wCwIAVE+hIFRGR2ut4P5ul6/exPOeEDp5ZSSjnx5NPmjn3Bvx5Zdt92W7nq6mvLU3uw7H1O1/sAsCAFRPoSBURkdrreD+bpev3sL3nqCw4uV119bdl9223lBf965NzxJ558WimllBM+cGrny973dL0PAAtSQKQvUUBEZqfr/WCertfP/pJD3/DOUkop51xw8dyxT33BweVL11xXdu/e7W9/LJCu9wFgQQqI9CUKiMjsdL0fzNP1+tlfcsanzyullHLE20+cO/awo48rpZRy9mcv6ny594d0vQ8AC1JApC9RQERmp+v9YJ6u18/+kOe8fLXs3LmrXH/jTeXpLz5k7vgzzz6/lFLK6956fOfLvj+k630AWJACIn2JAiIyO13vB/N0vX72hxxz4smllFJO+ugn5o597j8dXnbu2lWuu+HG8vQXzS8r0v99BBhRQKQvUUBEZqfr/WCertfP/pDLvnBlKaWUlx569Nyxx777g6WUUt7/4TM6X+79JV3vA8CCFBDpSxQQkdnpej+Yp+v10/f88+FvKaWUcuHnLl9o/OevuKqUUspLDnlD58u+v6TrfQBYkAIifYkCIjI7Xe8H83S9fkS63geABSkg0pcoICKz0/V+ME/X60ek630AWJACIn2JAiIyO13vB/N0vX5Eut4HgAUpINKXKCAis9P1fjBP1+tHpOt9AFiQAiJ9iQIiMjtd7wfzdL1+RLreB4AFKSDSlyggIrPT9X4wT9frR6TrfQBYkAIifYkCIjI7Xe8H83S9fkS63geABSkg0pcoICKz0/V+ME/X60ek630AWJACIn2JAiIyO13vB/N0vX5Eut4HgAUpINKXKCAis9P1fjBP1+tHpOt9AFiQAiJ9iQIiMjtd7wfzdL1+RLreB4AFKSDSlyggIrPT9X4wT9frR6TrfQBYkAIifYkCIjI7Xe8H83S9fkS63geABSkg0pcoICKz0/V+ME/X60ek630AWJACIn2JAiIyO13vB/N0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" width="800"&gt;&lt;/p&gt;
&lt;h3&gt;Exercise 2&lt;/h3&gt;
&lt;p&gt;In this second exercise, I am going to plot the distribution of passengers per age and color the bars depending on survival rate.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Age&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dropna&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;age_bins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;age_bins&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_bounds&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_bounds&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;cm&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_cmap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;viridis&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;survival&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Age&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Age&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Survived&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;survival&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Age&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;])][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Survived&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;survival&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;pass&lt;/span&gt;

&lt;span class="c1"&gt;# Add colorbar.&lt;/span&gt;
&lt;span class="c1"&gt;# The survival rate is already normalized so we don&amp;#39;t need norm=plt.Normalize(vmin=0, vmax=1).&lt;/span&gt;
&lt;span class="c1"&gt;# I left it as an example.&lt;/span&gt;
&lt;span class="n"&gt;sm&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ScalarMappable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cmap&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;cm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;norm&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vmin&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;vmax&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; 
&lt;span class="n"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_A&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;colorbar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sm&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Add a title.&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Survival rate per passenger age&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fontsize&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="s1"&gt;&amp;#39;fontweight&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;bold&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="s1"&gt;&amp;#39;verticalalignment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;baseline&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="s1"&gt;&amp;#39;horizontalalignment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="data:image/png;base64,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" width="1000"&gt;&lt;/p&gt;</content><category term="visualization"></category><category term="python"></category><category term="visualization"></category><category term="matplotlib"></category></entry></feed>