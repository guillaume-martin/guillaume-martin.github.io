<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Guillaume Martin - visualization</title><link href="https://guillaume-martin.github.io/blog/" rel="alternate"></link><link href="https://guillaume-martin.github.io/blog/feeds/visualization.atom.xml" rel="self"></link><id>https://guillaume-martin.github.io/blog/</id><updated>2018-05-08T08:20:00+08:00</updated><entry><title>Customize Matplotlib Charts</title><link href="https://guillaume-martin.github.io/blog/customize-matplotlib-charts.html" rel="alternate"></link><published>2018-05-08T08:20:00+08:00</published><updated>2018-05-08T08:20:00+08:00</updated><author><name>Guillaume Martin</name></author><id>tag:guillaume-martin.github.io,2018-05-08:/blog/customize-matplotlib-charts.html</id><summary type="html">&lt;p&gt;This is the third post of a series of demonstration posts&lt;/p&gt;</summary><content type="html">&lt;p&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Since I started studying Python for data science, I have used Matplotlib for data visualization and found the library quite confusing.&lt;br&gt;
I am learning how to use the library by doing, going on internet to find help when I'm stuck.
I find examples with different methodologies and end up with different styles in my notebooks.&lt;/p&gt;
&lt;p&gt;The reason for this diversty of approaches to set a plot is that there are two API in Matplotlib. The &lt;code&gt;pyplot&lt;/code&gt; API and an &lt;code&gt;object-oriented&lt;/code&gt; API. It is advise to learn the &lt;code&gt;object-oriented&lt;/code&gt; API and I'll try to stick to it as much as I can in this post.&lt;/p&gt;
&lt;p&gt;Why should I bother learning how to use Matplotlib when libraries like &lt;em&gt;seaborn&lt;/em&gt; help us creating complex plots easily and pandas has basic plotting functions?&lt;br&gt;
Well, both are built on Matplotlib and at the end of the day, when you want to customize your plots, you need to know a bit how it works.&lt;/p&gt;
&lt;p&gt;I'll use the titanic dataset to create some of the charts. It can be downloaded from Kaggle.&lt;/p&gt;
&lt;p&gt;I hope that this post will help beginners like me get the most out of this awesome plotting library.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[1]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Backend"&gt;Backend&lt;a class="anchor-link" href="#Backend"&gt;&amp;#182;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Matplotlib has many use cases. Most of us use it from the python shell or in jupyter notebooks. It is embeded in applications interface by others.&lt;br&gt;
To handle all those different cases, we can use different backends.&lt;br&gt;
There are two types of backends:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;user interface backends or interactive backends to display on GUI.&lt;/li&gt;
&lt;li&gt;hardcopy backends or non-interactive backends to generate image files.
The backend has to be set before we import pyplot.  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There are two ways to set the backend: &lt;code&gt;matplotlib.use('backend_name')&lt;/code&gt; or &lt;code&gt;%matplotlib backend_name&lt;/code&gt;.&lt;br&gt;
The second method is an iPython magic command and will not work in all circumstances.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[2]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# see what is the current selected backend&lt;/span&gt;
&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_backend&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt output_prompt"&gt;Out[2]:&lt;/div&gt;




&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;&amp;#39;module://ipykernel.pylab.backend_inline&amp;#39;&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;We can easily get a list of available backends&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[3]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;interactive backends:&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rcsetup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;interactive_bk&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;non interactive backends:&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rcsetup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;non_interactive_bk&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;all backends: &lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rcsetup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all_backends&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;interactive backends:
[&amp;#39;GTK&amp;#39;, &amp;#39;GTKAgg&amp;#39;, &amp;#39;GTKCairo&amp;#39;, &amp;#39;MacOSX&amp;#39;, &amp;#39;Qt4Agg&amp;#39;, &amp;#39;Qt5Agg&amp;#39;, &amp;#39;TkAgg&amp;#39;, &amp;#39;WX&amp;#39;, &amp;#39;WXAgg&amp;#39;, &amp;#39;GTK3Cairo&amp;#39;, &amp;#39;GTK3Agg&amp;#39;, &amp;#39;WebAgg&amp;#39;, &amp;#39;nbAgg&amp;#39;]

non interactive backends:
[&amp;#39;agg&amp;#39;, &amp;#39;cairo&amp;#39;, &amp;#39;gdk&amp;#39;, &amp;#39;pdf&amp;#39;, &amp;#39;pgf&amp;#39;, &amp;#39;ps&amp;#39;, &amp;#39;svg&amp;#39;, &amp;#39;template&amp;#39;]

all backends: 
[&amp;#39;GTK&amp;#39;, &amp;#39;GTKAgg&amp;#39;, &amp;#39;GTKCairo&amp;#39;, &amp;#39;MacOSX&amp;#39;, &amp;#39;Qt4Agg&amp;#39;, &amp;#39;Qt5Agg&amp;#39;, &amp;#39;TkAgg&amp;#39;, &amp;#39;WX&amp;#39;, &amp;#39;WXAgg&amp;#39;, &amp;#39;GTK3Cairo&amp;#39;, &amp;#39;GTK3Agg&amp;#39;, &amp;#39;WebAgg&amp;#39;, &amp;#39;nbAgg&amp;#39;, &amp;#39;agg&amp;#39;, &amp;#39;cairo&amp;#39;, &amp;#39;gdk&amp;#39;, &amp;#39;pdf&amp;#39;, &amp;#39;pgf&amp;#39;, &amp;#39;ps&amp;#39;, &amp;#39;svg&amp;#39;, &amp;#39;template&amp;#39;]

&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Here, I'll use the &lt;em&gt;nbAgg&lt;/em&gt; backend.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[4]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;nbAgg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_backend&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt output_prompt"&gt;Out[4]:&lt;/div&gt;




&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;&amp;#39;nbAgg&amp;#39;&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;now that the backend is set, we can import pyplot&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[5]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Figure"&gt;Figure&lt;a class="anchor-link" href="#Figure"&gt;&amp;#182;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The &lt;code&gt;figure&lt;/code&gt; is the top level container that will contain everything we draw.&lt;br&gt;
When creating a figure, we can specify its size using the &lt;code&gt;figsize&lt;/code&gt; parameter. &lt;code&gt;figsize&lt;/code&gt; is a &lt;em&gt;width&lt;/em&gt;, &lt;em&gt;height&lt;/em&gt; tuple.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# creating a figure with width = 8 and height = 5&lt;/span&gt;
    &lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can also use the &lt;code&gt;figaspect&lt;/code&gt; function to set the aspect ratio of our figure:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# create a figure that is twice as tall as it is wide&lt;/span&gt;
    &lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;figaspect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Axes"&gt;Axes&lt;a class="anchor-link" href="#Axes"&gt;&amp;#182;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Axes&lt;/code&gt; are the area in which the data is plotted. A &lt;code&gt;Figure&lt;/code&gt; can have multiple &lt;code&gt;Axes&lt;/code&gt; but &lt;code&gt;Axes&lt;/code&gt; belong to one &lt;code&gt;Figure&lt;/code&gt; only.&lt;br&gt;
We can add &lt;code&gt;Axes&lt;/code&gt; to a &lt;code&gt;Figure&lt;/code&gt; using the &lt;code&gt;add_axes()&lt;/code&gt; or &lt;code&gt;add_subplot()&lt;/code&gt; methods. &lt;code&gt;Subplots&lt;/code&gt; and &lt;code&gt;Axes&lt;/code&gt; are the same thing.&lt;br&gt;
&lt;code&gt;add_axes()&lt;/code&gt; takes the &lt;code&gt;rect&lt;/code&gt; parameter. &lt;code&gt;rect&lt;/code&gt; is a sequence of floats that specifies [left, bottom, width, heights]. So the &lt;code&gt;Axes&lt;/code&gt; are positioned in absolute coordinates.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_axes&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;add_subplots()&lt;/code&gt; takes 3 integers as parameter. Those 3 numbers set the number of rows and columns and the position on the subplot in the grid: &lt;code&gt;add_subplots(ijk)&lt;/code&gt; add an &lt;code&gt;Axes&lt;/code&gt; in the kth position of a grid that has i rows and j columns.&lt;br&gt;
&lt;code&gt;add_subplots()&lt;/code&gt; is the easiest way to setup your layout while &lt;code&gt;add_axes()&lt;/code&gt; will give you more control over the position of your &lt;code&gt;Axes&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# create a new axes at the first position of a 2 rows by 3 columns grid&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;231&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="single-Axes"&gt;single Axes&lt;a class="anchor-link" href="#single-Axes"&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[6]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# create a figure&lt;/span&gt;
&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="c1"&gt;# add an axes&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="ebeaba5c-749b-4fd8-b344-778c53bad670"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#ebeaba5c-749b-4fd8-b344-778c53bad670');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAGQCAYAAAByNR6YAAAUIklEQVR4nO3dXahl50GA4bejZiiGtCgkmoC0QiQJInphwpBSghSq8aKxIKP1Ih0vRJOpIGhJb2TAn9jBQCGhkIg6iVIC/kDUi2q9CL3RY6FVm4KEBhInqYhgHKVp0qYdL9YZurOd883ZX2aO3WeeBz4ye+21Zi2+vXPOe9ZeZ00BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAZt5d/WX1pep8dc8+trmr+mz1WvXF6oNX6NgAALbST1S/Wf1U+wusd1Zfrh6qbq1OVq9X772CxwgAsLX2E1gfrZ5ZW/Zk9ckrckQAAFtuP4H16epja8tOVOcG2xytrlsb77jIMsMwDMMwLj1uqt4SW2M/gfVs9ZG1ZXfvbvvWPbY5tfu8YRiGYRiXZ9wUW+N8Vyaw1s9g3VSdP3v27Plz584ZhmEYhrHPcfbs2QuBdd3sN3sO3n4Ca+YjwnXXVefPnTt3HgDYv3PnzgmsLbSfwPpo9fm1ZZ9os4vcBRYATBBY2+Pa6od3x/nqV3b//H27zz9YPbGy/oXbNJyubqnua/PbNAgsAJggsLbHXV384rkzu8+fqZ6+yDafa7nR6HNtfqNRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBxYjAAoAJAosRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBxYjAAoAJAosRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBxYjAAoAJAosRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBxYjAAoAJAosRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBxYjAAoAJAosRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBxYjAAoAJAosRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwtsv91fPVq9VOdfsl1v+56p+qV6p/q/6g+u4N9iewAGCCwNoex6vXqhPVbdVj1cvV9Xusf2f19eqXq3dW76qeqf58g30KLACYILC2x071yMrjI9VL1QN7rP+r1XNryz5UvbjBPgUWAEwQWNvhmur16p615Y9XT+2xzZ3VV6u7q7dUN1SfbjnztV8CCwAmCKztcGPLi3RsbfnpljNbe/np6n+qr+1u/xfVdwzWP9ryRrgwbkpgAcDGBNZ2mAms26ovVb9W/VD13uqfq98f7OfU7n7eMAQWAGxGYG2HmY8I/6j607Vl72p5sb93j22cwQKAy0BgbY+d6uGVx0daLljf6yL3P6ueXFt2rOXFvnGf+3QNFgBMEFjb43jL/a/urW6tHm25TcMNu88/WD2xsv4HW669+qXq+1suev9M42u21gksAJggsLbLyeqFlvth7VR3rDx3pnp6bf0PVV9oudHol6o/bvnYb78EFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBxYjAAoAJAosRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBxYjAAoAJAosRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBxYjAAoAJAosRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBxYjAAoAJAosRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBxYjAAoAJAosRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBxYjAAoAJAosRgQUAEwQWIwILACYILEYEFgBMEFiMCCwAmCCwGBFYADBBYDEisABggsBiRGABwASBtV3ur56vXq12qtsvsf7R6reqF6rXdrf9+Q32J7AAYILA2h7HWyLpRHVb9Vj1cnX9YJunqr+v3lO9ozpW3bnBPgUWAEwQWNtjp3pk5fGR6qXqgT3W//Hqv6rvehP7FFgAMEFgbYdrqtere9aWP95ylupiPl79bfU7LSH2bPW71VsH+zna8ka4MG5K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" width="600"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Multiple-subplots"&gt;Multiple subplots&lt;a class="anchor-link" href="#Multiple-subplots"&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;We can create a figure with multiple subplots by calling &lt;code&gt;add_subplot()&lt;/code&gt; for each subplot we want to create.&lt;br&gt;
Here's an example for a 2 by 2 layout:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[7]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;ax1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;221&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;first subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;222&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;second subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;223&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;third subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;224&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fourth subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="52cb2bcb-5c58-4895-a7a4-952eab228aab"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#52cb2bcb-5c58-4895-a7a4-952eab228aab');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="600"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;This method is not the most efficient, especially if we want to draw a lot of subplots.&lt;br&gt;
An alternative way is to use the &lt;code&gt;plt.subplots()&lt;/code&gt; function.&lt;br&gt;
The function returns a figure and an array of axes.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[8]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nrows&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ncols&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# we can now access any Axes the same way we would access&lt;/span&gt;
&lt;span class="c1"&gt;# an element of a 2D array&lt;/span&gt;
&lt;span class="n"&gt;axes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;first subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;axes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;second subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;axes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;third subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;axes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fourth subplot&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="10fd9387-71ca-44b9-8d91-e49f167ab45c"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#10fd9387-71ca-44b9-8d91-e49f167ab45c');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="640"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Another way to create grid layouts is to use the &lt;code&gt;gridspec&lt;/code&gt; module.  It lets us specify the location of subplots in the figure. It also makes it easy to have plots that span over multiple columns&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[9]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.gridspec&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;gridspec&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;# I use gridspec de set the grid&lt;/span&gt;
&lt;span class="c1"&gt;# I need a 2x2 grid&lt;/span&gt;
&lt;span class="n"&gt;G&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gridspec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GridSpec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# the first subplots is on the first row and span over all columns&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;:])&lt;/span&gt;

&lt;span class="c1"&gt;# the second subplot is on the first column of the second row&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="c1"&gt;# the third subplot is on the second column of the second row&lt;/span&gt;
&lt;span class="n"&gt;ax3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="710ca489-c6ca-43e7-80ae-e2d5d403df14"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#710ca489-c6ca-43e7-80ae-e2d5d403df14');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="640"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Or we can have a subplot that spans over multiple rows&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[10]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;# the first subplot is two rows high&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="c1"&gt;# the second subplot is on the second column of the first row&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="c1"&gt;# the third subplot is on the second column of the second row&lt;/span&gt;
&lt;span class="n"&gt;ax3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="29fd29dd-34e2-4ff0-9011-70e588379b2c"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#29fd29dd-34e2-4ff0-9011-70e588379b2c');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="640"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Using &lt;code&gt;gridspec&lt;/code&gt;, we can also have different sizes for each subplot by specifying ratios for &lt;em&gt;width&lt;/em&gt; and &lt;em&gt;heights&lt;/em&gt;.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[11]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;G&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gridspec&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GridSpec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;width_ratios&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="c1"&gt;# the second column is two times larger than the first one&lt;/span&gt;
                      &lt;span class="n"&gt;height_ratios&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# the first row is four times higher than the second one&lt;/span&gt;
                     &lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# in this example, I use a different way to refer to a grid element&lt;/span&gt;
&lt;span class="c1"&gt;# note that it is not clear in which part of the grid the subplot is&lt;/span&gt;
&lt;span class="n"&gt;ax1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="c1"&gt;# same as plt.subplot(G[0, 0])&lt;/span&gt;
&lt;span class="n"&gt;ax2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="c1"&gt;# same as plt.subplot(G[0, 1])&lt;/span&gt;
&lt;span class="n"&gt;ax3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="c1"&gt;# same as plt.subplot(G[1, 0])&lt;/span&gt;
&lt;span class="n"&gt;ax4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="c1"&gt;# same as plt.subplot(G[1, 1])&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="643b721e-a27b-4cc6-8390-770535e35227"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#643b721e-a27b-4cc6-8390-770535e35227');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAHgCAYAAAA10dzkAAAgAElEQVR4nO3df4xl5V3H8TdTy4ZItkQTqLumUiMV1sZUjZCVBkdtrMU/oE3q1prIrom/YGvaaAn804xpFbuKJYE0grEuYFpMtQlSE1pMXPnDdmzSqtBEEZLFgVbjDxxN+VFo1z+eO+HMZWZ27n2+95znzPf9Sp60c+6Zuc8+3M/9nLn33DMgSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZK2cxXwAPAV4Axw7S6+Zxn4IvAC8DhwdEFzkzIxi5Kk3rwN+BDwdnZXOq8HvgbcClwGHAdeAt66wDlKGZhFSdIgdlM6HwYendp2H/DgQmYk5WQWJUm92U3pPAzcNrXtGLC+w/fsA/ZPjYu32OZwtDYOAufQP7PocDgc4xtDdUa13ZTOY8DNU9uunnzvedt8z8rkdodjjOMg/TuDWXQ4HI4xjiE6o9oZFlM60686HATOrK2tnVlfX3c4mhxra2sbYd4/b6AqmEWHw+EY0Ri4M6rtpnTmedtp2n7gzPr6+hmpVevr660fAJpFSWrEwJ1RbTel82HgkaltH2e2E88tHTVvBAeAZlGSGjHGA8DzgTdNxhngfZP//7rJ7bcA93T237j0xAngUuB6Zr/0hKWj5g0QZrMoSSM1xgPAZbY+ifHk5PaTwKktvudLlIvPPsHsF5+1dNS8AcK8jFmUpFEa4wHgECwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBRhrZ9wAnAaeB1aBy8+y/88B/wA8C3wV+Bjw7TPcn6Wj5g0Y5j7zaBYlKcAYDwCPAC8Ax4BDwF3AM8CF2+x/JfAN4NeA1wNvBh4FPjXDfVo6at5AYe47j2ZRkgKM8QBwFbij8/US8DRw0zb7/wbwxNS29wBPzXCflo6aN1CY+86jWZSkAGM7ADwXeAm4dmr73cD923zPlcDXgauBc4CLgIcpr1TslqWj5g0Q5iHyaBYlKcDYDgAPUCZ7eGr7CcorEdt5J/B/wIuT7/8L4NU77L+PsiAb4yCWjho3QJj7yKNZlKQFyHAAeAj4CvB+4PuBtwL/CPzRDvezMrmfTcPSUctGcgA4ax5XMIuSFG5sB4DzvOV0L/BnU9veTPlHf8c23+OrDhqdkbwFPGsezaIkLcDYDgChvLJwe+frJcoJ5NuddP7nwH1T2w5T/tEHdnmfnnek5g34IZA+82gWJSnAGA8Aj1CuN3YdcBlwJ+WyExdNbr8FuKez/1HKuUa/Cnw35ST0L7DzOUrTLB01b8DLwPSZR7MoSQHGeAAIcBx4knL9sVXgis5tJ4FTU/u/B/gy5cKzXwH+hPJW0m5ZOmregGHuM49mUZICjPUAsG+WjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgKMtTNuAE4DzwOrwOVn2X8f8FvAk8ALk+/9hRnuz9JR8wYMc595NIuSFGCMB4BHKKVxDDgE3AU8A1y4w/fcD3weeAtwMXAYuHKG+7R01LyBwtx3Hs2iJAUY4wHgKnBH5+sl4Gngpm32/yngf4Bvq7hPS0fNGyjMfefRLEpSgLEdAJ4LvARcO7X9bsqrClv5KPBXwO9Qiukx4PeA82a4X0tHzRsgzEPk0SxKUoCxHQAeoEz28NT2E5RXIrbyIOXcpE9Tzk26mnLO0R/vcD/7KAuyMQ5i6ahxA4S5jzyaRUlagAwHgJ8FngNe09n2DuCbbP+qw8rkfjYNS0ctG8kB4Kx5XMEsSlK4sR0AzvOW093A41PbLqP8oy/Z5nt81UGjM5K3gGfNo1mUpAUY2wEglFcWbu98vQQ8xfYnnf8S8CxwfmfbNcA38Lwj7SEDfgikzzyaRUkKMMYDwCOUc4iuo7xycCflshMXTW6/Bbins//5wBrwScplKq6inHj+hzPcp6Wj5g14GZg+82gWJSnAGA8AAY7z8kVkV4ErOredBE5N7X8p8BDllYc14Fb8FLD2mAHD3GcezaIkBRjrAWDfLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAUYa2fcAJwGngdWgct3+X1XAi8Bfz/j/Vk6at6AYe4zj2ZRkgKM8QDwCPACcAw4BNwFPANceJbvuwB4AvgMHgBqDxoozH3n0SxKUoAxHgCuAnd0vl4CngZuOsv33Qd8EFjBA0DtQQOFue88mkVJCjC2A8BzKW8ZXTu1/W7g/h2+7xjwd8C3sLvC2UdZkI1xEEtHjRsgzH3k0SxK0gKM7QDwAGWyh6e2n6C8ErGVS4B/B94w+XqFsx8ArkzuZ9OwdNSyAcLcRx5XMIuSFG6vHwC+CvgC8CudbSv4CqD2oBEcAM6TR7MoSQswtgPAWd9yuoDyj3upM77Z2fbju7xfzztS80bwFnBEHs2iJAUY2wEglFcWbu98vQQ8xdYnnS8Bb5waHwX+afL/v3WX92npqHkDfgikzzyaRUkKMMYDwCOU641dB1wG3Em57MRFk9tvAe7Z4ftX8FPA2oMGvAxMn3k0i5IUYIwHgADHgScp1x9bBa7o3HYSOLXD967gAaD2oAHD3GcezaIkBRjrAWDfLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFSNIZ1SwdNS9JmM2iJAVI0hnVLB01L0mYzaIkBUjSGdUsHTUvSZjNoiQFGGtn3ACcBp4HVoHLd9j3HcBDwH8A/wt8DnjrjPdn6ah5A4a5zzyaRUkKMMYDwCPAC8Ax4BBwF/AMcOE2+98G3Aj8MHAJ8NvA14EfmOE+LR01b6Aw951HsyhJAcZ4ALgK3NH5egl4Grhphp/xZeADM+xv6ah5A4W57zyaRUkKMLYDwHOBl4Brp7bfDdy/y5+xBPwrcHyHffZRFmRjHMTSUeMGCHMfeTSLkrQAYzsAPECZ7OGp7Scor0Tsxo3Af7P9W1QAK5P72TQsHbVsgDD3kccVzKIkhct2APhu4GvAW86yn686aHRGeAC4mzyaRUlagLEdANa85fQu4Fngp+e4X887UvNG9hbwvHk0i5IUYGwHgFBeWbi98/US8BQ7n3T+s8BzwDVz3qelo+YN+CGQPvNoFiUpwBgPAI9Qrjd2HXAZcCflshMXTW6/Bbins/+7gReB64HXdsZrZrhPS0fNG/AyMH3m0SxKUoAxHgBC+cTgk5Trj60CV3RuOwmc6nx9ii1OIp/st1uWjpo3YJj7zKNZlKQAYz0A7Julo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABJOqOapaPmJQmzWZSkAEk6o5qlo+YlCbNZlKQASTqjmqWj5iUJs1mUpABj7YwbgNPA88AqcPlZ9l8Gvgi8ADwOHJ3x/iwdNW/AMPeZR7MoSQHGeAB4hFIcx4BDwF3AM8CF2+z/euBrwK3AZcBx4CXgrTPcp6Wj5g0U5r7zaBYlKcAYDwBXgTs6Xy8BTwM3bbP/h4FHp7bdBzw4w31aOmreQGHuO49mUZICjO0A8FzKqwXXTm2/G7h/m+95GLhtatsxYH2G+7V01LwBwjxEHs2iJAUY2wHgAcpkD09tP0F5JWIrjwE3T227evJzztvme/ZRFmRjHATOrK2tnVlfX3c4mhxra2t9h7mPPJpFh8PhWMAYoDOq9HUAuDK53eEY47iYfvSRxxWGX0+Hw+HYy+NiRqCvt5y2fNVh8r/7Gx5jmeeY5jqWeXbnup9+9JHHsWbRx6fr0cJwPVyP3azHfkZiFbi98/US8BQ7n3T+yNS2jzPHh0Bof5HGMk8Yz1zHMk8YZq5953FM/z364Hps5nps5nps5npsNrr1OEK53th1lMtI3Em57MRFk9tvAe7p7L9x2YkTwKXA9cx5GRjaX6SxzBPGM9exzBOGmWvfeRzTf48+uB6buR6buR6buR6bjXI9jgNPUq4/tgpc0bntJHBqav9l4EuT/Z9gzgtB0/4ijWWeMJ65jmWeMNxc+8zjmP579MH12Mz12Mz12Mz12Mz12IV9lJPR9w08j7MZyzxhPHMdyzxhXHOdV4Z/4yxcj81cj81cj81cj81cD0mSJEmSJEmSJEmSJEmSNBo3AKcpl69YBS4/y/7LwBcpn1p8nK0/tfhO4J8mP/MRyl83iDDLXN8BPAT8B/C/wOd45eU1jvLKq4A/3/M8l7eYwxngtVP7tbCmJ7eZ65c7+xzd4vbaNb0KeAD4yuTnTV9seSvLDPc4jbSIfI5Z9HPA2M36+NhwJeWSQ3+/mGkNZtb12Af8Fi9/cv808AuLm17vZl2PnwP+AXgW+CrwMeDbFzi/viyqQ0btCOUfdww4BNxFuW7Zhdvsv3Hdslsp1zk7ziuvW/Yjk23vn+zzQeDrwBt7nuttwI3ADwOXAL89mccPdPY5SvmrC6/tjIuoM+s8lykPyDdMzWOps08ra/qaqTl+J/BflE9ObThK/Jq+DfgQ8HZ2F94hH6eRFpHPMVvEc8CYzboeGy6gXHLoM+ytA8B51uN+4PPAWyh/Auww5eB4L5h1Pa4EvgH8GuW55M3Ao8CnFj7TxVtEh4zeKnBH5+sl4Gl2/ssFj05tu4/Nf7ngT4FPT+3zeeAP5p8mMPtct/Jl4AOdr48C/1M5r2mzznOZ8oC8YIef2eqaXgt8E/iuzrajxK9p127CO+TjNNIi8jlmi3gOGLN51+M+yi88K+ytA8BZ1+OnKM9V37bgeQ1l1vX4DcovBl3vofw1o70kqkNGbVF/u/RfgfdO7fOblJeV5zXPXKctTeZ2vLPt6OTnPgmsTX7W9/U8z2XKA/I05SX3h3jlb6CtrukDwGenth0ldk2n7Sa8Qz1OI/X1t77HYlHPAWM173ocA/4O+Bb21gHgPOvxUeCvgN+hHBg9BvwecN6C5tinedbjSsor5FcD51DeuXmY8srhXhLVIaN2gLIQh6e2n6D85rCVx4Cbp7ZdPfk5G6H5OvCzU/tcD/z73DOdb67TbgT+m80vfx8Gfh54E/CjlAOadcpbm33N83uBXwZ+iPK25MeAF4Ef7OzT4poeoDzB/MzU9ug1nbab8A71OI20qHyO1aKeA8ZqnvW4hPL4fsPk6xX2zgHgPOvxIOXcuE9Tzo27mvKL+B8vZoq9mjcv7wT+j9JBZ4C/AF69iAkOKKpDRi3TAeC7Ke/nv+Us+72acrLnB2ed4ERESQH8DXBv5+sW1/Rm4D8pv2nupHZNp3kA6AFgV/RzwFjMuh6vAr4A/Epn2wq5DwA/CzxHObd5wzsop7VkzMshyock3g98P+V8t38E/mhBcxyKB4DkeQv4XZRPNP30Lu/rk8AnZprdyyLepgL4XconFje0tqbnAP8CfGSX91WzptN8C9i3gLsW8RwwBrOuxwWU7LzUGd/sbPvxhc20H/M8Pu6m/HLadRllTS4JnV3/5lmPe4E/m9r2Zsp6fEfo7IblW8ATq8Dtna+XKCd87nSS+SNT2z7OK0+uf2Bqn78l5gMLs8wVyis8zwHX7PI+XkW5LMjvzzPBiXnmOe0hNn/yqqU1hZfPW9zNJ2Yj1rRrtyfwDvU4jbSIfI5ZH88BYzLLeixR8todH6Vk843Aty50pv2Y9fHxS5RfDM7vbLuG8knYvfAqz6zr8eeUDzp0HaY85x4In91wojpk9I5QzoG4jvKbz52Uj4lvXLbjFuCezv4bH40+AVxKectsq8trvAj8+mSfFeIuWTLLXN89mcf1bL4kSffl/g8APwl8N+Wcu09QyuJQj/N8L+VJ53soa3Qb5QnoJzr7tLKmG+6lfGJ2K4tY0/Mp5xS+iRLe903+/+u2meeQj9NIi8jnmC3iOWDM5s3vhhX2zlvAMPt6nE/5oNonKc9PV1He+vvDnua7aLOux1FKXn6V8vx9JeW0gVlOX2rVIjpkTzjOyxfBXAWu6Nx2Ejg1tf8y8KXJ/k+w/QV2/3myz6PEXWB3lrmeYuuLFp/s7PORzs/7N+AviblG2CzzvJHyNsRzlGvq/TXwY1v8zBbWFEp5Pgv84jY/bxFruszO/y23mucywz1OIy0in2MW/RwwdrM+PrpW2FsHgDD7elxKecflWcrB4K3sjVf/Nsy6Hu+hXCrpWcr5gH8CHFz0JHuwzGI6RJIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZK0tauAB4CvAGeAa3fxPcvAF4EXgMeBowuam5SJWZQk9eZtwIeAt7O70nk98DXgVuAy4DjwEvDWBc5RysAsSpIGsZvS+TDw6NS2+4AHFzIjKSezKEnqzW5K52Hgtqltx4D1hcxIysksSpJ6s5vSeQy4eWrb1ZPvPW+b79kH7J8aF2+xzeFobRwEzqF/ZtHhcDjGN4bqjGqLKp2Vye0OxxjHQfp3BrPocDgcYxxDdEa1MyzmbafpVx0OAmfW1tbOrK+vOxxNjrW1tY0w758rTXXMosPhcIxoDNwZ1XZTOh8GHpna9nFmO/F8P3BmfX39jNSq9fX11g8AzaIkNWLgzpjL+cCbJuMM8L7J/3/d5PZbgHs6+29ceuIEcClwPbNfesLSUfMGCLNZlKSRGv6h5gcAAA04SURBVOMB4DJbv4d9cnL7SeDUFt/zJcrFZ59g9ovPWjpq3gBhXsYsStIojfEAcAiWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICJOmMapaOmpckzGZRkgIk6Yxqlo6alyTMZlGSAiTpjGqWjpqXJMxmUZICjLUzbgBOA88Dq8DlO+y7TPkHTo/XznB/lo6aN2CY+8yjWZSkAGM8ADwCvAAcAw4BdwHPABdus/8y5R/4BkrJbIylGe7T0lHzBgpz33k0i5IUYIwHgKvAHZ2vl4CngZu22X+Z8g+8oOI+LR01b6Aw951HsyhJAcZ2AHgu8BJw7dT2u4H7t/meZco/8DTwVeAh4MoZ79fSUfMGCPMQeTSLkhRgbAeAByiTPTy1/QTllYitfC/wy8APAT8CfAx4EfjBHe5nH2VBNsZBLB01boAw95FHsyhJC5DhAHArfwPcu8PtK2xxorqlo5aN5ABwKzvlcQWzKEnhxnYAOM9bTlv5XeBzO9zuqw4anZG8BbyVnfJoFiVpAcZ2AAjllYXbO18vAU+x/UnnW3kI+NQM+3vekZo34IdA+syjWZSkAGM8ADxCud7YdcBlwJ2Uy05cNLn9FuCezv7vBa4Bvgd4I3Ab8A3gJ2a4T0tHzRvwMjB95tEsSlKAMR4AAhwHnqRcf2wVuKJz20ngVOfrG4HHgeeA/wL+GvixGe/P0lHzBgxzn3k0i5IUYKwHgH2zdNS8JGE2i5IUIElnVLN01LwkYTaLkhQgSWdUs3TUvCRhNouSFCBJZ1SzdNS8JGE2i5IUIElnVLN01LwkYTaLkhQgSWdUs3TUvCRhNouSFCBJZ1SzdNS8JGE2i5IUIElnVLN01LwkYTaLkhQgSWdUs3TUvCRhNouSFCBJZ1SzdNS8JGE2i5IUIElnVLN01LwkYTaLkhQgSWdUs3TUvCRhNouSFCBJZ1SzdNS8JGE2i5IUIElnVLN01LwkYTaLkhQgSWdUs3TUvCRhNouSFCBJZ1SzdNS8JGE2i5IUIElnVLN01LwkYTaLkhQgSWdUs3TUvCRhNouSFCBJZ1SzdNS8JGE2i5IUIElnVLN01LwkYTaLkhQgSWdUs3TUvCRhNouSFCBJZ1SzdNS8JGE2i5IUIElnVLN01LwkYTaLkhQgSWdUs3TUvCRhNouSFCBJZ1SzdNS8JGE2i5IUIElnVLN01LwkYTaLkhQgSWdUs3TUvCRhNouSFCBJZ1SzdNS8JGE2i5IUYKydcQNwGngeWAUuP8v+y8AXgReAx4GjM96fpaPmDRjmPvNoFiUpwBgPAI9QiuMYcAi4C3gGuHCb/V8PfA24FbgMOA68BLx1hvu0dNS8gcLcdx7NoiQFGOMB4CpwR+frJeBp4KZt9v8w8OjUtvuAB2e4T0tHzRsozH3n0SxKUoCxHQCeS3m14Nqp7XcD92/zPQ8Dt01tOwas73A/+ygLsjEOAmfW1tbOrK+vOxxNjrW1tb7D3EcezaLD4XAsYAzQGVUOUCZ7eGr7CcorEVt5DLh5atvVk59z3jbfszK53eEY47iYfvSRxxWGX0+Hw+HYy+NiRqCvA8AtX3WY/O/+hsdY5jmmuY5lnt257qcffeRxrFn08el6tDBcD9djN+uxnxHo6y3gafsZxyKNZZ4wnrmOZZ7Q/1yHyOOY/nv0wfXYzPXYzPXYzPXYbHTrsQrc3vl6CXiKnU86f2Rq28eZ40MgtL9IY5knjGeuY5knDDPXvvM4pv8efXA9NnM9NnM9NnM9NhvdehyhXG/sOsplJO6kXHbiosnttwD3dPbfuOzECeBS4HrmvAwM7S/SWOYJ45nrWOYJw8y17zyO6b9HH1yPzVyPzVyPzVyPzUa5HseBJynXH1sFrujcdhI4NbX/MvClyf5PMPuFoPdRTkbfN+P39W0s84TxzHUs84Th5tpnHsf036MPrsdmrsdmrsdmrsdmrockSZIkSZIkSZIkSZIkSZIkSZLadANwmnL5ilXg8rPsvwx8kfKpxcfZ+lOL7wT+afIzH6H8dYMIs8z1HcBDwH8A/wt8jldeXuMor/wzMM/3PM/lLeZwBnjt1H4trOnJbeb65c4+R7e4vXZNrwIeAL4y+XnTF1veyjLDPU4jLSKfYxb9HDB2sz4+NlxJueTQ3y9mWoOZdT32Ab/Fy5/cPw38wuKm17tZ1+PngH8AngW+CnwM+PYFzq8vi+qQUTtC+ccdAw4Bd1GuW3bhNvtvXLfsVsp1zo7zyuuW/chk2/sn+3wQ+Drwxp7nehtwI/DDwCXAb0/m8QOdfY5S/urCazvjIurMOs9lygPyDVPzWOrs08qavmZqjt8J/Bflo/MbjhK/pm8DPgS8nd2Fd8jHaaRF5HPMFvEcMGazrseGCyiXHPoMe+sAcJ71uB/4PPAWyt+APUw5ON4LZl2PK4FvAL9GeS55M/Ao8KmFz3TxFtEho7cK3NH5egl4mp3/csGjU9vuY/NfLvhT4NNT+3we+IP5pwnMPtetfBn4QOfro8D/VM5r2qzzXKY8IC/Y4We2uqbXAt8Evquz7Sjxa9q1m/AO+TiNtIh8jtkingPGbN71uI/yC88Ke+sAcNb1+CnKc9W3LXheQ5l1PX6D8otB13sof81oL4nqkFFb1N8u/VfgvVP7/CblZeV5zTPXaUuTuR3vbDs6+blPAmuTn/V9Pc9zmfKAPE15yf0hXvkbaKtr+gDw2altR4ld02m7Ce9Qj9NIQ/2t71Yt6jlgrOZdj2PA3wHfwt46AJxnPT4K/BXwO5QDo8eA3wPOW9Ac+zTPelxJeYX8auAcyjs3D1NeOdxLojpk1A5QFuLw1PYTlN8ctvIYcPPUtqsnP2cjNF8HfnZqn+uBf597pvPNddqNwH+z+eXvw8DPA28CfpRyQLNOeWuzr3l+L/DLwA9R3pb8GPAi8IOdfVpc0wOUJ5ifmdoevabTdhPeoR6nkRaVz7Fa1HPAWM2zHpdQHt9vmHy9wt45AJxnPR6knBv3acq5cVdTfhH/48VMsVfz5uWdwP9ROugM8BfAqxcxwQFFdcioZToAfDfl/fy3nGW/V1NO9vzgrBOciCgpgL8B7u183eKa3gz8J+U3zZ3Uruk0DwA9AOyKfg4Yi1nX41XAF4Bf6WxbIfcB4GeB5yjnNm94B+W0lox5OUT5kMT7ge+nnO/2j8AfLWiOQ/EAkDxvAb+L8ommn97lfX0S+MRMs3tZxNtUAL9L+cTihtbW9BzgX4CP7PK+atZ0mm8B+xZw1yKeA8Zg1vW4gJKdlzrjm51tP76wmfZjnsfH3ZRfTrsuo6zJJaGz698863Ev8GdT295MWY/vCJ3dsHwLeGIVuL3z9RLlhM+dTjJ/ZGrbx3nlyfUPTO3zt8R8YGGWuUJ5hec54Jpd3serKJcF+f15JjgxzzynPcTmT161tKbw8nmLu/nEbMSadu32BN6hHqeRFpHPMevjOWBMZlmPJUpeu+OjlGy+EfjWhc60H7M+Pn6J8ovB+Z1t11A+CbsXXuWZdT3+nPJBh67DlOfcA+GzG05Uh4zeEco5ENdRfvO5k/Ix8Y3LdtwC3NPZf+Oj0SeASylvmW11eY0XgV+f7LNC3CVLZpnruyfzuJ7NlyTpvtz/AeAnge+mnHP3CUpZHOpxnu+lPOl8D2WNbqM8Af1EZ59W1nTDvZRPzG5lEWt6PuWcwjdRwvu+yf9/3TbzHPJxGmkR+RyzRTwHjNm8+d2wwt55CxhmX4/zKR9U+yTl+ekqylt/f9jTfBdt1vU4SsnLr1Kev6+knDYwy+lLrVpEh+wJx3n5IpirwBWd204Cp6b2Xwa+NNn/Cba/wO4/T/Z5lLgL7M4y11NsfdHik519PtL5ef8G/CUx1wibZZ43Ut6GeI5yTb2/Bn5si5/ZwppCKc9ngV/c5uctYk2X2fm/5VbzXGa4x2mkReRzzKKfA8Zu1sdH1wp76wAQZl+PSynvuDxLORi8lb3x6t+GWdfjPZRLJT1LOR/wT4CDi55kD5ZZTIdIkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJCfw/7ejz2+IxT6IAAAAASUVORK5CYII=" width="640"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Artists"&gt;Artists&lt;a class="anchor-link" href="#Artists"&gt;&amp;#182;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Artists&lt;/code&gt; are everything we can see on a &lt;code&gt;Figure&lt;/code&gt;. Most of them are tied to an &lt;code&gt;Axes&lt;/code&gt;.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Plotting"&gt;Plotting&lt;a class="anchor-link" href="#Plotting"&gt;&amp;#182;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;I won't spend to much time on the ploting functions. Everybody has already used them extensively and there are a lot of tutorials out there.&lt;br&gt;
I'll just add that the plotting functions we usually call using pyplot (e.g. &lt;code&gt;plt.scatter()&lt;/code&gt;) can be called on Axes: &lt;code&gt;ax.scatter()&lt;/code&gt;. This make it easy to manage multiple subplots&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[12]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;nrows&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ncols&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# plot different charts on each axes&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Embarked&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value_counts&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Pclass&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value_counts&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

&lt;span class="c1"&gt;# customize a bit&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Embarked&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Pclass&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tight_layout&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="468bffe2-88a5-4a72-8047-ddfa3d1bd3a1"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#468bffe2-88a5-4a72-8047-ddfa3d1bd3a1');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="600"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Customization"&gt;Customization&lt;a class="anchor-link" href="#Customization"&gt;&amp;#182;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Now that we have set the layout and plot some data, we can have a look at how to customize the elements or &lt;code&gt;Artists&lt;/code&gt; of our plot.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Axis-and-Ticks"&gt;Axis and Ticks&lt;a class="anchor-link" href="#Axis-and-Ticks"&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Axis&lt;/code&gt; are the X and Y axis of our plot, not to be confused with the &lt;code&gt;Axes&lt;/code&gt;.&lt;br&gt;
Each &lt;code&gt;Axis&lt;/code&gt; has &lt;code&gt;Ticks&lt;/code&gt; that can also be customized. Let's look at a sample plot.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[13]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="adcb659f-bf58-478c-8c6e-b943ceaa6e4c"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#adcb659f-bf58-478c-8c6e-b943ceaa6e4c');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="640"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;The &lt;code&gt;Ticks&lt;/code&gt; on the X-axis are the marks with the numbers 0 to 10 and the ticks on the Y-axis are the marks with numbers 0 to 100.&lt;br&gt;
&lt;strong&gt;Customizing the axis&lt;/strong&gt;&lt;br&gt;
Some useful customizations on the axis are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ax.set_xlabel()&lt;/code&gt;, &lt;code&gt;ax.set_ylabel()&lt;/code&gt;: add a label to the axis&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ax.set_xlim()&lt;/code&gt;, &lt;code&gt;ax.set_ylim()&lt;/code&gt;: to set the data limits on the axis. We can use &lt;code&gt;get_xlim()&lt;/code&gt; or &lt;code&gt;get_ylim()&lt;/code&gt; to see what those are those limits.  &lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;strong&gt;Customizing the ticks&lt;/strong&gt;
We can customize the &lt;code&gt;Ticks&lt;/code&gt; using the &lt;code&gt;tick_params()&lt;/code&gt; method.&lt;br&gt;
The most useful options are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;bottom, top, left, right&lt;/strong&gt;: set to True/False or 'on'/'off' to show or hide the ticks&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;labelbottom, labeltop, labelleft, labelright&lt;/strong&gt;: set to True/False or 'on'/'off' to show or hide the ticks labels&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;labelrotation&lt;/strong&gt;: rotate the tick labels&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;labelsize&lt;/strong&gt;: resize the ticks labels&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;labelolor&lt;/strong&gt;: change the color of ticks labels&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;color&lt;/strong&gt;: change the ticks colors&lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[14]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# add labels&lt;/span&gt;
&lt;span class="c1"&gt;# we can also use LaTex notations in titles and labels&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;$x$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;$y = x^2$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# reduce the axis limites to let the line touch the borders&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# customize the ticks&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;labelleft&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;labelcolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;orange&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;labelsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
               &lt;span class="n"&gt;bottom&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;green&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
               &lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;direction&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;inout&amp;#39;&lt;/span&gt;
              &lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="876c1788-5e8e-4ff3-80d9-c7b42d06d73b"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#876c1788-5e8e-4ff3-80d9-c7b42d06d73b');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="640"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Spines"&gt;Spines&lt;a class="anchor-link" href="#Spines"&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;The spines are the lines that surround your plot. Two of them define te x and y axis. The two others close the frame.&lt;br&gt;
We can set bounds to limit the spine length and show or hide a spine.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[15]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# shorten the spines used for the x and y axis&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_bounds&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_bounds&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# other customizations&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_linewidth&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# remove the two other spinces&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="cf057d88-fca2-4e55-b8b9-c20dbb927037"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#cf057d88-fca2-4e55-b8b9-c20dbb927037');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="640"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Bars,-lines,-markers,-..."&gt;Bars, lines, markers, ...&lt;a class="anchor-link" href="#Bars,-lines,-markers,-..."&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Plotting functions return objects. For example &lt;code&gt;ax.bar(x, y)&lt;/code&gt; returns a container with all the bars. We can catch the bars and call methods on them.&lt;br&gt;
We can find the methods in the matplotlib &lt;a href="https://matplotlib.org/api/_as_gen/matplotlib.patches.Rectangle.html#matplotlib.patches.Rectangle"&gt;documentation&lt;/a&gt;. The bars are instances of the &lt;code&gt;Rectangle&lt;/code&gt; class from the &lt;code&gt;patches&lt;/code&gt; module.&lt;br&gt;
We can get the bars attributes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;get_height()&lt;/li&gt;
&lt;li&gt;get_width()&lt;/li&gt;
&lt;li&gt;get_x(), get_y(), get_xy()&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;or set a new value for those attributes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;set_height()&lt;/li&gt;
&lt;li&gt;set_width()&lt;/li&gt;
&lt;li&gt;set_x(), set_y(), set_xy()&lt;/li&gt;
&lt;li&gt;set_color()&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[16]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# lets create some bars&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;bars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;b&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# we can get the height of the bars&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bars[&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt;]&lt;/span&gt;&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;&lt;span class="s1"&gt;s height = &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_height&lt;/span&gt;&lt;span class="p"&gt;()))&lt;/span&gt;

&lt;span class="c1"&gt;# or we can set a different color for the third bar&lt;/span&gt;
&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# or set a different width for the first bar&lt;/span&gt;
&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_width&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;bars[0]&amp;#39;s height = 2.0
bars[1]&amp;#39;s height = 6.0
bars[2]&amp;#39;s height = 7.0
bars[3]&amp;#39;s height = 3.0
bars[4]&amp;#39;s height = 4.0
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="1c06be9e-148e-4d03-9f1c-2b97ba84eb5e"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#1c06be9e-148e-4d03-9f1c-2b97ba84eb5e');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="640"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;The &lt;code&gt;hist()&lt;/code&gt; method returns an array of the bins values, an array of bins and the patches used to draw the histogram.
In the following example, I'll look at the age distribution of the Titanic's passengers. I'll set a different color to the highest bar to have it stand out.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[17]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Age&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dropna&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;bins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# get the value of each bin&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nb"&gt;bin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bin &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt;: &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s1"&gt; passengers&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;bin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;

&lt;span class="c1"&gt;# change the highest bin color    &lt;/span&gt;
&lt;span class="n"&gt;max_idx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argmax&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;max_idx&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;bin 0: 40 passengers
bin 5: 22 passengers
bin 10: 16 passengers
bin 15: 86 passengers
bin 20: 114 passengers
bin 25: 106 passengers
bin 30: 95 passengers
bin 35: 72 passengers
bin 40: 48 passengers
bin 45: 41 passengers
bin 50: 32 passengers
bin 55: 16 passengers
bin 60: 15 passengers
bin 65: 4 passengers
bin 70: 6 passengers
bin 75: 0 passengers
bin 80: 1 passengers
bin 85: 0 passengers
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="5f7e7ecc-a05c-4f0d-90cf-1e1b87e2bbaa"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#5f7e7ecc-a05c-4f0d-90cf-1e1b87e2bbaa');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="640"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Annotations"&gt;Annotations&lt;a class="anchor-link" href="#Annotations"&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;We can add text to our plot with &lt;code&gt;ax.annotation()&lt;/code&gt; and &lt;code&gt;ax.text()&lt;/code&gt;.&lt;br&gt;
&lt;code&gt;ax.annotation('text', (x, y)&lt;/code&gt;&lt;br&gt;
&lt;code&gt;ax.text(x, y, 'text', **kwargs)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;If needed, we can add arrows to point our annoc\tation to a specific point. Just use &lt;code&gt;ax.arrow(x, y, dx, dy)&lt;/code&gt; where &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; are the coordinates of the origin of the arrow and &lt;code&gt;dx&lt;/code&gt;, &lt;code&gt;dy&lt;/code&gt; are the length of the arrow along the coordinates.&lt;br&gt;
We can also add more arguments to customize the arrow:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;width: width of the arrow tail&lt;/li&gt;
&lt;li&gt;head_width: width of the arrow head&lt;/li&gt;
&lt;li&gt;head_length: length of the arrow head&lt;/li&gt;
&lt;li&gt;shape: shape of the arrow head ('full', 'left' or 'right')&lt;/li&gt;
&lt;li&gt;edgecolor, facecolor&lt;/li&gt;
&lt;li&gt;color (will override edgecolor and facecolor)&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Let's look at an example.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[18]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;annotate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bar&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
        &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
        &lt;span class="s1"&gt;&amp;#39;foo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;red&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# add an arrow that starts at &amp;#39;foo&amp;#39; and point at the line&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arrow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;48&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;length_includes_head&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;0.3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;head_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;facecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;y&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;edgecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# we can also set an arrow in the annotate method&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;annotate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;quz&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
            &lt;span class="n"&gt;xytext&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="c1"&gt;# text coordinates &lt;/span&gt;
            &lt;span class="n"&gt;xy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;7.8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;   &lt;span class="c1"&gt;# arrow head coordinates&lt;/span&gt;
            &lt;span class="n"&gt;arrowprops&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arrowstyle&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="88e634d4-989f-4d30-9f8e-3dc56ecb0ed2"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#88e634d4-989f-4d30-9f8e-3dc56ecb0ed2');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="640"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Practice"&gt;Practice&lt;a class="anchor-link" href="#Practice"&gt;&amp;#182;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Now, let's use everything we've learn to create some nice visualizations.&lt;/p&gt;
&lt;h3 id="Exercise-1"&gt;Exercise 1&lt;a class="anchor-link" href="#Exercise-1"&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;In this first exercise, I am going to improve a simple bar chart showing the number of passengers per port of embarkation.&lt;br&gt;
Here's the default chart rendered by pyplot.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[19]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Embarked&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value_counts&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="c201b550-6716-4356-8117-1f9ff0a66c18"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#c201b550-6716-4356-8117-1f9ff0a66c18');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="640"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;I am going to remove unecessary elements and change the colors.&lt;br&gt;
I'll add some meaningful information like labels and values on bars and a title.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[20]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Embarked&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value_counts&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;bars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;lightslategrey&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# remove the frame&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_frame_on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# we need only 3 ticks (one per bar)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="c1"&gt;# we don&amp;#39;t want the ticks, only the labels&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bottom&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;off&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticklabels&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Southampton&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Cherbourg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Queenstown&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                   &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fontsize&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s1"&gt;&amp;#39;verticalalignment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="s1"&gt;&amp;#39;horizontalalignment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                    &lt;span class="p"&gt;})&lt;/span&gt;

&lt;span class="c1"&gt;# remove ticks on the y axis and show values in the bars&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;left&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;off&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;labelleft&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;off&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# add the values on each bar&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_x&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_width&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c1"&gt;# x coordinate&lt;/span&gt;
            &lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_height&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;              &lt;span class="c1"&gt;# y coordinate&lt;/span&gt;
            &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;                             &lt;span class="c1"&gt;# text&lt;/span&gt;
            &lt;span class="n"&gt;ha&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;                       &lt;span class="c1"&gt;# horizontal alignment&lt;/span&gt;
            &lt;span class="n"&gt;va&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;                          &lt;span class="c1"&gt;# vertical alignment&lt;/span&gt;
            &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;                         &lt;span class="c1"&gt;# text color&lt;/span&gt;
            &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 

&lt;span class="c1"&gt;# use a different color for the first bar&lt;/span&gt;
&lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;firebrick&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# add a title&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Most of passengers embarked at Southampton&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fontsize&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="s1"&gt;&amp;#39;fontweight&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;bold&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="s1"&gt;&amp;#39;verticalalignment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;baseline&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="s1"&gt;&amp;#39;horizontalalignment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="b93a849b-8272-4648-bbf2-1962b1dc139f"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#b93a849b-8272-4648-bbf2-1962b1dc139f');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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QKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUEAGAAFBDpSxQQAIABUECkL1FAAAAGQAGRvkQBAQAYAAVE+hIFBABgABQQ6UsUEACAAVBApC9RQAAABkABkb5EAQEAGAAFRPoSBQQAYAAUEOlLFBAAgAFQQKQvUUAAAAZAAZG+RAEBABgABUT6EgUE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" width="800"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Exercise-2"&gt;Exercise 2&lt;a class="anchor-link" href="#Exercise-2"&gt;&amp;#182;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;In this second exercise, I am going to plot the distribution of passengers per age and color the bars depending on survival rate.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In&amp;nbsp;[21]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Age&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dropna&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;age_bins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;age_bins&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_bounds&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_bounds&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;top&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;spines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;right&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_visible&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;cm&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_cmap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;viridis&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;survival&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Age&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Age&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Survived&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;survival&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Age&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;bins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;])][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Survived&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;bars&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;survival&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;pass&lt;/span&gt;

&lt;span class="c1"&gt;# add colorbar&lt;/span&gt;
&lt;span class="c1"&gt;# the survival rate is already normalized so we don&amp;#39;t need norm=plt.Normalize(vmin=0, vmax=1)&lt;/span&gt;
&lt;span class="c1"&gt;# I left it as an example&lt;/span&gt;
&lt;span class="n"&gt;sm&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ScalarMappable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cmap&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;cm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;norm&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Normalize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vmin&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;vmax&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; 
&lt;span class="n"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_A&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;colorbar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sm&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    
&lt;span class="c1"&gt;# add a title&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Survival rate per passenger age&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fontsize&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="s1"&gt;&amp;#39;fontweight&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;bold&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="s1"&gt;&amp;#39;verticalalignment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;baseline&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="s1"&gt;&amp;#39;horizontalalignment&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;center&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;





&lt;div id="9298f6fc-fb18-4de3-a93a-ac7eb1de32ac"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#9298f6fc-fb18-4de3-a93a-ac7eb1de32ac');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support.' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('&lt;div/&gt;');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        this.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '&lt;div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/&gt;');
    var titletext = $(
        '&lt;div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/&gt;');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('&lt;div/&gt;');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('&lt;canvas/&gt;');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('&lt;canvas/&gt;');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY &lt; 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('&lt;button/&gt;');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('&lt;span/&gt;');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('&lt;span/&gt;');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('&lt;span/&gt;');

    var fmt_picker = $('&lt;select/&gt;');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '&lt;option/&gt;', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option)
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('&lt;span class="mpl-message"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width, fig.canvas.height);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' &amp;&amp; evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey &amp;&amp; event.which != 17)
        value += "ctrl+";
    if (event.altKey &amp;&amp; event.which != 18)
        value += "alt+";
    if (event.shiftKey &amp;&amp; event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to  previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overriden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket-&gt;open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("&lt;div id='" + id + "'&gt;&lt;/div&gt;");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('&lt;img src="' + dataURL + '" width="' + width + '"&gt;');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '&lt;img src="' + dataURL + '" width="' + width + '"&gt;';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('&lt;div/&gt;')
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('&lt;button class="btn btn-default" href="#" title="' + name + '"&gt;&lt;i class="fa ' + image + ' fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('&lt;span class="mpl-message" style="text-align:right; float: right;"/&gt;');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('&lt;div class="btn-group inline pull-right"&gt;&lt;/div&gt;');
    var button = $('&lt;button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"&gt;&lt;i class="fa fa-power-off icon-remove icon-large"&gt;&lt;/i&gt;&lt;/button&gt;');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey &amp;&amp; event.which == 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i&lt;ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j&lt;cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython &gt;= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;div class="output_area"&gt;

&lt;div class="prompt"&gt;&lt;/div&gt;



&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;img src="data:image/png;base64,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" width="1000"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
 

&lt;/p&gt;</content><category term="python"></category><category term="visualization"></category><category term="matplotlib"></category></entry></feed>